var mmStart=function(u){function h(C){if(E[C])return E[C].exports;var I=E[C]={i:C,l:!1,exports:{}};return u[C].call(I.exports,I,I.exports,h),I.l=!0,I.exports}var E={};return h.m=u,h.c=E,h.i=function(C){return C},h.d=function(C,I,T){h.o(C,I)||Object.defineProperty(C,I,{configurable:!1,enumerable:!0,get:T})},h.n=function(C){var I=C&&C.__esModule?function(){return C['default']}:function(){return C};return h.d(I,'a',I),I},h.o=function(C,I){return Object.prototype.hasOwnProperty.call(C,I)},h.p='',h(h.s=355)}([function(u,h){var C,I;(function(){function T(ke){function Ce(Se,Ie,Te,Ae,Fe,Le){for(;0<=Fe&&Fe<Le;Fe+=ke){var Ne=Ae?Ae[Fe]:Fe;Te=Ie(Te,Se[Ne],Ne,Se)}return Te}return function(Se,Ie,Te,Ae){Ie=Z(Ie,Ae,4);var Fe=!de(Se)&&J.keys(Se),Le=(Fe||Se).length,Ne=0<ke?0:Le-1;return 3>arguments.length&&(Te=Se[Fe?Fe[Ne]:Ne],Ne+=ke),Ce(Se,Ie,Te,Fe,Ne,Le)}}function L(ke){return function(Ce,Se,Ie){Se=ee(Se,Ie);for(var Te=re(Ce),Ae=0<ke?0:Te-1;0<=Ae&&Ae<Te;Ae+=ke)if(Se(Ce[Ae],Ae,Ce))return Ae;return-1}}function N(ke,Ce,Se){return function(Ie,Te,Ae){var Fe=0,Le=re(Ie);if('number'==typeof Ae)0<ke?Fe=0<=Ae?Ae:Math.max(Ae+Le,Fe):Le=0<=Ae?Math.min(Ae+1,Le):Ae+Le+1;else if(Se&&Ae&&Le)return Ae=Se(Ie,Te),Ie[Ae]===Te?Ae:-1;if(Te!==Te)return Ae=Ce(U.call(Ie,Fe,Le),J.isNaN),0<=Ae?Ae+Fe:-1;for(Ae=0<ke?Fe:Le-1;0<=Ae&&Ae<Le;Ae+=ke)if(Ie[Ae]===Te)return Ae;return-1}}function R(ke,Ce){var Se=ue.length,Ie=ke.constructor,Te=J.isFunction(Ie)&&Ie.prototype||W,Ae='constructor';for(J.has(ke,Ae)&&!J.contains(Ce,Ae)&&Ce.push(Ae);Se--;)Ae=ue[Se],Ae in ke&&ke[Ae]!==Te[Ae]&&!J.contains(Ce,Ae)&&Ce.push(Ae)}var P=this,D=P._,M=Array.prototype,W=Object.prototype,O=Function.prototype,H=M.push,U=M.slice,z=W.toString,V=W.hasOwnProperty,X=Array.isArray,Y=Object.keys,G=O.bind,K=Object.create,Q=function(){},J=function(ke){return ke instanceof J?ke:this instanceof J?void(this._wrapped=ke):new J(ke)};('undefined'!=typeof u&&u.exports&&(h=u.exports=J),h._=J),J.VERSION='1.8.3';var Z=function(ke,Ce,Se){if(void 0===Ce)return ke;switch(null==Se?3:Se){case 1:return function(Ie){return ke.call(Ce,Ie)};case 2:return function(Ie,Te){return ke.call(Ce,Ie,Te)};case 3:return function(Ie,Te,Ae){return ke.call(Ce,Ie,Te,Ae)};case 4:return function(Ie,Te,Ae,Fe){return ke.call(Ce,Ie,Te,Ae,Fe)};}return function(){return ke.apply(Ce,arguments)}},ee=function(ke,Ce,Se){return null==ke?J.identity:J.isFunction(ke)?Z(ke,Ce,Se):J.isObject(ke)?J.matcher(ke):J.property(ke)};J.iteratee=function(ke,Ce){return ee(ke,Ce,Infinity)};var te=function(ke,Ce){return function(Se){var Ie=arguments.length;if(2>Ie||null==Se)return Se;for(var Te=1;Te<Ie;Te++)for(var Ae=arguments[Te],Fe=ke(Ae),Le=Fe.length,Ne=0,Re;Ne<Le;Ne++)Re=Fe[Ne],Ce&&void 0!==Se[Re]||(Se[Re]=Ae[Re]);return Se}},ae=function(ke){if(!J.isObject(ke))return{};if(K)return K(ke);Q.prototype=ke;var Ce=new Q;return Q.prototype=null,Ce},ie=function(ke){return function(Ce){return null==Ce?void 0:Ce[ke]}},oe=Math.pow(2,53)-1,re=ie('length'),de=function(ke){var Ce=re(ke);return'number'==typeof Ce&&0<=Ce&&Ce<=oe};J.each=J.forEach=function(ke,Ce,Se){Ce=Z(Ce,Se);var Ie,Te;if(de(ke))for(Ie=0,Te=ke.length;Ie<Te;Ie++)Ce(ke[Ie],Ie,ke);else{var Ae=J.keys(ke);for(Ie=0,Te=Ae.length;Ie<Te;Ie++)Ce(ke[Ae[Ie]],Ae[Ie],ke)}return ke},J.map=J.collect=function(ke,Ce,Se){Ce=ee(Ce,Se);for(var Ie=!de(ke)&&J.keys(ke),Te=(Ie||ke).length,Ae=Array(Te),Fe=0,Le;Fe<Te;Fe++)Le=Ie?Ie[Fe]:Fe,Ae[Fe]=Ce(ke[Le],Le,ke);return Ae},J.reduce=J.foldl=J.inject=T(1),J.reduceRight=J.foldr=T(-1),J.find=J.detect=function(ke,Ce,Se){var Ie;if(Ie=de(ke)?J.findIndex(ke,Ce,Se):J.findKey(ke,Ce,Se),void 0!=Ie&&-1!==Ie)return ke[Ie]},J.filter=J.select=function(ke,Ce,Se){var Ie=[];return Ce=ee(Ce,Se),J.each(ke,function(Te,Ae,Fe){Ce(Te,Ae,Fe)&&Ie.push(Te)}),Ie},J.reject=function(ke,Ce,Se){return J.filter(ke,J.negate(ee(Ce)),Se)},J.every=J.all=function(ke,Ce,Se){Ce=ee(Ce,Se);for(var Ie=!de(ke)&&J.keys(ke),Te=(Ie||ke).length,Ae=0,Fe;Ae<Te;Ae++)if(Fe=Ie?Ie[Ae]:Ae,!Ce(ke[Fe],Fe,ke))return!1;return!0},J.some=J.any=function(ke,Ce,Se){Ce=ee(Ce,Se);for(var Ie=!de(ke)&&J.keys(ke),Te=(Ie||ke).length,Ae=0,Fe;Ae<Te;Ae++)if(Fe=Ie?Ie[Ae]:Ae,Ce(ke[Fe],Fe,ke))return!0;return!1},J.contains=J.includes=J.include=function(ke,Ce,Se,Ie){return de(ke)||(ke=J.values(ke)),('number'!=typeof Se||Ie)&&(Se=0),0<=J.indexOf(ke,Ce,Se)},J.invoke=function(ke,Ce){var Se=U.call(arguments,2),Ie=J.isFunction(Ce);return J.map(ke,function(Te){var Ae=Ie?Ce:Te[Ce];return null==Ae?Ae:Ae.apply(Te,Se)})},J.pluck=function(ke,Ce){return J.map(ke,J.property(Ce))},J.where=function(ke,Ce){return J.filter(ke,J.matcher(Ce))},J.findWhere=function(ke,Ce){return J.find(ke,J.matcher(Ce))},J.max=function(ke,Ce,Se){var Ie=-Infinity,Te=-Infinity,Ae,Fe;if(null==Ce&&null!=ke){ke=de(ke)?ke:J.values(ke);for(var Le=0,Ne=ke.length;Le<Ne;Le++)Ae=ke[Le],Ae>Ie&&(Ie=Ae)}else Ce=ee(Ce,Se),J.each(ke,function(Re,Pe,De){Fe=Ce(Re,Pe,De),(Fe>Te||Fe===-Infinity&&Ie==-Infinity)&&(Ie=Re,Te=Fe)});return Ie},J.min=function(ke,Ce,Se){var Ie=Infinity,Te=Infinity,Ae,Fe;if(null==Ce&&null!=ke){ke=de(ke)?ke:J.values(ke);for(var Le=0,Ne=ke.length;Le<Ne;Le++)Ae=ke[Le],Ae<Ie&&(Ie=Ae)}else Ce=ee(Ce,Se),J.each(ke,function(Re,Pe,De){Fe=Ce(Re,Pe,De),(Fe<Te||Fe===Infinity&&Ie==Infinity)&&(Ie=Re,Te=Fe)});return Ie},J.shuffle=function(ke){for(var Ce=de(ke)?ke:J.values(ke),Se=Ce.length,Ie=Array(Se),Te=0,Ae;Te<Se;Te++)Ae=J.random(0,Te),Ae!==Te&&(Ie[Te]=Ie[Ae]),Ie[Ae]=Ce[Te];return Ie},J.sample=function(ke,Ce,Se){return null==Ce||Se?(de(ke)||(ke=J.values(ke)),ke[J.random(ke.length-1)]):J.shuffle(ke).slice(0,Math.max(0,Ce))},J.sortBy=function(ke,Ce,Se){return Ce=ee(Ce,Se),J.pluck(J.map(ke,function(Ie,Te,Ae){return{value:Ie,index:Te,criteria:Ce(Ie,Te,Ae)}}).sort(function(Ie,Te){var Ae=Ie.criteria,Fe=Te.criteria;if(Ae!==Fe){if(Ae>Fe||void 0===Ae)return 1;if(Ae<Fe||void 0===Fe)return-1}return Ie.index-Te.index}),'value')};var se=function(ke){return function(Ce,Se,Ie){var Te={};return Se=ee(Se,Ie),J.each(Ce,function(Ae,Fe){var Le=Se(Ae,Fe,Ce);ke(Te,Ae,Le)}),Te}};J.groupBy=se(function(ke,Ce,Se){J.has(ke,Se)?ke[Se].push(Ce):ke[Se]=[Ce]}),J.indexBy=se(function(ke,Ce,Se){ke[Se]=Ce}),J.countBy=se(function(ke,Ce,Se){J.has(ke,Se)?ke[Se]++:ke[Se]=1}),J.toArray=function(ke){return ke?J.isArray(ke)?U.call(ke):de(ke)?J.map(ke,J.identity):J.values(ke):[]},J.size=function(ke){return null==ke?0:de(ke)?ke.length:J.keys(ke).length},J.partition=function(ke,Ce,Se){Ce=ee(Ce,Se);var Ie=[],Te=[];return J.each(ke,function(Ae,Fe,Le){(Ce(Ae,Fe,Le)?Ie:Te).push(Ae)}),[Ie,Te]},J.first=J.head=J.take=function(ke,Ce,Se){return null==ke?void 0:null==Ce||Se?ke[0]:J.initial(ke,ke.length-Ce)},J.initial=function(ke,Ce,Se){return U.call(ke,0,Math.max(0,ke.length-(null==Ce||Se?1:Ce)))},J.last=function(ke,Ce,Se){return null==ke?void 0:null==Ce||Se?ke[ke.length-1]:J.rest(ke,Math.max(0,ke.length-Ce))},J.rest=J.tail=J.drop=function(ke,Ce,Se){return U.call(ke,null==Ce||Se?1:Ce)},J.compact=function(ke){return J.filter(ke,J.identity)};var le=function(ke,Ce,Se,Ie){for(var Te=[],Ae=0,Fe=Ie||0,Le=re(ke),Ne;Fe<Le;Fe++)if(Ne=ke[Fe],de(Ne)&&(J.isArray(Ne)||J.isArguments(Ne))){Ce||(Ne=le(Ne,Ce,Se));var Re=0,Pe=Ne.length;for(Te.length+=Pe;Re<Pe;)Te[Ae++]=Ne[Re++]}else Se||(Te[Ae++]=Ne);return Te};J.flatten=function(ke,Ce){return le(ke,Ce,!1)},J.without=function(ke){return J.difference(ke,U.call(arguments,1))},J.uniq=J.unique=function(ke,Ce,Se,Ie){J.isBoolean(Ce)||(Ie=Se,Se=Ce,Ce=!1),null!=Se&&(Se=ee(Se,Ie));for(var Te=[],Ae=[],Fe=0,Le=re(ke);Fe<Le;Fe++){var Ne=ke[Fe],Re=Se?Se(Ne,Fe,ke):Ne;Ce?((!Fe||Ae!==Re)&&Te.push(Ne),Ae=Re):Se?!J.contains(Ae,Re)&&(Ae.push(Re),Te.push(Ne)):!J.contains(Te,Ne)&&Te.push(Ne)}return Te},J.union=function(){return J.uniq(le(arguments,!0,!0))},J.intersection=function(ke){for(var Ce=[],Se=arguments.length,Ie=0,Te=re(ke),Ae;Ie<Te;Ie++)if(Ae=ke[Ie],!J.contains(Ce,Ae)){for(var Fe=1;Fe<Se&&!!J.contains(arguments[Fe],Ae);Fe++);Fe===Se&&Ce.push(Ae)}return Ce},J.difference=function(ke){var Ce=le(arguments,!0,!0,1);return J.filter(ke,function(Se){return!J.contains(Ce,Se)})},J.zip=function(){return J.unzip(arguments)},J.unzip=function(ke){for(var Ce=ke&&J.max(ke,re).length||0,Se=Array(Ce),Ie=0;Ie<Ce;Ie++)Se[Ie]=J.pluck(ke,Ie);return Se},J.object=function(ke,Ce){for(var Se={},Ie=0,Te=re(ke);Ie<Te;Ie++)Ce?Se[ke[Ie]]=Ce[Ie]:Se[ke[Ie][0]]=ke[Ie][1];return Se},J.findIndex=L(1),J.findLastIndex=L(-1),J.sortedIndex=function(ke,Ce,Se,Ie){Se=ee(Se,Ie,1);for(var Te=Se(Ce),Ae=0,Fe=re(ke),Le;Ae<Fe;)Le=Math.floor((Ae+Fe)/2),Se(ke[Le])<Te?Ae=Le+1:Fe=Le;return Ae},J.indexOf=N(1,J.findIndex,J.sortedIndex),J.lastIndexOf=N(-1,J.findLastIndex),J.range=function(ke,Ce,Se){null==Ce&&(Ce=ke||0,ke=0),Se=Se||1;for(var Ie=Math.max(Math.ceil((Ce-ke)/Se),0),Te=Array(Ie),Ae=0;Ae<Ie;Ae++,ke+=Se)Te[Ae]=ke;return Te};var ce=function(ke,Ce,Se,Ie,Te){if(!(Ie instanceof Ce))return ke.apply(Se,Te);var Ae=ae(ke.prototype),Fe=ke.apply(Ae,Te);return J.isObject(Fe)?Fe:Ae};J.bind=function(ke,Ce){if(G&&ke.bind===G)return G.apply(ke,U.call(arguments,1));if(!J.isFunction(ke))throw new TypeError('Bind must be called on a function');var Se=U.call(arguments,2),Ie=function(){return ce(ke,Ie,Ce,this,Se.concat(U.call(arguments)))};return Ie},J.partial=function(ke){var Ce=U.call(arguments,1),Se=function(){for(var Ie=0,Te=Ce.length,Ae=Array(Te),Fe=0;Fe<Te;Fe++)Ae[Fe]=Ce[Fe]===J?arguments[Ie++]:Ce[Fe];for(;Ie<arguments.length;)Ae.push(arguments[Ie++]);return ce(ke,Se,this,this,Ae)};return Se},J.bindAll=function(ke){var Se=arguments.length,Ce,Ie;if(1>=Se)throw new Error('bindAll must be passed function names');for(Ce=1;Ce<Se;Ce++)Ie=arguments[Ce],ke[Ie]=J.bind(ke[Ie],ke);return ke},J.memoize=function(ke,Ce){var Se=function(Ie){var Te=Se.cache,Ae=''+(Ce?Ce.apply(this,arguments):Ie);return J.has(Te,Ae)||(Te[Ae]=ke.apply(this,arguments)),Te[Ae]};return Se.cache={},Se},J.delay=function(ke,Ce){var Se=U.call(arguments,2);return setTimeout(function(){return ke.apply(null,Se)},Ce)},J.defer=J.partial(J.delay,J,1),J.throttle=function(ke,Ce,Se){var Ie,Te,Ae,Fe=null,Le=0;Se||(Se={});var Ne=function(){Le=!1===Se.leading?0:J.now(),Fe=null,Ae=ke.apply(Ie,Te),Fe||(Ie=Te=null)};return function(){var Re=J.now();Le||!1!==Se.leading||(Le=Re);var Pe=Ce-(Re-Le);return Ie=this,Te=arguments,0>=Pe||Pe>Ce?(Fe&&(clearTimeout(Fe),Fe=null),Le=Re,Ae=ke.apply(Ie,Te),!Fe&&(Ie=Te=null)):!Fe&&!1!==Se.trailing&&(Fe=setTimeout(Ne,Pe)),Ae}},J.debounce=function(ke,Ce,Se){var Ie,Te,Ae,Fe,Le,Ne=function(){var Re=J.now()-Fe;Re<Ce&&0<=Re?Ie=setTimeout(Ne,Ce-Re):(Ie=null,!Se&&(Le=ke.apply(Ae,Te),!Ie&&(Ae=Te=null)))};return function(){Ae=this,Te=arguments,Fe=J.now();var Re=Se&&!Ie;return Ie||(Ie=setTimeout(Ne,Ce)),Re&&(Le=ke.apply(Ae,Te),Ae=Te=null),Le}},J.wrap=function(ke,Ce){return J.partial(Ce,ke)},J.negate=function(ke){return function(){return!ke.apply(this,arguments)}},J.compose=function(){var ke=arguments,Ce=ke.length-1;return function(){for(var Se=Ce,Ie=ke[Ce].apply(this,arguments);Se--;)Ie=ke[Se].call(this,Ie);return Ie}},J.after=function(ke,Ce){return function(){if(1>--ke)return Ce.apply(this,arguments)}},J.before=function(ke,Ce){var Se;return function(){return 0<--ke&&(Se=Ce.apply(this,arguments)),1>=ke&&(Ce=null),Se}},J.once=J.partial(J.before,2);var pe=!{toString:null}.propertyIsEnumerable('toString'),ue=['valueOf','isPrototypeOf','toString','propertyIsEnumerable','hasOwnProperty','toLocaleString'];J.keys=function(ke){if(!J.isObject(ke))return[];if(Y)return Y(ke);var Ce=[];for(var Se in ke)J.has(ke,Se)&&Ce.push(Se);return pe&&R(ke,Ce),Ce},J.allKeys=function(ke){if(!J.isObject(ke))return[];var Ce=[];for(var Se in ke)Ce.push(Se);return pe&&R(ke,Ce),Ce},J.values=function(ke){for(var Ce=J.keys(ke),Se=Ce.length,Ie=Array(Se),Te=0;Te<Se;Te++)Ie[Te]=ke[Ce[Te]];return Ie},J.mapObject=function(ke,Ce,Se){Ce=ee(Ce,Se);for(var Ie=J.keys(ke),Te=Ie.length,Ae={},Le=0,Fe;Le<Te;Le++)Fe=Ie[Le],Ae[Fe]=Ce(ke[Fe],Fe,ke);return Ae},J.pairs=function(ke){for(var Ce=J.keys(ke),Se=Ce.length,Ie=Array(Se),Te=0;Te<Se;Te++)Ie[Te]=[Ce[Te],ke[Ce[Te]]];return Ie},J.invert=function(ke){for(var Ce={},Se=J.keys(ke),Ie=0,Te=Se.length;Ie<Te;Ie++)Ce[ke[Se[Ie]]]=Se[Ie];return Ce},J.functions=J.methods=function(ke){var Ce=[];for(var Se in ke)J.isFunction(ke[Se])&&Ce.push(Se);return Ce.sort()},J.extend=te(J.allKeys),J.extendOwn=J.assign=te(J.keys),J.findKey=function(ke,Ce,Se){Ce=ee(Ce,Se);for(var Ie=J.keys(ke),Ae=0,Fe=Ie.length,Te;Ae<Fe;Ae++)if(Te=Ie[Ae],Ce(ke[Te],Te,ke))return Te},J.pick=function(ke,Ce,Se){var Ie={},Te=ke,Ae,Fe;if(null==Te)return Ie;J.isFunction(Ce)?(Fe=J.allKeys(Te),Ae=Z(Ce,Se)):(Fe=le(arguments,!1,!1,1),Ae=function(De,Me,je){return Me in je},Te=Object(Te));for(var Le=0,Ne=Fe.length;Le<Ne;Le++){var Re=Fe[Le],Pe=Te[Re];Ae(Pe,Re,Te)&&(Ie[Re]=Pe)}return Ie},J.omit=function(ke,Ce,Se){if(J.isFunction(Ce))Ce=J.negate(Ce);else{var Ie=J.map(le(arguments,!1,!1,1),String);Ce=function(Te,Ae){return!J.contains(Ie,Ae)}}return J.pick(ke,Ce,Se)},J.defaults=te(J.allKeys,!0),J.create=function(ke,Ce){var Se=ae(ke);return Ce&&J.extendOwn(Se,Ce),Se},J.clone=function(ke){return J.isObject(ke)?J.isArray(ke)?ke.slice():J.extend({},ke):ke},J.tap=function(ke,Ce){return Ce(ke),ke},J.isMatch=function(ke,Ce){var Se=J.keys(Ce),Ie=Se.length;if(null==ke)return!Ie;for(var Te=Object(ke),Ae=0,Fe;Ae<Ie;Ae++)if(Fe=Se[Ae],Ce[Fe]!==Te[Fe]||!(Fe in Te))return!1;return!0};var he=function(ke,Ce,Se,Ie){if(ke===Ce)return 0!==ke||1/ke==1/Ce;if(null==ke||null==Ce)return ke===Ce;ke instanceof J&&(ke=ke._wrapped),Ce instanceof J&&(Ce=Ce._wrapped);var Te=z.call(ke);if(Te!==z.call(Ce))return!1;switch(Te){case'[object RegExp]':case'[object String]':return''+ke==''+Ce;case'[object Number]':return+ke==+ke?0==+ke?1/+ke==1/Ce:+ke==+Ce:+Ce!=+Ce;case'[object Date]':case'[object Boolean]':return+ke==+Ce;}var Ae='[object Array]'===Te;if(!Ae){if('object'!=typeof ke||'object'!=typeof Ce)return!1;var Fe=ke.constructor,Le=Ce.constructor;if(Fe!==Le&&!(J.isFunction(Fe)&&Fe instanceof Fe&&J.isFunction(Le)&&Le instanceof Le)&&'constructor'in ke&&'constructor'in Ce)return!1}Se=Se||[],Ie=Ie||[];for(var Ne=Se.length;Ne--;)if(Se[Ne]===ke)return Ie[Ne]===Ce;if(Se.push(ke),Ie.push(Ce),Ae){if(Ne=ke.length,Ne!==Ce.length)return!1;for(;Ne--;)if(!he(ke[Ne],Ce[Ne],Se,Ie))return!1}else{var Re=J.keys(ke),Pe;if(Ne=Re.length,J.keys(Ce).length!==Ne)return!1;for(;Ne--;)if(Pe=Re[Ne],!(J.has(Ce,Pe)&&he(ke[Pe],Ce[Pe],Se,Ie)))return!1}return Se.pop(),Ie.pop(),!0};J.isEqual=function(ke,Ce){return he(ke,Ce)},J.isEmpty=function(ke){return!(null!=ke)||(de(ke)&&(J.isArray(ke)||J.isString(ke)||J.isArguments(ke))?0===ke.length:0===J.keys(ke).length)},J.isElement=function(ke){return!!(ke&&1===ke.nodeType)},J.isArray=X||function(ke){return'[object Array]'===z.call(ke)},J.isObject=function(ke){var Ce=typeof ke;return'function'==Ce||'object'==Ce&&!!ke},J.each(['Arguments','Function','String','Number','Date','RegExp','Error'],function(ke){J['is'+ke]=function(Ce){return z.call(Ce)==='[object '+ke+']'}}),J.isArguments(arguments)||(J.isArguments=function(ke){return J.has(ke,'callee')}),'function'!=typeof /./&&'object'!=typeof Int8Array&&(J.isFunction=function(ke){return'function'==typeof ke||!1}),J.isFinite=function(ke){return isFinite(ke)&&!isNaN(parseFloat(ke))},J.isNaN=function(ke){return J.isNumber(ke)&&ke!==+ke},J.isBoolean=function(ke){return!0===ke||!1===ke||'[object Boolean]'===z.call(ke)},J.isNull=function(ke){return null===ke},J.isUndefined=function(ke){return void 0===ke},J.has=function(ke,Ce){return null!=ke&&V.call(ke,Ce)},J.noConflict=function(){return P._=D,this},J.identity=function(ke){return ke},J.constant=function(ke){return function(){return ke}},J.noop=function(){},J.property=ie,J.propertyOf=function(ke){return null==ke?function(){}:function(Ce){return ke[Ce]}},J.matcher=J.matches=function(ke){return ke=J.extendOwn({},ke),function(Ce){return J.isMatch(Ce,ke)}},J.times=function(ke,Ce,Se){var Ie=Array(Math.max(0,ke));Ce=Z(Ce,Se,1);for(var Te=0;Te<ke;Te++)Ie[Te]=Ce(Te);return Ie},J.random=function(ke,Ce){return null==Ce&&(Ce=ke,ke=0),ke+Math.floor(Math.random()*(Ce-ke+1))},J.now=Date.now||function(){return new Date().getTime()};var ge={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#x27;','`':'&#x60;'},me=J.invert(ge),fe=function(ke){var Ce=function(Ae){return ke[Ae]},Se='(?:'+J.keys(ke).join('|')+')',Ie=RegExp(Se),Te=RegExp(Se,'g');return function(Ae){return Ae=null==Ae?'':''+Ae,Ie.test(Ae)?Ae.replace(Te,Ce):Ae}};J.escape=fe(ge),J.unescape=fe(me),J.result=function(ke,Ce,Se){var Ie=null==ke?void 0:ke[Ce];return void 0===Ie&&(Ie=Se),J.isFunction(Ie)?Ie.call(ke):Ie};var ye=0;J.uniqueId=function(ke){var Ce=++ye+'';return ke?ke+Ce:Ce},J.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var ve=/(.)^/,xe={'\'':'\'','\\':'\\','\r':'r','\n':'n','\u2028':'u2028','\u2029':'u2029'},be=/\\|'|\r|\n|\u2028|\u2029/g,we=function(ke){return'\\'+xe[ke]};J.template=function(ke,Ce,Se){!Ce&&Se&&(Ce=Se),Ce=J.defaults({},Ce,J.templateSettings);var Ie=RegExp([(Ce.escape||ve).source,(Ce.interpolate||ve).source,(Ce.evaluate||ve).source].join('|')+'|$','g'),Te=0,Ae='__p+=\'';ke.replace(Ie,function(Re,Pe,De,Me,je){return Ae+=ke.slice(Te,je).replace(be,we),Te=je+Re.length,Pe?Ae+='\'+\n((__t=('+Pe+'))==null?\'\':_.escape(__t))+\n\'':De?Ae+='\'+\n((__t=('+De+'))==null?\'\':__t)+\n\'':Me&&(Ae+='\';\n'+Me+'\n__p+=\''),Re}),Ae+='\';\n',Ce.variable||(Ae='with(obj||{}){\n'+Ae+'}\n'),Ae='var __t,__p=\'\',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,\'\');};\n'+Ae+'return __p;\n';try{var Fe=new Function(Ce.variable||'obj','_',Ae)}catch(Re){throw Re.source=Ae,Re}var Le=function(Re){return Fe.call(this,Re,J)},Ne=Ce.variable||'obj';return Le.source='function('+Ne+'){\n'+Ae+'}',Le},J.chain=function(ke){var Ce=J(ke);return Ce._chain=!0,Ce};var Ee=function(ke,Ce){return ke._chain?J(Ce).chain():Ce};J.mixin=function(ke){J.each(J.functions(ke),function(Ce){var Se=J[Ce]=ke[Ce];J.prototype[Ce]=function(){var Ie=[this._wrapped];return H.apply(Ie,arguments),Ee(this,Se.apply(J,Ie))}})},J.mixin(J),J.each(['pop','push','reverse','shift','sort','splice','unshift'],function(ke){var Ce=M[ke];J.prototype[ke]=function(){var Se=this._wrapped;return Ce.apply(Se,arguments),('shift'===ke||'splice'===ke)&&0===Se.length&&delete Se[0],Ee(this,Se)}}),J.each(['concat','join','slice'],function(ke){var Ce=M[ke];J.prototype[ke]=function(){return Ee(this,Ce.apply(this._wrapped,arguments))}}),J.prototype.value=function(){return this._wrapped},J.prototype.valueOf=J.prototype.toJSON=J.prototype.value,J.prototype.toString=function(){return''+this._wrapped},C=[],I=function(){return J}.apply(h,C),!(I!==void 0&&(u.exports=I))}).call(this)},function(u,h){var C,I;(function(T,L){'object'==typeof u&&'object'==typeof u.exports?u.exports=T.document?L(T,!0):function(N){if(!N.document)throw new Error('jQuery requires a window with a document');return L(N)}:L(T)})('undefined'==typeof window?this:window,function(T,L){function N(An){var Fn=!!An&&'length'in An&&An.length,Ln=qe.type(An);return'function'===Ln||qe.isWindow(An)?!1:'array'===Ln||0===Fn||'number'==typeof Fn&&0<Fn&&Fn-1 in An}function R(An,Fn,Ln){if(qe.isFunction(Fn))return qe.grep(An,function(Nn,Rn){return!!Fn.call(Nn,Rn,Nn)!==Ln});if(Fn.nodeType)return qe.grep(An,function(Nn){return Nn===Fn!==Ln});if('string'==typeof Fn){if($e.test(Fn))return qe.filter(Fn,An,Ln);Fn=qe.filter(Fn,An)}return qe.grep(An,function(Nn){return-1<De.call(Fn,Nn)!==Ln})}function P(An,Fn){for(;(An=An[Fn])&&1!==An.nodeType;);return An}function D(An){var Fn={};return qe.each(An.match(nt)||[],function(Ln,Nn){Fn[Nn]=!0}),Fn}function M(){Le.removeEventListener('DOMContentLoaded',M),T.removeEventListener('load',M),qe.ready()}function W(){this.expando=qe.expando+W.uid++}function O(An,Fn,Ln){var Nn;if(void 0===Ln&&1===An.nodeType)if(Nn='data-'+Fn.replace(ut,'-$&').toLowerCase(),Ln=An.getAttribute(Nn),'string'==typeof Ln){try{Ln='true'===Ln||'false'!==Ln&&('null'===Ln?null:+Ln+''===Ln?+Ln:lt.test(Ln)?qe.parseJSON(Ln):Ln)}catch(Rn){}dt.set(An,Fn,Ln)}else Ln=void 0;return Ln}function H(An,Fn,Ln,Nn){var Pn=1,Dn=20,Mn=Nn?function(){return Nn.cur()}:function(){return qe.css(An,Fn,'')},jn=Mn(),Wn=Ln&&Ln[3]||(qe.cssNumber[Fn]?'':'px'),On=(qe.cssNumber[Fn]||'px'!==Wn&&+jn)&&gt.exec(qe.css(An,Fn)),Rn;if(On&&On[3]!==Wn){Wn=Wn||On[3],Ln=Ln||[],On=+jn||1;do Pn=Pn||'.5',On/=Pn,qe.style(An,Fn,On+Wn);while(Pn!=(Pn=Mn()/jn)&&1!=Pn&&--Dn)}return Ln&&(On=+On||+jn||0,Rn=Ln[1]?On+(Ln[1]+1)*Ln[2]:+Ln[2],Nn&&(Nn.unit=Wn,Nn.start=On,Nn.end=Rn)),Rn}function U(An,Fn){var Ln='undefined'==typeof An.getElementsByTagName?'undefined'==typeof An.querySelectorAll?[]:An.querySelectorAll(Fn||'*'):An.getElementsByTagName(Fn||'*');return void 0===Fn||Fn&&qe.nodeName(An,Fn)?qe.merge([An],Ln):Ln}function z(An,Fn){for(var Ln=0,Nn=An.length;Ln<Nn;Ln++)rt.set(An[Ln],'globalEval',!Fn||rt.get(Fn[Ln],'globalEval'))}function V(An,Fn,Ln,Nn,Rn){for(var Bn=Fn.createDocumentFragment(),qn=[],_n=0,Hn=An.length,Pn,Dn,Mn,jn,Wn,On;_n<Hn;_n++)if(Pn=An[_n],Pn||0===Pn)if('object'===qe.type(Pn))qe.merge(qn,Pn.nodeType?[Pn]:Pn);else if(!wt.test(Pn))qn.push(Fn.createTextNode(Pn));else{for(Dn=Dn||Bn.appendChild(Fn.createElement('div')),Mn=(vt.exec(Pn)||['',''])[1].toLowerCase(),jn=bt[Mn]||bt._default,Dn.innerHTML=jn[1]+qe.htmlPrefilter(Pn)+jn[2],On=jn[0];On--;)Dn=Dn.lastChild;qe.merge(qn,Dn.childNodes),Dn=Bn.firstChild,Dn.textContent=''}for(Bn.textContent='',_n=0;Pn=qn[_n++];){if(Nn&&-1<qe.inArray(Pn,Nn)){Rn&&Rn.push(Pn);continue}if(Wn=qe.contains(Pn.ownerDocument,Pn),Dn=U(Bn.appendChild(Pn),'script'),Wn&&z(Dn),Ln)for(On=0;Pn=Dn[On++];)xt.test(Pn.type||'')&&Ln.push(Pn)}return Bn}function X(){return!0}function Y(){return!1}function G(){try{return Le.activeElement}catch(An){}}function K(An,Fn,Ln,Nn,Rn,Pn){var Dn,Mn;if('object'==typeof Fn){for(Mn in'string'!=typeof Ln&&(Nn=Nn||Ln,Ln=void 0),Fn)K(An,Mn,Ln,Nn,Fn[Mn],Pn);return An}if(null==Nn&&null==Rn?(Rn=Ln,Nn=Ln=void 0):null==Rn&&('string'==typeof Ln?(Rn=Nn,Nn=void 0):(Rn=Nn,Nn=Ln,Ln=void 0)),!1===Rn)Rn=Y;else if(!Rn)return An;return 1===Pn&&(Dn=Rn,Rn=function(jn){return qe().off(jn),Dn.apply(this,arguments)},Rn.guid=Dn.guid||(Dn.guid=qe.guid++)),An.each(function(){qe.event.add(this,Fn,Rn,Nn,Ln)})}function Q(An,Fn){return qe.nodeName(An,'table')&&qe.nodeName(11===Fn.nodeType?Fn.firstChild:Fn,'tr')?An.getElementsByTagName('tbody')[0]||An.appendChild(An.ownerDocument.createElement('tbody')):An}function J(An){return An.type=(null!==An.getAttribute('type'))+'/'+An.type,An}function Z(An){var Fn=At.exec(An.type);return Fn?An.type=Fn[1]:An.removeAttribute('type'),An}function ee(An,Fn){var Ln,Nn,Rn,Pn,Dn,Mn,jn,Wn;if(1===Fn.nodeType){if(rt.hasData(An)&&(Pn=rt.access(An),Dn=rt.set(Fn,Pn),Wn=Pn.events,Wn))for(Rn in delete Dn.handle,Dn.events={},Wn)for(Ln=0,Nn=Wn[Rn].length;Ln<Nn;Ln++)qe.event.add(Fn,Rn,Wn[Rn][Ln]);dt.hasData(An)&&(Mn=dt.access(An),jn=qe.extend({},Mn),dt.set(Fn,jn))}}function te(An,Fn){var Ln=Fn.nodeName.toLowerCase();'input'===Ln&&yt.test(An.type)?Fn.checked=An.checked:('input'===Ln||'textarea'===Ln)&&(Fn.defaultValue=An.defaultValue)}function ae(An,Fn,Ln,Nn){Fn=Re.apply([],Fn);var On=0,Bn=An.length,_n=Fn[0],Hn=qe.isFunction(_n),Rn,Pn,Dn,Mn,jn,Wn;if(Hn||1<Bn&&'string'==typeof _n&&!Oe.checkClone&&Tt.test(_n))return An.each(function(Un){var zn=An.eq(Un);Hn&&(Fn[0]=_n.call(this,Un,zn.html())),ae(zn,Fn,Ln,Nn)});if(Bn&&(Rn=V(Fn,An[0].ownerDocument,!1,An,Nn),Pn=Rn.firstChild,1===Rn.childNodes.length&&(Rn=Pn),Pn||Nn)){for(Dn=qe.map(U(Rn,'script'),J),Mn=Dn.length;On<Bn;On++)jn=Rn,On!=Bn-1&&(jn=qe.clone(jn,!0,!0),Mn&&qe.merge(Dn,U(jn,'script'))),Ln.call(An[On],jn,On);if(Mn)for(Wn=Dn[Dn.length-1].ownerDocument,qe.map(Dn,Z),On=0;On<Mn;On++)jn=Dn[On],xt.test(jn.type||'')&&!rt.access(jn,'globalEval')&&qe.contains(Wn,jn)&&(jn.src?qe._evalUrl&&qe._evalUrl(jn.src):qe.globalEval(jn.textContent.replace(Ft,'')))}return An}function ie(An,Fn,Ln){for(var Rn=Fn?qe.filter(Fn,An):An,Pn=0,Nn;null!=(Nn=Rn[Pn]);Pn++)Ln||1!==Nn.nodeType||qe.cleanData(U(Nn)),Nn.parentNode&&(Ln&&qe.contains(Nn.ownerDocument,Nn)&&z(U(Nn,'script')),Nn.parentNode.removeChild(Nn));return An}function oe(An,Fn){var Ln=qe(Fn.createElement(An)).appendTo(Fn.body),Nn=qe.css(Ln[0],'display');return Ln.detach(),Nn}function re(An){var Fn=Le,Ln=Nt[An];return Ln||(Ln=oe(An,Fn),('none'===Ln||!Ln)&&(Lt=(Lt||qe('<iframe frameborder=\'0\' width=\'0\' height=\'0\'/>')).appendTo(Fn.documentElement),Fn=Lt[0].contentDocument,Fn.write(),Fn.close(),Ln=oe(An,Fn),Lt.detach()),Nt[An]=Ln),Ln}function de(An,Fn,Ln){var Mn=An.style,Nn,Rn,Pn,Dn;return Ln=Ln||Dt(An),Dn=Ln?Ln.getPropertyValue(Fn)||Ln[Fn]:void 0,''!==Dn&&void 0!=Dn||qe.contains(An.ownerDocument,An)||(Dn=qe.style(An,Fn)),Ln&&!Oe.pixelMarginRight()&&Pt.test(Dn)&&Rt.test(Fn)&&(Nn=Mn.width,Rn=Mn.minWidth,Pn=Mn.maxWidth,Mn.minWidth=Mn.maxWidth=Mn.width=Dn,Dn=Ln.width,Mn.width=Nn,Mn.minWidth=Rn,Mn.maxWidth=Pn),void 0==Dn?Dn:Dn+''}function se(An,Fn){return{get:function(){return An()?void delete this.get:(this.get=Fn).apply(this,arguments)}}}function le(An){if(An in _t)return An;for(var Fn=An[0].toUpperCase()+An.slice(1),Ln=qt.length;Ln--;)if(An=qt[Ln]+Fn,An in _t)return An}function ce(An,Fn,Ln){var Nn=gt.exec(Fn);return Nn?Math.max(0,Nn[2]-(Ln||0))+(Nn[3]||'px'):Fn}function pe(An,Fn,Ln,Nn,Rn){for(var Pn=Ln===(Nn?'border':'content')?4:'width'===Fn?1:0,Dn=0;4>Pn;Pn+=2)'margin'===Ln&&(Dn+=qe.css(An,Ln+mt[Pn],!0,Rn)),Nn?('content'===Ln&&(Dn-=qe.css(An,'padding'+mt[Pn],!0,Rn)),'margin'!==Ln&&(Dn-=qe.css(An,'border'+mt[Pn]+'Width',!0,Rn))):(Dn+=qe.css(An,'padding'+mt[Pn],!0,Rn),'padding'!==Ln&&(Dn+=qe.css(An,'border'+mt[Pn]+'Width',!0,Rn)));return Dn}function ue(An,Fn,Ln){var Nn=!0,Rn='width'===Fn?An.offsetWidth:An.offsetHeight,Pn=Dt(An),Dn='border-box'===qe.css(An,'boxSizing',!1,Pn);if(0>=Rn||null==Rn){if(Rn=de(An,Fn,Pn),(0>Rn||null==Rn)&&(Rn=An.style[Fn]),Pt.test(Rn))return Rn;Nn=Dn&&(Oe.boxSizingReliable()||Rn===An.style[Fn]),Rn=parseFloat(Rn)||0}return Rn+pe(An,Fn,Ln||(Dn?'border':'content'),Nn,Pn)+'px'}function he(An,Fn){for(var Pn=[],Dn=0,Mn=An.length,Ln,Nn,Rn;Dn<Mn;Dn++)(Nn=An[Dn],!!Nn.style)&&(Pn[Dn]=rt.get(Nn,'olddisplay'),Ln=Nn.style.display,Fn?(!Pn[Dn]&&'none'===Ln&&(Nn.style.display=''),''===Nn.style.display&&ft(Nn)&&(Pn[Dn]=rt.access(Nn,'olddisplay',re(Nn.nodeName)))):(Rn=ft(Nn),('none'!==Ln||!Rn)&&rt.set(Nn,'olddisplay',Rn?Ln:qe.css(Nn,'display'))));for(Dn=0;Dn<Mn;Dn++)(Nn=An[Dn],!!Nn.style)&&(Fn&&'none'!==Nn.style.display&&''!==Nn.style.display||(Nn.style.display=Fn?Pn[Dn]||'':'none'));return An}function ge(An,Fn,Ln,Nn,Rn){return new ge.prototype.init(An,Fn,Ln,Nn,Rn)}function me(){return T.setTimeout(function(){Ht=void 0}),Ht=qe.now()}function fe(An,Fn){var Nn=0,Rn={height:An},Ln;for(Fn=Fn?1:0;4>Nn;Nn+=2-Fn)Ln=mt[Nn],Rn['margin'+Ln]=Rn['padding'+Ln]=An;return Fn&&(Rn.opacity=Rn.width=An),Rn}function ye(An,Fn,Ln){for(var Rn=(be.tweeners[Fn]||[]).concat(be.tweeners['*']),Pn=0,Dn=Rn.length,Nn;Pn<Dn;Pn++)if(Nn=Rn[Pn].call(Ln,Fn,An))return Nn}function xe(An,Fn){var Ln,Nn,Rn,Pn,Dn;for(Ln in An)if(Nn=qe.camelCase(Ln),Rn=Fn[Nn],Pn=An[Ln],qe.isArray(Pn)&&(Rn=Pn[1],Pn=An[Ln]=Pn[0]),Ln!=Nn&&(An[Nn]=Pn,delete An[Ln]),Dn=qe.cssHooks[Nn],Dn&&'expand'in Dn)for(Ln in Pn=Dn.expand(Pn),delete An[Nn],Pn)Ln in An||(An[Ln]=Pn[Ln],Fn[Ln]=Rn);else Fn[Nn]=Rn}function be(An,Fn,Ln){var Pn=0,Dn=be.prefilters.length,Mn=qe.Deferred().always(function(){delete jn.elem}),jn=function(){if(Rn)return!1;for(var Bn=Ht||me(),qn=Math.max(0,Wn.startTime+Wn.duration-Bn),_n=qn/Wn.duration||0,Hn=1-_n,Un=0,zn=Wn.tweens.length;Un<zn;Un++)Wn.tweens[Un].run(Hn);return Mn.notifyWith(An,[Wn,Hn,qn]),1>Hn&&zn?qn:(Mn.resolveWith(An,[Wn]),!1)},Wn=Mn.promise({elem:An,props:qe.extend({},Fn),opts:qe.extend(!0,{specialEasing:{},easing:qe.easing._default},Ln),originalProperties:Fn,originalOptions:Ln,startTime:Ht||me(),duration:Ln.duration,tweens:[],createTween:function(Bn,qn){var _n=qe.Tween(An,Wn.opts,Bn,qn,Wn.opts.specialEasing[Bn]||Wn.opts.easing);return Wn.tweens.push(_n),_n},stop:function(Bn){var qn=0,_n=Bn?Wn.tweens.length:0;if(Rn)return this;for(Rn=!0;qn<_n;qn++)Wn.tweens[qn].run(1);return Bn?(Mn.notifyWith(An,[Wn,1,0]),Mn.resolveWith(An,[Wn,Bn])):Mn.rejectWith(An,[Wn,Bn]),this}}),On=Wn.props,Nn,Rn;for(xe(On,Wn.opts.specialEasing);Pn<Dn;Pn++)if(Nn=be.prefilters[Pn].call(Wn,An,On,Wn.opts),Nn)return qe.isFunction(Nn.stop)&&(qe._queueHooks(Wn.elem,Wn.opts.queue).stop=qe.proxy(Nn.stop,Nn)),Nn;return qe.map(On,ye,Wn),qe.isFunction(Wn.opts.start)&&Wn.opts.start.call(An,Wn),qe.fx.timer(qe.extend(jn,{elem:An,anim:Wn,queue:Wn.opts.queue})),Wn.progress(Wn.opts.progress).done(Wn.opts.done,Wn.opts.complete).fail(Wn.opts.fail).always(Wn.opts.always)}function we(An){return An.getAttribute&&An.getAttribute('class')||''}function Ee(An){return function(Fn,Ln){'string'!=typeof Fn&&(Ln=Fn,Fn='*');var Rn=0,Pn=Fn.toLowerCase().match(nt)||[],Nn;if(qe.isFunction(Ln))for(;Nn=Pn[Rn++];)'+'===Nn[0]?(Nn=Nn.slice(1)||'*',(An[Nn]=An[Nn]||[]).unshift(Ln)):(An[Nn]=An[Nn]||[]).push(Ln)}}function ke(An,Fn,Ln,Nn){function Rn(Mn){var jn;return Pn[Mn]=!0,qe.each(An[Mn]||[],function(Wn,On){var Bn=On(Fn,Ln,Nn);return'string'!=typeof Bn||Dn||Pn[Bn]?Dn?!(jn=Bn):void 0:(Fn.dataTypes.unshift(Bn),Rn(Bn),!1)}),jn}var Pn={},Dn=An===un;return Rn(Fn.dataTypes[0])||!Pn['*']&&Rn('*')}function Ce(An,Fn){var Rn=qe.ajaxSettings.flatOptions||{},Ln,Nn;for(Ln in Fn)void 0!==Fn[Ln]&&((Rn[Ln]?An:Nn||(Nn={}))[Ln]=Fn[Ln]);return Nn&&qe.extend(!0,An,Nn),An}function Se(An,Fn,Ln){for(var Mn=An.contents,jn=An.dataTypes,Nn,Rn,Pn,Dn;'*'===jn[0];)jn.shift(),void 0==Nn&&(Nn=An.mimeType||Fn.getResponseHeader('Content-Type'));if(Nn)for(Rn in Mn)if(Mn[Rn]&&Mn[Rn].test(Nn)){jn.unshift(Rn);break}if(jn[0]in Ln)Pn=jn[0];else{for(Rn in Ln){if(!jn[0]||An.converters[Rn+' '+jn[0]]){Pn=Rn;break}Dn||(Dn=Rn)}Pn=Pn||Dn}return Pn?(Pn!==jn[0]&&jn.unshift(Pn),Ln[Pn]):void 0}function Ie(An,Fn,Ln,Nn){var Wn={},On=An.dataTypes.slice(),Rn,Pn,Dn,Mn,jn;if(On[1])for(Dn in An.converters)Wn[Dn.toLowerCase()]=An.converters[Dn];for(Pn=On.shift();Pn;)if(An.responseFields[Pn]&&(Ln[An.responseFields[Pn]]=Fn),!jn&&Nn&&An.dataFilter&&(Fn=An.dataFilter(Fn,An.dataType)),jn=Pn,Pn=On.shift(),Pn)if('*'===Pn)Pn=jn;else if('*'!==jn&&jn!=Pn){if(Dn=Wn[jn+' '+Pn]||Wn['* '+Pn],!Dn)for(Rn in Wn)if(Mn=Rn.split(' '),Mn[1]===Pn&&(Dn=Wn[jn+' '+Mn[0]]||Wn['* '+Mn[0]],Dn)){!0===Dn?Dn=Wn[Rn]:!0!==Wn[Rn]&&(Pn=Mn[0],On.unshift(Mn[1]));break}if(!0!==Dn)if(Dn&&An.throws)Fn=Dn(Fn);else try{Fn=Dn(Fn)}catch(Bn){return{state:'parsererror',error:Dn?Bn:'No conversion from '+jn+' to '+Pn}}}return{state:'success',data:Fn}}function Te(An,Fn,Ln,Nn){if(qe.isArray(Fn))qe.each(Fn,function(Pn,Dn){Ln||yn.test(An)?Nn(An,Dn):Te(An+'['+('object'==typeof Dn&&null!=Dn?Pn:'')+']',Dn,Ln,Nn)});else if(!Ln&&'object'===qe.type(Fn))for(var Rn in Fn)Te(An+'['+Rn+']',Fn[Rn],Ln,Nn);else Nn(An,Fn)}function Ae(An){return qe.isWindow(An)?An:9===An.nodeType&&An.defaultView}var Fe=[],Le=T.document,Ne=Fe.slice,Re=Fe.concat,Pe=Fe.push,De=Fe.indexOf,Me={},je=Me.toString,We=Me.hasOwnProperty,Oe={},Be='2.2.4',qe=function(An,Fn){return new qe.fn.init(An,Fn)},_e=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,He=/^-ms-/,Ue=/-([\da-z])/gi,ze=function(An,Fn){return Fn.toUpperCase()};qe.fn=qe.prototype={jquery:Be,constructor:qe,selector:'',length:0,toArray:function(){return Ne.call(this)},get:function(An){return null==An?Ne.call(this):0>An?this[An+this.length]:this[An]},pushStack:function(An){var Fn=qe.merge(this.constructor(),An);return Fn.prevObject=this,Fn.context=this.context,Fn},each:function(An){return qe.each(this,An)},map:function(An){return this.pushStack(qe.map(this,function(Fn,Ln){return An.call(Fn,Ln,Fn)}))},slice:function(){return this.pushStack(Ne.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(An){var Fn=this.length,Ln=+An+(0>An?Fn:0);return this.pushStack(0<=Ln&&Ln<Fn?[this[Ln]]:[])},end:function(){return this.prevObject||this.constructor()},push:Pe,sort:Fe.sort,splice:Fe.splice},qe.extend=qe.fn.extend=function(){var Dn=arguments[0]||{},Mn=1,jn=arguments.length,Wn=!1,An,Fn,Ln,Nn,Rn,Pn;for('boolean'==typeof Dn&&(Wn=Dn,Dn=arguments[Mn]||{},Mn++),'object'==typeof Dn||qe.isFunction(Dn)||(Dn={}),Mn===jn&&(Dn=this,Mn--);Mn<jn;Mn++)if(null!=(An=arguments[Mn]))for(Fn in An)(Ln=Dn[Fn],Nn=An[Fn],Dn!==Nn)&&(Wn&&Nn&&(qe.isPlainObject(Nn)||(Rn=qe.isArray(Nn)))?(Rn?(Rn=!1,Pn=Ln&&qe.isArray(Ln)?Ln:[]):Pn=Ln&&qe.isPlainObject(Ln)?Ln:{},Dn[Fn]=qe.extend(Wn,Pn,Nn)):void 0!=Nn&&(Dn[Fn]=Nn));return Dn},qe.extend({expando:'jQuery'+(Be+Math.random()).replace(/\D/g,''),isReady:!0,error:function(An){throw new Error(An)},noop:function(){},isFunction:function(An){return'function'===qe.type(An)},isArray:Array.isArray,isWindow:function(An){return null!=An&&An===An.window},isNumeric:function(An){var Fn=An&&An.toString();return!qe.isArray(An)&&0<=Fn-parseFloat(Fn)+1},isPlainObject:function(An){if('object'!==qe.type(An)||An.nodeType||qe.isWindow(An))return!1;if(An.constructor&&!We.call(An,'constructor')&&!We.call(An.constructor.prototype||{},'isPrototypeOf'))return!1;for(var Fn in An);return void 0==Fn||We.call(An,Fn)},isEmptyObject:function(An){for(var Fn in An)return!1;return!0},type:function(An){return null==An?An+'':'object'==typeof An||'function'==typeof An?Me[je.call(An)]||'object':typeof An},globalEval:function(An){var Ln=eval,Fn;An=qe.trim(An),An&&(1===An.indexOf('use strict')?(Fn=Le.createElement('script'),Fn.text=An,Le.head.appendChild(Fn).parentNode.removeChild(Fn)):Ln(An))},camelCase:function(An){return An.replace(He,'ms-').replace(Ue,ze)},nodeName:function(An,Fn){return An.nodeName&&An.nodeName.toLowerCase()===Fn.toLowerCase()},each:function(An,Fn){var Nn=0,Ln;if(N(An))for(Ln=An.length;Nn<Ln&&!1!==Fn.call(An[Nn],Nn,An[Nn]);Nn++);else for(Nn in An)if(!1===Fn.call(An[Nn],Nn,An[Nn]))break;return An},trim:function(An){return null==An?'':(An+'').replace(_e,'')},makeArray:function(An,Fn){var Ln=Fn||[];return null!=An&&(N(Object(An))?qe.merge(Ln,'string'==typeof An?[An]:An):Pe.call(Ln,An)),Ln},inArray:function(An,Fn,Ln){return null==Fn?-1:De.call(Fn,An,Ln)},merge:function(An,Fn){for(var Ln=+Fn.length,Nn=0,Rn=An.length;Nn<Ln;Nn++)An[Rn++]=Fn[Nn];return An.length=Rn,An},grep:function(An,Fn,Ln){for(var Rn=[],Pn=0,Dn=An.length,Nn;Pn<Dn;Pn++)Nn=!Fn(An[Pn],Pn),Nn!==!Ln&&Rn.push(An[Pn]);return Rn},map:function(An,Fn,Ln){var Pn=0,Dn=[],Nn,Rn;if(N(An))for(Nn=An.length;Pn<Nn;Pn++)Rn=Fn(An[Pn],Pn,Ln),null!=Rn&&Dn.push(Rn);else for(Pn in An)Rn=Fn(An[Pn],Pn,Ln),null!=Rn&&Dn.push(Rn);return Re.apply([],Dn)},guid:1,proxy:function(An,Fn){var Ln,Nn,Rn;if('string'==typeof Fn&&(Ln=An[Fn],Fn=An,An=Ln),!!qe.isFunction(An))return Nn=Ne.call(arguments,2),Rn=function(){return An.apply(Fn||this,Nn.concat(Ne.call(arguments)))},Rn.guid=An.guid=An.guid||qe.guid++,Rn},now:Date.now,support:Oe}),'function'==typeof Symbol&&(qe.fn[Symbol.iterator]=Fe[Symbol.iterator]),qe.each('Boolean Number String Function Array Date RegExp Object Error Symbol'.split(' '),function(An,Fn){Me['[object '+Fn+']']=Fn.toLowerCase()});var Ve=function(An){function Fn(Za,ti,ni,ai){var hi=ti&&ti.ownerDocument,gi=ti?ti.nodeType:9,ii,oi,ri,di,si,ci,pi,ui;if(ni=ni||[],'string'!=typeof Za||!Za||1!==gi&&9!==gi&&11!==gi)return ni;if(!ai&&((ti?ti.ownerDocument||ti:ma)!==da&&ra(ti),ti=ti||da,la)){if(11!==gi&&(ci=Ya.exec(Za)))if(!(ii=ci[1])){if(ci[2])return Aa.apply(ni,ti.getElementsByTagName(Za)),ni;if((ii=ci[3])&&Kn.getElementsByClassName&&ti.getElementsByClassName)return Aa.apply(ni,ti.getElementsByClassName(ii)),ni}else if(9===gi){if(!(ri=ti.getElementById(ii)))return ni;if(ri.id===ii)return ni.push(ri),ni}else if(hi&&(ri=hi.getElementById(ii))&&ha(ti,ri)&&ri.id===ii)return ni.push(ri),ni;if(Kn.qsa&&!wa[Za+' ']&&(!ca||!ca.test(Za))){if(1!==gi)hi=ti,ui=Za;else if('object'!==ti.nodeName.toLowerCase()){for((di=ti.getAttribute('id'))?di=di.replace(Ka,'\\$&'):ti.setAttribute('id',di=ga),pi=Zn(Za),oi=pi.length,si=Ha.test(di)?'#'+di:'[id=\''+di+'\']';oi--;)pi[oi]=si+' '+qn(pi[oi]);ui=pi.join(','),hi=Ga.test(Za)&&On(ti.parentNode)||ti}if(ui)try{return Aa.apply(ni,hi.querySelectorAll(ui)),ni}catch(mi){}finally{di===ga&&ti.removeAttribute('id')}}}return na(Za.replace(Wa,'$1'),ti,ni,ai)}function Ln(){function Za(ni,ai){return ti.push(ni+' ')>$n.cacheLength&&delete Za[ti.shift()],Za[ni+' ']=ai}var ti=[];return Za}function Nn(Za){return Za[ga]=!0,Za}function Rn(Za){var ti=da.createElement('div');try{return!!Za(ti)}catch(ni){return!1}finally{ti.parentNode&&ti.parentNode.removeChild(ti),ti=null}}function Pn(Za,ti){for(var ni=Za.split('|'),ai=ni.length;ai--;)$n.attrHandle[ni[ai]]=ti}function Dn(Za,ti){var ni=ti&&Za,ai=ni&&1===Za.nodeType&&1===ti.nodeType&&(~ti.sourceIndex||ka)-(~Za.sourceIndex||ka);if(ai)return ai;if(ni)for(;ni=ni.nextSibling;)if(ni===ti)return-1;return Za?1:-1}function Mn(Za){return function(ti){var ni=ti.nodeName.toLowerCase();return'input'===ni&&ti.type===Za}}function jn(Za){return function(ti){var ni=ti.nodeName.toLowerCase();return('input'===ni||'button'===ni)&&ti.type===Za}}function Wn(Za){return Nn(function(ti){return ti=+ti,Nn(function(ni,ai){for(var oi=Za([],ni.length,ti),ri=oi.length,ii;ri--;)ni[ii=oi[ri]]&&(ni[ii]=!(ai[ii]=ni[ii]))})})}function On(Za){return Za&&'undefined'!=typeof Za.getElementsByTagName&&Za}function Bn(){}function qn(Za){for(var ti=0,ni=Za.length,ai='';ti<ni;ti++)ai+=Za[ti].value;return ai}function _n(Za,ti,ni){var ai=ti.dir,ii=ni&&'parentNode'===ai,oi=va++;return ti.first?function(ri,di,si){for(;ri=ri[ai];)if(1===ri.nodeType||ii)return Za(ri,di,si)}:function(ri,di,si){var hi=[ya,oi],ci,pi,ui;if(si){for(;ri=ri[ai];)if((1===ri.nodeType||ii)&&Za(ri,di,si))return!0;}else for(;ri=ri[ai];)if(1===ri.nodeType||ii){if(ui=ri[ga]||(ri[ga]={}),pi=ui[ri.uniqueID]||(ui[ri.uniqueID]={}),(ci=pi[ai])&&ci[0]===ya&&ci[1]===oi)return hi[2]=ci[2];if(pi[ai]=hi,hi[2]=Za(ri,di,si))return!0}}}function Hn(Za){return 1<Za.length?function(ti,ni,ai){for(var ii=Za.length;ii--;)if(!Za[ii](ti,ni,ai))return!1;return!0}:Za[0]}function Un(Za,ti,ni){for(var ai=0,ii=ti.length;ai<ii;ai++)Fn(Za,ti[ai],ni);return ni}function zn(Za,ti,ni,ai,ii){for(var ri=[],di=0,si=Za.length,oi;di<si;di++)(oi=Za[di])&&(!ni||ni(oi,ai,ii))&&(ri.push(oi),null!=ti&&ti.push(di));return ri}function Vn(Za,ti,ni,ai,ii,oi){return ai&&!ai[ga]&&(ai=Vn(ai)),ii&&!ii[ga]&&(ii=Vn(ii,oi)),Nn(function(ri,di,si,ci){var gi=[],mi=[],yi=di.length,vi=ri||Un(ti||'*',si.nodeType?[si]:si,[]),xi=Za&&(ri||!ti)?zn(vi,gi,Za,si,ci):vi,bi=ni?ii||(ri?Za:yi||ai)?[]:di:xi,pi,ui,hi;if(ni&&ni(xi,bi,si,ci),ai)for(pi=zn(bi,mi),ai(pi,[],si,ci),ui=pi.length;ui--;)(hi=pi[ui])&&(bi[mi[ui]]=!(xi[mi[ui]]=hi));if(!ri)bi=zn(bi===di?bi.splice(yi,bi.length):bi),ii?ii(null,di,bi,ci):Aa.apply(di,bi);else if(ii||Za){if(ii){for(pi=[],ui=bi.length;ui--;)(hi=bi[ui])&&pi.push(xi[ui]=hi);ii(null,bi=[],pi,ci)}for(ui=bi.length;ui--;)(hi=bi[ui])&&-1<(pi=ii?La(ri,hi):gi[ui])&&(ri[pi]=!(di[pi]=hi))}})}function Xn(Za){for(var ii=Za.length,oi=$n.relative[Za[0].type],ri=oi||$n.relative[' '],di=oi?1:0,si=_n(function(ui){return ui===ti},ri,!0),ci=_n(function(ui){return-1<La(ti,ui)},ri,!0),pi=[function(ui,hi,gi){var mi=!oi&&(gi||hi!==aa)||((ti=hi).nodeType?si(ui,hi,gi):ci(ui,hi,gi));return ti=null,mi}],ti,ni,ai;di<ii;di++)if(ni=$n.relative[Za[di].type])pi=[_n(Hn(pi),ni)];else{if(ni=$n.filter[Za[di].type].apply(null,Za[di].matches),ni[ga]){for(ai=++di;ai<ii&&!$n.relative[Za[ai].type];ai++);return Vn(1<di&&Hn(pi),1<di&&qn(Za.slice(0,di-1).concat({value:' '===Za[di-2].type?'*':''})).replace(Wa,'$1'),ni,di<ai&&Xn(Za.slice(di,ai)),ai<ii&&Xn(Za=Za.slice(ai)),ai<ii&&qn(Za))}pi.push(ni)}return Hn(pi)}function Yn(Za,ti){var ni=0<ti.length,ai=0<Za.length,ii=function(oi,ri,di,si,ci){var gi=0,mi='0',yi=oi&&[],vi=[],xi=aa,bi=oi||ai&&$n.find.TAG('*',ci),wi=ya+=null==xi?1:Math.random()||0.1,Ei=bi.length,pi,ui,hi;for(ci&&(aa=ri===da||ri||ci);mi!==Ei&&null!=(pi=bi[mi]);mi++){if(ai&&pi){for(ui=0,ri||pi.ownerDocument===da||(ra(pi),di=!la);hi=Za[ui++];)if(hi(pi,ri||da,di)){si.push(pi);break}ci&&(ya=wi)}ni&&((pi=!hi&&pi)&&gi--,oi&&yi.push(pi))}if(gi+=mi,ni&&mi!==gi){for(ui=0;hi=ti[ui++];)hi(yi,vi,ri,di);if(oi){if(0<gi)for(;mi--;)yi[mi]||vi[mi]||(vi[mi]=Ia.call(si));vi=zn(vi)}Aa.apply(si,vi),ci&&!oi&&0<vi.length&&1<gi+ti.length&&Fn.uniqueSort(si)}return ci&&(ya=wi,aa=xi),yi};return ni?Nn(ii):ii}var ga='sizzle'+1*new Date,ma=An.document,ya=0,va=0,xa=Ln(),ba=Ln(),wa=Ln(),Ea=function(Za,ti){return Za===ti&&(oa=!0),0},ka=-2147483648,Ca={}.hasOwnProperty,Sa=[],Ia=Sa.pop,Ta=Sa.push,Aa=Sa.push,Fa=Sa.slice,La=function(Za,ti){for(var ni=0,ai=Za.length;ni<ai;ni++)if(Za[ni]===ti)return ni;return-1},Na='checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped',Ra='[\\x20\\t\\r\\n\\f]',Pa='(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+',ja=/[\x20\t\r\n\f]+/g,Wa=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,Oa=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,Ba=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,qa=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,_a=/:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,Ha=/^(?:\\.|[\w-]|[^\x00-\xa0])+$/,Ua={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\]/,PSEUDO:/^:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},za=/^(?:input|select|textarea|button)$/i,Va=/^h\d$/i,Xa=/^[^{]+\{\s*\[native \w/,Ya=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ga=/[+~]/,Ka=/'|\\/g,$a=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,Qa=function(Za,ti,ni){var ai='0x'+ti-65536;return ai!=ai||ni?ti:0>ai?String.fromCharCode(ai+65536):String.fromCharCode(55296|ai>>10,56320|1023&ai)},Ja=function(){ra()},Gn,Kn,$n,Qn,Jn,Zn,ta,na,aa,ia,oa,ra,da,sa,la,ca,pa,ua,ha;try{Aa.apply(Sa=Fa.call(ma.childNodes),ma.childNodes),Sa[ma.childNodes.length].nodeType}catch(Za){Aa={apply:Sa.length?function(ti,ni){Ta.apply(ti,Fa.call(ni))}:function(ti,ni){for(var ai=ti.length,ii=0;ti[ai++]=ni[ii++];);ti.length=ai-1}}}for(Gn in Kn=Fn.support={},Jn=Fn.isXML=function(Za){var ti=Za&&(Za.ownerDocument||Za).documentElement;return!!ti&&'HTML'!==ti.nodeName},ra=Fn.setDocument=function(Za){var ai=Za?Za.ownerDocument||Za:ma,ti,ni;return ai!==da&&9===ai.nodeType&&ai.documentElement?(da=ai,sa=da.documentElement,la=!Jn(da),(ni=da.defaultView)&&ni.top!==ni&&(ni.addEventListener?ni.addEventListener('unload',Ja,!1):ni.attachEvent&&ni.attachEvent('onunload',Ja)),Kn.attributes=Rn(function(ii){return ii.className='i',!ii.getAttribute('className')}),Kn.getElementsByTagName=Rn(function(ii){return ii.appendChild(da.createComment('')),!ii.getElementsByTagName('*').length}),Kn.getElementsByClassName=Xa.test(da.getElementsByClassName),Kn.getById=Rn(function(ii){return sa.appendChild(ii).id=ga,!da.getElementsByName||!da.getElementsByName(ga).length}),Kn.getById?($n.find.ID=function(ii,oi){if('undefined'!=typeof oi.getElementById&&la){var ri=oi.getElementById(ii);return ri?[ri]:[]}},$n.filter.ID=function(ii){var oi=ii.replace($a,Qa);return function(ri){return ri.getAttribute('id')===oi}}):(delete $n.find.ID,$n.filter.ID=function(ii){var oi=ii.replace($a,Qa);return function(ri){var di='undefined'!=typeof ri.getAttributeNode&&ri.getAttributeNode('id');return di&&di.value===oi}}),$n.find.TAG=Kn.getElementsByTagName?function(ii,oi){return'undefined'==typeof oi.getElementsByTagName?Kn.qsa?oi.querySelectorAll(ii):void 0:oi.getElementsByTagName(ii)}:function(ii,oi){var di=[],si=0,ci=oi.getElementsByTagName(ii),ri;if('*'===ii){for(;ri=ci[si++];)1===ri.nodeType&&di.push(ri);return di}return ci},$n.find.CLASS=Kn.getElementsByClassName&&function(ii,oi){if('undefined'!=typeof oi.getElementsByClassName&&la)return oi.getElementsByClassName(ii)},pa=[],ca=[],(Kn.qsa=Xa.test(da.querySelectorAll))&&(Rn(function(ii){sa.appendChild(ii).innerHTML='<a id=\''+ga+'\'></a><select id=\''+ga+'-\r\\\' msallowcapture=\'\'><option selected=\'\'></option></select>',ii.querySelectorAll('[msallowcapture^=\'\']').length&&ca.push('[*^$]='+Ra+'*(?:\'\'|"")'),ii.querySelectorAll('[selected]').length||ca.push('\\['+Ra+'*(?:value|'+Na+')'),ii.querySelectorAll('[id~='+ga+'-]').length||ca.push('~='),ii.querySelectorAll(':checked').length||ca.push(':checked'),ii.querySelectorAll('a#'+ga+'+*').length||ca.push('.#.+[+~]')}),Rn(function(ii){var oi=da.createElement('input');oi.setAttribute('type','hidden'),ii.appendChild(oi).setAttribute('name','D'),ii.querySelectorAll('[name=d]').length&&ca.push('name'+Ra+'*[*^$|!~]?='),ii.querySelectorAll(':enabled').length||ca.push(':enabled',':disabled'),ii.querySelectorAll('*,:x'),ca.push(',.*:')})),(Kn.matchesSelector=Xa.test(ua=sa.matches||sa.webkitMatchesSelector||sa.mozMatchesSelector||sa.oMatchesSelector||sa.msMatchesSelector))&&Rn(function(ii){Kn.disconnectedMatch=ua.call(ii,'div'),ua.call(ii,'[s!=\'\']:x'),pa.push('!=',':('+Pa+')(?:\\(((\'((?:\\\\.|[^\\\\\'])*)\'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|'+('\\['+Ra+'*('+Pa+')(?:'+Ra+'*([*^$|!~]?=)'+Ra+'*(?:\'((?:\\\\.|[^\\\\\'])*)\'|"((?:\\\\.|[^\\\\"])*)"|('+Pa+'))|)'+Ra+'*\\]')+')*)|.*)\\)|)')}),ca=ca.length&&new RegExp(ca.join('|')),pa=pa.length&&new RegExp(pa.join('|')),ti=Xa.test(sa.compareDocumentPosition),ha=ti||Xa.test(sa.contains)?function(ii,oi){var ri=9===ii.nodeType?ii.documentElement:ii,di=oi&&oi.parentNode;return ii===di||!!(di&&1===di.nodeType&&(ri.contains?ri.contains(di):ii.compareDocumentPosition&&16&ii.compareDocumentPosition(di)))}:function(ii,oi){if(oi)for(;oi=oi.parentNode;)if(oi===ii)return!0;return!1},Ea=ti?function(ii,oi){if(ii===oi)return oa=!0,0;var ri=!ii.compareDocumentPosition-!oi.compareDocumentPosition;return ri?ri:(ri=(ii.ownerDocument||ii)===(oi.ownerDocument||oi)?ii.compareDocumentPosition(oi):1,1&ri||!Kn.sortDetached&&oi.compareDocumentPosition(ii)===ri?ii===da||ii.ownerDocument===ma&&ha(ma,ii)?-1:oi===da||oi.ownerDocument===ma&&ha(ma,oi)?1:ia?La(ia,ii)-La(ia,oi):0:4&ri?-1:1)}:function(ii,oi){if(ii===oi)return oa=!0,0;var di=0,si=ii.parentNode,ci=oi.parentNode,pi=[ii],ui=[oi],ri;if(!si||!ci)return ii===da?-1:oi===da?1:si?-1:ci?1:ia?La(ia,ii)-La(ia,oi):0;if(si===ci)return Dn(ii,oi);for(ri=ii;ri=ri.parentNode;)pi.unshift(ri);for(ri=oi;ri=ri.parentNode;)ui.unshift(ri);for(;pi[di]===ui[di];)di++;return di?Dn(pi[di],ui[di]):pi[di]===ma?-1:ui[di]===ma?1:0},da):da},Fn.matches=function(Za,ti){return Fn(Za,null,null,ti)},Fn.matchesSelector=function(Za,ti){if((Za.ownerDocument||Za)!==da&&ra(Za),ti=ti.replace(qa,'=\'$1\']'),Kn.matchesSelector&&la&&!wa[ti+' ']&&(!pa||!pa.test(ti))&&(!ca||!ca.test(ti)))try{var ni=ua.call(Za,ti);if(ni||Kn.disconnectedMatch||Za.document&&11!==Za.document.nodeType)return ni}catch(ai){}return 0<Fn(ti,da,null,[Za]).length},Fn.contains=function(Za,ti){return(Za.ownerDocument||Za)!==da&&ra(Za),ha(Za,ti)},Fn.attr=function(Za,ti){(Za.ownerDocument||Za)!==da&&ra(Za);var ni=$n.attrHandle[ti.toLowerCase()],ai=ni&&Ca.call($n.attrHandle,ti.toLowerCase())?ni(Za,ti,!la):void 0;return void 0===ai?Kn.attributes||!la?Za.getAttribute(ti):(ai=Za.getAttributeNode(ti))&&ai.specified?ai.value:null:ai},Fn.error=function(Za){throw new Error('Syntax error, unrecognized expression: '+Za)},Fn.uniqueSort=function(Za){var ni=[],ai=0,ii=0,ti;if(oa=!Kn.detectDuplicates,ia=!Kn.sortStable&&Za.slice(0),Za.sort(Ea),oa){for(;ti=Za[ii++];)ti===Za[ii]&&(ai=ni.push(ii));for(;ai--;)Za.splice(ni[ai],1)}return ia=null,Za},Qn=Fn.getText=function(Za){var ni='',ai=0,ii=Za.nodeType,ti;if(!ii)for(;ti=Za[ai++];)ni+=Qn(ti);else if(1===ii||9===ii||11===ii){if('string'==typeof Za.textContent)return Za.textContent;for(Za=Za.firstChild;Za;Za=Za.nextSibling)ni+=Qn(Za)}else if(3===ii||4===ii)return Za.nodeValue;return ni},$n=Fn.selectors={cacheLength:50,createPseudo:Nn,match:Ua,attrHandle:{},find:{},relative:{'>':{dir:'parentNode',first:!0},' ':{dir:'parentNode'},'+':{dir:'previousSibling',first:!0},'~':{dir:'previousSibling'}},preFilter:{ATTR:function(Za){return Za[1]=Za[1].replace($a,Qa),Za[3]=(Za[3]||Za[4]||Za[5]||'').replace($a,Qa),'~='===Za[2]&&(Za[3]=' '+Za[3]+' '),Za.slice(0,4)},CHILD:function(Za){return Za[1]=Za[1].toLowerCase(),'nth'===Za[1].slice(0,3)?(!Za[3]&&Fn.error(Za[0]),Za[4]=+(Za[4]?Za[5]+(Za[6]||1):2*('even'===Za[3]||'odd'===Za[3])),Za[5]=+(Za[7]+Za[8]||'odd'===Za[3])):Za[3]&&Fn.error(Za[0]),Za},PSEUDO:function(Za){var ni=!Za[6]&&Za[2],ti;return Ua.CHILD.test(Za[0])?null:(Za[3]?Za[2]=Za[4]||Za[5]||'':ni&&_a.test(ni)&&(ti=Zn(ni,!0))&&(ti=ni.indexOf(')',ni.length-ti)-ni.length)&&(Za[0]=Za[0].slice(0,ti),Za[2]=ni.slice(0,ti)),Za.slice(0,3))}},filter:{TAG:function(Za){var ti=Za.replace($a,Qa).toLowerCase();return'*'===Za?function(){return!0}:function(ni){return ni.nodeName&&ni.nodeName.toLowerCase()===ti}},CLASS:function(Za){var ti=xa[Za+' '];return ti||(ti=new RegExp('(^|'+Ra+')'+Za+'('+Ra+'|$)'))&&xa(Za,function(ni){return ti.test('string'==typeof ni.className&&ni.className||'undefined'!=typeof ni.getAttribute&&ni.getAttribute('class')||'')})},ATTR:function(Za,ti,ni){return function(ai){var ii=Fn.attr(ai,Za);return null==ii?'!='===ti:!ti||(ii+='','='===ti?ii===ni:'!='===ti?ii!==ni:'^='===ti?ni&&0===ii.indexOf(ni):'*='===ti?ni&&-1<ii.indexOf(ni):'$='===ti?ni&&ii.slice(-ni.length)===ni:'~='===ti?-1<(' '+ii.replace(ja,' ')+' ').indexOf(ni):'|='==ti&&(ii===ni||ii.slice(0,ni.length+1)===ni+'-'))}},CHILD:function(Za,ti,ni,ai,ii){var oi='nth'!==Za.slice(0,3),ri='last'!==Za.slice(-4),di='of-type'===ti;return 1===ai&&0===ii?function(si){return!!si.parentNode}:function(si,ci,pi){var xi=oi==ri?'previousSibling':'nextSibling',bi=si.parentNode,wi=di&&si.nodeName.toLowerCase(),Ei=!pi&&!di,ki=!1,ui,hi,gi,mi,yi,vi;if(bi){if(oi){for(;xi;){for(mi=si;mi=mi[xi];)if(di?mi.nodeName.toLowerCase()===wi:1===mi.nodeType)return!1;vi=xi='only'===Za&&!vi&&'nextSibling'}return!0}if(vi=[ri?bi.firstChild:bi.lastChild],ri&&Ei){for(mi=bi,gi=mi[ga]||(mi[ga]={}),hi=gi[mi.uniqueID]||(gi[mi.uniqueID]={}),ui=hi[Za]||[],yi=ui[0]===ya&&ui[1],ki=yi&&ui[2],mi=yi&&bi.childNodes[yi];mi=++yi&&mi&&mi[xi]||(ki=yi=0)||vi.pop();)if(1===mi.nodeType&&++ki&&mi===si){hi[Za]=[ya,yi,ki];break}}else if(Ei&&(mi=si,gi=mi[ga]||(mi[ga]={}),hi=gi[mi.uniqueID]||(gi[mi.uniqueID]={}),ui=hi[Za]||[],yi=ui[0]===ya&&ui[1],ki=yi),!1==ki)for(;(mi=++yi&&mi&&mi[xi]||(ki=yi=0)||vi.pop())&&!((di?mi.nodeName.toLowerCase()===wi:1===mi.nodeType)&&++ki&&(Ei&&(gi=mi[ga]||(mi[ga]={}),hi=gi[mi.uniqueID]||(gi[mi.uniqueID]={}),hi[Za]=[ya,ki]),mi===si)););return ki-=ii,ki===ai||0==ki%ai&&0<=ki/ai}}},PSEUDO:function(Za,ti){var ai=$n.pseudos[Za]||$n.setFilters[Za.toLowerCase()]||Fn.error('unsupported pseudo: '+Za),ni;return ai[ga]?ai(ti):1<ai.length?(ni=[Za,Za,'',ti],$n.setFilters.hasOwnProperty(Za.toLowerCase())?Nn(function(ii,oi){for(var di=ai(ii,ti),si=di.length,ri;si--;)ri=La(ii,di[si]),ii[ri]=!(oi[ri]=di[si])}):function(ii){return ai(ii,0,ni)}):ai}},pseudos:{not:Nn(function(Za){var ti=[],ni=[],ai=ta(Za.replace(Wa,'$1'));return ai[ga]?Nn(function(ii,oi,ri,di){for(var ci=ai(ii,null,di,[]),pi=ii.length,si;pi--;)(si=ci[pi])&&(ii[pi]=!(oi[pi]=si))}):function(ii,oi,ri){return ti[0]=ii,ai(ti,null,ri,ni),ti[0]=null,!ni.pop()}}),has:Nn(function(Za){return function(ti){return 0<Fn(Za,ti).length}}),contains:Nn(function(Za){return Za=Za.replace($a,Qa),function(ti){return-1<(ti.textContent||ti.innerText||Qn(ti)).indexOf(Za)}}),lang:Nn(function(Za){return Ha.test(Za||'')||Fn.error('unsupported lang: '+Za),Za=Za.replace($a,Qa).toLowerCase(),function(ti){var ni;do if(ni=la?ti.lang:ti.getAttribute('xml:lang')||ti.getAttribute('lang'))return ni=ni.toLowerCase(),ni===Za||0===ni.indexOf(Za+'-');while((ti=ti.parentNode)&&1===ti.nodeType);return!1}}),target:function(Za){var ti=An.location&&An.location.hash;return ti&&ti.slice(1)===Za.id},root:function(Za){return Za===sa},focus:function(Za){return Za===da.activeElement&&(!da.hasFocus||da.hasFocus())&&!!(Za.type||Za.href||~Za.tabIndex)},enabled:function(Za){return!1===Za.disabled},disabled:function(Za){return!0===Za.disabled},checked:function(Za){var ti=Za.nodeName.toLowerCase();return'input'===ti&&!!Za.checked||'option'===ti&&!!Za.selected},selected:function(Za){return Za.parentNode&&Za.parentNode.selectedIndex,!0===Za.selected},empty:function(Za){for(Za=Za.firstChild;Za;Za=Za.nextSibling)if(6>Za.nodeType)return!1;return!0},parent:function(Za){return!$n.pseudos.empty(Za)},header:function(Za){return Va.test(Za.nodeName)},input:function(Za){return za.test(Za.nodeName)},button:function(Za){var ti=Za.nodeName.toLowerCase();return'input'===ti&&'button'===Za.type||'button'===ti},text:function(Za){var ti;return'input'===Za.nodeName.toLowerCase()&&'text'===Za.type&&(null==(ti=Za.getAttribute('type'))||'text'===ti.toLowerCase())},first:Wn(function(){return[0]}),last:Wn(function(Za,ti){return[ti-1]}),eq:Wn(function(Za,ti,ni){return[0>ni?ni+ti:ni]}),even:Wn(function(Za,ti){for(var ni=0;ni<ti;ni+=2)Za.push(ni);return Za}),odd:Wn(function(Za,ti){for(var ni=1;ni<ti;ni+=2)Za.push(ni);return Za}),lt:Wn(function(Za,ti,ni){for(var ai=0>ni?ni+ti:ni;0<=--ai;)Za.push(ai);return Za}),gt:Wn(function(Za,ti,ni){for(var ai=0>ni?ni+ti:ni;++ai<ti;)Za.push(ai);return Za})}},$n.pseudos.nth=$n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})$n.pseudos[Gn]=Mn(Gn);for(Gn in{submit:!0,reset:!0})$n.pseudos[Gn]=jn(Gn);return Bn.prototype=$n.filters=$n.pseudos,$n.setFilters=new Bn,Zn=Fn.tokenize=function(Za,ti){var ci=ba[Za+' '],ni,ai,ii,oi,ri,di,si;if(ci)return ti?0:ci.slice(0);for(ri=Za,di=[],si=$n.preFilter;ri;){for(oi in(!ni||(ai=Oa.exec(ri)))&&(ai&&(ri=ri.slice(ai[0].length)||ri),di.push(ii=[])),ni=!1,(ai=Ba.exec(ri))&&(ni=ai.shift(),ii.push({value:ni,type:ai[0].replace(Wa,' ')}),ri=ri.slice(ni.length)),$n.filter)(ai=Ua[oi].exec(ri))&&(!si[oi]||(ai=si[oi](ai)))&&(ni=ai.shift(),ii.push({value:ni,type:oi,matches:ai}),ri=ri.slice(ni.length));if(!ni)break}return ti?ri.length:ri?Fn.error(Za):ba(Za,di).slice(0)},ta=Fn.compile=function(Za,ti){var ai=[],ii=[],oi=wa[Za+' '],ni;if(!oi){for(ti||(ti=Zn(Za)),ni=ti.length;ni--;)oi=Xn(ti[ni]),oi[ga]?ai.push(oi):ii.push(oi);oi=wa(Za,Yn(ii,ai)),oi.selector=Za}return oi},na=Fn.select=function(Za,ti,ni,ai){var ci='function'==typeof Za&&Za,pi=!ai&&Zn(Za=ci.selector||Za),ii,oi,ri,di,si;if(ni=ni||[],1===pi.length){if(oi=pi[0]=pi[0].slice(0),2<oi.length&&'ID'===(ri=oi[0]).type&&Kn.getById&&9===ti.nodeType&&la&&$n.relative[oi[1].type]){if(ti=($n.find.ID(ri.matches[0].replace($a,Qa),ti)||[])[0],!ti)return ni;ci&&(ti=ti.parentNode),Za=Za.slice(oi.shift().value.length)}for(ii=Ua.needsContext.test(Za)?0:oi.length;ii--&&(ri=oi[ii],!$n.relative[di=ri.type]);)if((si=$n.find[di])&&(ai=si(ri.matches[0].replace($a,Qa),Ga.test(oi[0].type)&&On(ti.parentNode)||ti))){if(oi.splice(ii,1),Za=ai.length&&qn(oi),!Za)return Aa.apply(ni,ai),ni;break}}return(ci||ta(Za,pi))(ai,ti,!la,ni,!ti||Ga.test(Za)&&On(ti.parentNode)||ti),ni},Kn.sortStable=ga.split('').sort(Ea).join('')===ga,Kn.detectDuplicates=!!oa,ra(),Kn.sortDetached=Rn(function(Za){return 1&Za.compareDocumentPosition(da.createElement('div'))}),Rn(function(Za){return Za.innerHTML='<a href=\'#\'></a>','#'===Za.firstChild.getAttribute('href')})||Pn('type|href|height|width',function(Za,ti,ni){if(!ni)return Za.getAttribute(ti,'type'===ti.toLowerCase()?1:2)}),Kn.attributes&&Rn(function(Za){return Za.innerHTML='<input/>',Za.firstChild.setAttribute('value',''),''===Za.firstChild.getAttribute('value')})||Pn('value',function(Za,ti,ni){if(!ni&&'input'===Za.nodeName.toLowerCase())return Za.defaultValue}),Rn(function(Za){return null==Za.getAttribute('disabled')})||Pn(Na,function(Za,ti,ni){var ai;if(!ni)return!0===Za[ti]?ti.toLowerCase():(ai=Za.getAttributeNode(ti))&&ai.specified?ai.value:null}),Fn}(T);qe.find=Ve,qe.expr=Ve.selectors,qe.expr[':']=qe.expr.pseudos,qe.uniqueSort=qe.unique=Ve.uniqueSort,qe.text=Ve.getText,qe.isXMLDoc=Ve.isXML,qe.contains=Ve.contains;var Xe=function(An,Fn,Ln){for(var Nn=[];(An=An[Fn])&&9!==An.nodeType;)if(1===An.nodeType){if(void 0!==Ln&&qe(An).is(Ln))break;Nn.push(An)}return Nn},Ye=function(An,Fn){for(var Ln=[];An;An=An.nextSibling)1===An.nodeType&&An!==Fn&&Ln.push(An);return Ln},Ge=qe.expr.match.needsContext,Ke=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,$e=/^.[^:#\[\.,]*$/;qe.filter=function(An,Fn,Ln){var Nn=Fn[0];return Ln&&(An=':not('+An+')'),1===Fn.length&&1===Nn.nodeType?qe.find.matchesSelector(Nn,An)?[Nn]:[]:qe.find.matches(An,qe.grep(Fn,function(Rn){return 1===Rn.nodeType}))},qe.fn.extend({find:function(An){var Ln=this.length,Nn=[],Rn=this,Fn;if('string'!=typeof An)return this.pushStack(qe(An).filter(function(){for(Fn=0;Fn<Ln;Fn++)if(qe.contains(Rn[Fn],this))return!0}));for(Fn=0;Fn<Ln;Fn++)qe.find(An,Rn[Fn],Nn);return Nn=this.pushStack(1<Ln?qe.unique(Nn):Nn),Nn.selector=this.selector?this.selector+' '+An:An,Nn},filter:function(An){return this.pushStack(R(this,An||[],!1))},not:function(An){return this.pushStack(R(this,An||[],!0))},is:function(An){return!!R(this,'string'==typeof An&&Ge.test(An)?qe(An):An||[],!1).length}});var Je=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,Ze=qe.fn.init=function(An,Fn,Ln){var Nn,Rn;if(!An)return this;if(Ln=Ln||Qe,'string'==typeof An){if(Nn='<'===An[0]&&'>'===An[An.length-1]&&3<=An.length?[null,An,null]:Je.exec(An),Nn&&(Nn[1]||!Fn)){if(Nn[1]){if(Fn=Fn instanceof qe?Fn[0]:Fn,qe.merge(this,qe.parseHTML(Nn[1],Fn&&Fn.nodeType?Fn.ownerDocument||Fn:Le,!0)),Ke.test(Nn[1])&&qe.isPlainObject(Fn))for(Nn in Fn)qe.isFunction(this[Nn])?this[Nn](Fn[Nn]):this.attr(Nn,Fn[Nn]);return this}return Rn=Le.getElementById(Nn[2]),Rn&&Rn.parentNode&&(this.length=1,this[0]=Rn),this.context=Le,this.selector=An,this}return!Fn||Fn.jquery?(Fn||Ln).find(An):this.constructor(Fn).find(An)}return An.nodeType?(this.context=this[0]=An,this.length=1,this):qe.isFunction(An)?void 0===Ln.ready?An(qe):Ln.ready(An):(void 0!==An.selector&&(this.selector=An.selector,this.context=An.context),qe.makeArray(An,this))},Qe;Ze.prototype=qe.fn,Qe=qe(Le);var et=/^(?:parents|prev(?:Until|All))/,tt={children:!0,contents:!0,next:!0,prev:!0};qe.fn.extend({has:function(An){var Fn=qe(An,this),Ln=Fn.length;return this.filter(function(){for(var Nn=0;Nn<Ln;Nn++)if(qe.contains(this,Fn[Nn]))return!0})},closest:function(An,Fn){for(var Nn=0,Rn=this.length,Pn=[],Dn=Ge.test(An)||'string'!=typeof An?qe(An,Fn||this.context):0,Ln;Nn<Rn;Nn++)for(Ln=this[Nn];Ln&&Ln!==Fn;Ln=Ln.parentNode)if(11>Ln.nodeType&&(Dn?-1<Dn.index(Ln):1===Ln.nodeType&&qe.find.matchesSelector(Ln,An))){Pn.push(Ln);break}return this.pushStack(1<Pn.length?qe.uniqueSort(Pn):Pn)},index:function(An){return An?'string'==typeof An?De.call(qe(An),this[0]):De.call(this,An.jquery?An[0]:An):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(An,Fn){return this.pushStack(qe.uniqueSort(qe.merge(this.get(),qe(An,Fn))))},addBack:function(An){return this.add(null==An?this.prevObject:this.prevObject.filter(An))}}),qe.each({parent:function(An){var Fn=An.parentNode;return Fn&&11!==Fn.nodeType?Fn:null},parents:function(An){return Xe(An,'parentNode')},parentsUntil:function(An,Fn,Ln){return Xe(An,'parentNode',Ln)},next:function(An){return P(An,'nextSibling')},prev:function(An){return P(An,'previousSibling')},nextAll:function(An){return Xe(An,'nextSibling')},prevAll:function(An){return Xe(An,'previousSibling')},nextUntil:function(An,Fn,Ln){return Xe(An,'nextSibling',Ln)},prevUntil:function(An,Fn,Ln){return Xe(An,'previousSibling',Ln)},siblings:function(An){return Ye((An.parentNode||{}).firstChild,An)},children:function(An){return Ye(An.firstChild)},contents:function(An){return An.contentDocument||qe.merge([],An.childNodes)}},function(An,Fn){qe.fn[An]=function(Ln,Nn){var Rn=qe.map(this,Fn,Ln);return'Until'!==An.slice(-5)&&(Nn=Ln),Nn&&'string'==typeof Nn&&(Rn=qe.filter(Nn,Rn)),1<this.length&&(!tt[An]&&qe.uniqueSort(Rn),et.test(An)&&Rn.reverse()),this.pushStack(Rn)}});var nt=/\S+/g;qe.Callbacks=function(An){An='string'==typeof An?D(An):qe.extend({},An);var Pn=[],Dn=[],Mn=-1,jn=function(){for(Rn=An.once,Nn=Fn=!0;Dn.length;Mn=-1)for(Ln=Dn.shift();++Mn<Pn.length;)!1===Pn[Mn].apply(Ln[0],Ln[1])&&An.stopOnFalse&&(Mn=Pn.length,Ln=!1);An.memory||(Ln=!1),Fn=!1,Rn&&(Ln?Pn=[]:Pn='')},Wn={add:function(){return Pn&&(Ln&&!Fn&&(Mn=Pn.length-1,Dn.push(Ln)),function On(Bn){qe.each(Bn,function(qn,_n){qe.isFunction(_n)?(!An.unique||!Wn.has(_n))&&Pn.push(_n):_n&&_n.length&&'string'!==qe.type(_n)&&On(_n)})}(arguments),Ln&&!Fn&&jn()),this},remove:function(){return qe.each(arguments,function(On,Bn){for(var qn;-1<(qn=qe.inArray(Bn,Pn,qn));)Pn.splice(qn,1),qn<=Mn&&Mn--}),this},has:function(On){return On?-1<qe.inArray(On,Pn):0<Pn.length},empty:function(){return Pn&&(Pn=[]),this},disable:function(){return Rn=Dn=[],Pn=Ln='',this},disabled:function(){return!Pn},lock:function(){return Rn=Dn=[],Ln||(Pn=Ln=''),this},locked:function(){return!!Rn},fireWith:function(On,Bn){return Rn||(Bn=Bn||[],Bn=[On,Bn.slice?Bn.slice():Bn],Dn.push(Bn),!Fn&&jn()),this},fire:function(){return Wn.fireWith(this,arguments),this},fired:function(){return!!Nn}},Fn,Ln,Nn,Rn;return Wn},qe.extend({Deferred:function(An){var Fn=[['resolve','done',qe.Callbacks('once memory'),'resolved'],['reject','fail',qe.Callbacks('once memory'),'rejected'],['notify','progress',qe.Callbacks('memory')]],Ln='pending',Nn={state:function(){return Ln},always:function(){return Rn.done(arguments).fail(arguments),this},then:function(){var Pn=arguments;return qe.Deferred(function(Dn){qe.each(Fn,function(Mn,jn){var Wn=qe.isFunction(Pn[Mn])&&Pn[Mn];Rn[jn[1]](function(){var On=Wn&&Wn.apply(this,arguments);On&&qe.isFunction(On.promise)?On.promise().progress(Dn.notify).done(Dn.resolve).fail(Dn.reject):Dn[jn[0]+'With'](this===Nn?Dn.promise():this,Wn?[On]:arguments)})}),Pn=null}).promise()},promise:function(Pn){return null==Pn?Nn:qe.extend(Pn,Nn)}},Rn={};return Nn.pipe=Nn.then,qe.each(Fn,function(Pn,Dn){var Mn=Dn[2],jn=Dn[3];Nn[Dn[1]]=Mn.add,jn&&Mn.add(function(){Ln=jn},Fn[1^Pn][2].disable,Fn[2][2].lock),Rn[Dn[0]]=function(){return Rn[Dn[0]+'With'](this===Rn?Nn:this,arguments),this},Rn[Dn[0]+'With']=Mn.fireWith}),Nn.promise(Rn),An&&An.call(Rn,Rn),Rn},when:function(An){var Fn=0,Ln=Ne.call(arguments),Nn=Ln.length,Rn=1!==Nn||An&&qe.isFunction(An.promise)?Nn:0,Pn=1===Rn?An:qe.Deferred(),Dn=function(On,Bn,qn){return function(_n){Bn[On]=this,qn[On]=1<arguments.length?Ne.call(arguments):_n,qn===Mn?Pn.notifyWith(Bn,qn):! --Rn&&Pn.resolveWith(Bn,qn)}},Mn,jn,Wn;if(1<Nn)for(Mn=Array(Nn),jn=Array(Nn),Wn=Array(Nn);Fn<Nn;Fn++)Ln[Fn]&&qe.isFunction(Ln[Fn].promise)?Ln[Fn].promise().progress(Dn(Fn,jn,Mn)).done(Dn(Fn,Wn,Ln)).fail(Pn.reject):--Rn;return Rn||Pn.resolveWith(Wn,Ln),Pn.promise()}});var at;qe.fn.ready=function(An){return qe.ready.promise().done(An),this},qe.extend({isReady:!1,readyWait:1,holdReady:function(An){An?qe.readyWait++:qe.ready(!0)},ready:function(An){(!0===An?! --qe.readyWait:!qe.isReady)&&(qe.isReady=!0,!0!==An&&0<--qe.readyWait||(at.resolveWith(Le,[qe]),qe.fn.triggerHandler&&(qe(Le).triggerHandler('ready'),qe(Le).off('ready'))))}}),qe.ready.promise=function(An){return at||(at=qe.Deferred(),'complete'!==Le.readyState&&('loading'===Le.readyState||Le.documentElement.doScroll)?(Le.addEventListener('DOMContentLoaded',M),T.addEventListener('load',M)):T.setTimeout(qe.ready)),at.promise(An)},qe.ready.promise();var it=function(An,Fn,Ln,Nn,Rn,Pn,Dn){var Mn=0,jn=An.length,Wn=null==Ln;if('object'===qe.type(Ln))for(Mn in Rn=!0,Ln)it(An,Fn,Mn,Ln[Mn],!0,Pn,Dn);else if(void 0!==Nn&&(Rn=!0,qe.isFunction(Nn)||(Dn=!0),Wn&&(Dn?(Fn.call(An,Nn),Fn=null):(Wn=Fn,Fn=function(On,Bn,qn){return Wn.call(qe(On),qn)})),Fn))for(;Mn<jn;Mn++)Fn(An[Mn],Ln,Dn?Nn:Nn.call(An[Mn],Mn,Fn(An[Mn],Ln)));return Rn?An:Wn?Fn.call(An):jn?Fn(An[0],Ln):Pn},ot=function(An){return 1===An.nodeType||9===An.nodeType||!+An.nodeType};W.uid=1,W.prototype={register:function(An,Fn){var Ln=Fn||{};return An.nodeType?An[this.expando]=Ln:Object.defineProperty(An,this.expando,{value:Ln,writable:!0,configurable:!0}),An[this.expando]},cache:function(An){if(!ot(An))return{};var Fn=An[this.expando];return Fn||(Fn={},ot(An)&&(An.nodeType?An[this.expando]=Fn:Object.defineProperty(An,this.expando,{value:Fn,configurable:!0}))),Fn},set:function(An,Fn,Ln){var Rn=this.cache(An),Nn;if('string'==typeof Fn)Rn[Fn]=Ln;else for(Nn in Fn)Rn[Nn]=Fn[Nn];return Rn},get:function(An,Fn){return void 0===Fn?this.cache(An):An[this.expando]&&An[this.expando][Fn]},access:function(An,Fn,Ln){var Nn;return void 0===Fn||Fn&&'string'==typeof Fn&&void 0===Ln?(Nn=this.get(An,Fn),void 0==Nn?this.get(An,qe.camelCase(Fn)):Nn):(this.set(An,Fn,Ln),void 0===Ln?Fn:Ln)},remove:function(An,Fn){var Pn=An[this.expando],Ln,Nn,Rn;if(void 0!==Pn){if(void 0===Fn)this.register(An);else for(qe.isArray(Fn)?Nn=Fn.concat(Fn.map(qe.camelCase)):(Rn=qe.camelCase(Fn),(Fn in Pn)?Nn=[Fn,Rn]:(Nn=Rn,Nn=(Nn in Pn)?[Nn]:Nn.match(nt)||[])),Ln=Nn.length;Ln--;)delete Pn[Nn[Ln]];(void 0===Fn||qe.isEmptyObject(Pn))&&(An.nodeType?An[this.expando]=void 0:delete An[this.expando])}},hasData:function(An){var Fn=An[this.expando];return void 0!==Fn&&!qe.isEmptyObject(Fn)}};var rt=new W,dt=new W,lt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ut=/[A-Z]/g;qe.extend({hasData:function(An){return dt.hasData(An)||rt.hasData(An)},data:function(An,Fn,Ln){return dt.access(An,Fn,Ln)},removeData:function(An,Fn){dt.remove(An,Fn)},_data:function(An,Fn,Ln){return rt.access(An,Fn,Ln)},_removeData:function(An,Fn){rt.remove(An,Fn)}}),qe.fn.extend({data:function(An,Fn){var Pn=this[0],Dn=Pn&&Pn.attributes,Ln,Nn,Rn;if(void 0===An){if(this.length&&(Rn=dt.get(Pn),1===Pn.nodeType&&!rt.get(Pn,'hasDataAttrs'))){for(Ln=Dn.length;Ln--;)Dn[Ln]&&(Nn=Dn[Ln].name,0===Nn.indexOf('data-')&&(Nn=qe.camelCase(Nn.slice(5)),O(Pn,Nn,Rn[Nn])));rt.set(Pn,'hasDataAttrs',!0)}return Rn}return'object'==typeof An?this.each(function(){dt.set(this,An)}):it(this,function(Mn){var jn,Wn;return Pn&&void 0===Mn?(jn=dt.get(Pn,An)||dt.get(Pn,An.replace(ut,'-$&').toLowerCase()),void 0!=jn)?jn:(Wn=qe.camelCase(An),jn=dt.get(Pn,Wn),void 0!=jn)?jn:(jn=O(Pn,Wn,void 0),void 0==jn?void 0:jn):void(Wn=qe.camelCase(An),this.each(function(){var On=dt.get(this,Wn);dt.set(this,Wn,Mn),-1<An.indexOf('-')&&void 0!==On&&dt.set(this,An,Mn)}))},null,Fn,1<arguments.length,null,!0)},removeData:function(An){return this.each(function(){dt.remove(this,An)})}}),qe.extend({queue:function(An,Fn,Ln){var Nn;if(An)return Fn=(Fn||'fx')+'queue',Nn=rt.get(An,Fn),Ln&&(!Nn||qe.isArray(Ln)?Nn=rt.access(An,Fn,qe.makeArray(Ln)):Nn.push(Ln)),Nn||[]},dequeue:function(An,Fn){Fn=Fn||'fx';var Ln=qe.queue(An,Fn),Nn=Ln.length,Rn=Ln.shift(),Pn=qe._queueHooks(An,Fn);'inprogress'===Rn&&(Rn=Ln.shift(),Nn--),Rn&&('fx'===Fn&&Ln.unshift('inprogress'),delete Pn.stop,Rn.call(An,function(){qe.dequeue(An,Fn)},Pn)),!Nn&&Pn&&Pn.empty.fire()},_queueHooks:function(An,Fn){var Ln=Fn+'queueHooks';return rt.get(An,Ln)||rt.access(An,Ln,{empty:qe.Callbacks('once memory').add(function(){rt.remove(An,[Fn+'queue',Ln])})})}}),qe.fn.extend({queue:function(An,Fn){var Ln=2;return'string'!=typeof An&&(Fn=An,An='fx',Ln--),arguments.length<Ln?qe.queue(this[0],An):void 0===Fn?this:this.each(function(){var Nn=qe.queue(this,An,Fn);qe._queueHooks(this,An),'fx'===An&&'inprogress'!==Nn[0]&&qe.dequeue(this,An)})},dequeue:function(An){return this.each(function(){qe.dequeue(this,An)})},clearQueue:function(An){return this.queue(An||'fx',[])},promise:function(An,Fn){var Nn=1,Rn=qe.Deferred(),Pn=this,Dn=this.length,Mn=function(){--Nn||Rn.resolveWith(Pn,[Pn])},Ln;for('string'!=typeof An&&(Fn=An,An=void 0),An=An||'fx';Dn--;)Ln=rt.get(Pn[Dn],An+'queueHooks'),Ln&&Ln.empty&&(Nn++,Ln.empty.add(Mn));return Mn(),Rn.promise(Fn)}});var ht=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,gt=new RegExp('^(?:([+-])=|)('+ht+')([a-z%]*)$','i'),mt=['Top','Right','Bottom','Left'],ft=function(An,Fn){return An=Fn||An,'none'===qe.css(An,'display')||!qe.contains(An.ownerDocument,An)},yt=/^(?:checkbox|radio)$/i,vt=/<([\w:-]+)/,xt=/^$|\/(?:java|ecma)script/i,bt={option:[1,'<select multiple=\'multiple\'>','</select>'],thead:[1,'<table>','</table>'],col:[2,'<table><colgroup>','</colgroup></table>'],tr:[2,'<table><tbody>','</tbody></table>'],td:[3,'<table><tbody><tr>','</tr></tbody></table>'],_default:[0,'','']};bt.optgroup=bt.option,bt.tbody=bt.tfoot=bt.colgroup=bt.caption=bt.thead,bt.th=bt.td;var wt=/<|&#?\w+;/;(function(){var An=Le.createDocumentFragment(),Fn=An.appendChild(Le.createElement('div')),Ln=Le.createElement('input');Ln.setAttribute('type','radio'),Ln.setAttribute('checked','checked'),Ln.setAttribute('name','t'),Fn.appendChild(Ln),Oe.checkClone=Fn.cloneNode(!0).cloneNode(!0).lastChild.checked,Fn.innerHTML='<textarea>x</textarea>',Oe.noCloneChecked=!!Fn.cloneNode(!0).lastChild.defaultValue})();var Et=/^key/,kt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ct=/^([^.]*)(?:\.(.+)|)/;qe.event={global:{},add:function(An,Fn,Ln,Nn,Rn){var zn=rt.get(An),Pn,Dn,Mn,jn,Wn,On,Bn,qn,_n,Hn,Un;if(zn)for(Ln.handler&&(Pn=Ln,Ln=Pn.handler,Rn=Pn.selector),Ln.guid||(Ln.guid=qe.guid++),(jn=zn.events)||(jn=zn.events={}),(Dn=zn.handle)||(Dn=zn.handle=function(Vn){return'undefined'!=typeof qe&&qe.event.triggered!==Vn.type?qe.event.dispatch.apply(An,arguments):void 0}),Fn=(Fn||'').match(nt)||[''],Wn=Fn.length;Wn--;)(Mn=Ct.exec(Fn[Wn])||[],_n=Un=Mn[1],Hn=(Mn[2]||'').split('.').sort(),!!_n)&&(Bn=qe.event.special[_n]||{},_n=(Rn?Bn.delegateType:Bn.bindType)||_n,Bn=qe.event.special[_n]||{},On=qe.extend({type:_n,origType:Un,data:Nn,handler:Ln,guid:Ln.guid,selector:Rn,needsContext:Rn&&qe.expr.match.needsContext.test(Rn),namespace:Hn.join('.')},Pn),(qn=jn[_n])||(qn=jn[_n]=[],qn.delegateCount=0,(!Bn.setup||!1===Bn.setup.call(An,Nn,Hn,Dn))&&An.addEventListener&&An.addEventListener(_n,Dn)),Bn.add&&(Bn.add.call(An,On),!On.handler.guid&&(On.handler.guid=Ln.guid)),Rn?qn.splice(qn.delegateCount++,0,On):qn.push(On),qe.event.global[_n]=!0)},remove:function(An,Fn,Ln,Nn,Rn){var zn=rt.hasData(An)&&rt.get(An),Pn,Dn,Mn,jn,Wn,On,Bn,qn,_n,Hn,Un;if(zn&&(jn=zn.events)){for(Fn=(Fn||'').match(nt)||[''],Wn=Fn.length;Wn--;){if(Mn=Ct.exec(Fn[Wn])||[],_n=Un=Mn[1],Hn=(Mn[2]||'').split('.').sort(),!_n){for(_n in jn)qe.event.remove(An,_n+Fn[Wn],Ln,Nn,!0);continue}for(Bn=qe.event.special[_n]||{},_n=(Nn?Bn.delegateType:Bn.bindType)||_n,qn=jn[_n]||[],Mn=Mn[2]&&new RegExp('(^|\\.)'+Hn.join('\\.(?:.*\\.|)')+'(\\.|$)'),Dn=Pn=qn.length;Pn--;)On=qn[Pn],(Rn||Un===On.origType)&&(!Ln||Ln.guid===On.guid)&&(!Mn||Mn.test(On.namespace))&&(!Nn||Nn===On.selector||'**'===Nn&&On.selector)&&(qn.splice(Pn,1),On.selector&&qn.delegateCount--,Bn.remove&&Bn.remove.call(An,On));Dn&&!qn.length&&((!Bn.teardown||!1===Bn.teardown.call(An,Hn,zn.handle))&&qe.removeEvent(An,_n,zn.handle),delete jn[_n])}qe.isEmptyObject(jn)&&rt.remove(An,'handle events')}},dispatch:function(An){An=qe.event.fix(An);var Dn=[],Mn=Ne.call(arguments),jn=(rt.get(this,'events')||{})[An.type]||[],Wn=qe.event.special[An.type]||{},Fn,Ln,Nn,Rn,Pn;if(Mn[0]=An,An.delegateTarget=this,!(Wn.preDispatch&&!1===Wn.preDispatch.call(this,An))){for(Dn=qe.event.handlers.call(this,An,jn),Fn=0;(Rn=Dn[Fn++])&&!An.isPropagationStopped();)for(An.currentTarget=Rn.elem,Ln=0;(Pn=Rn.handlers[Ln++])&&!An.isImmediatePropagationStopped();)(!An.rnamespace||An.rnamespace.test(Pn.namespace))&&(An.handleObj=Pn,An.data=Pn.data,Nn=((qe.event.special[Pn.origType]||{}).handle||Pn.handler).apply(Rn.elem,Mn),void 0!=Nn&&!1===(An.result=Nn)&&(An.preventDefault(),An.stopPropagation()));return Wn.postDispatch&&Wn.postDispatch.call(this,An),An.result}},handlers:function(An,Fn){var Dn=[],Mn=Fn.delegateCount,jn=An.target,Ln,Nn,Rn,Pn;if(Mn&&jn.nodeType&&('click'!==An.type||isNaN(An.button)||1>An.button))for(;jn!==this;jn=jn.parentNode||this)if(1===jn.nodeType&&(!0!==jn.disabled||'click'!==An.type)){for(Nn=[],Ln=0;Ln<Mn;Ln++)Pn=Fn[Ln],Rn=Pn.selector+' ',void 0===Nn[Rn]&&(Nn[Rn]=Pn.needsContext?-1<qe(Rn,this).index(jn):qe.find(Rn,this,null,[jn]).length),Nn[Rn]&&Nn.push(Pn);Nn.length&&Dn.push({elem:jn,handlers:Nn})}return Mn<Fn.length&&Dn.push({elem:this,handlers:Fn.slice(Mn)}),Dn},props:'altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which'.split(' '),fixHooks:{},keyHooks:{props:'char charCode key keyCode'.split(' '),filter:function(An,Fn){return null==An.which&&(An.which=null==Fn.charCode?Fn.keyCode:Fn.charCode),An}},mouseHooks:{props:'button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement'.split(' '),filter:function(An,Fn){var Pn=Fn.button,Ln,Nn,Rn;return null==An.pageX&&null!=Fn.clientX&&(Ln=An.target.ownerDocument||Le,Nn=Ln.documentElement,Rn=Ln.body,An.pageX=Fn.clientX+(Nn&&Nn.scrollLeft||Rn&&Rn.scrollLeft||0)-(Nn&&Nn.clientLeft||Rn&&Rn.clientLeft||0),An.pageY=Fn.clientY+(Nn&&Nn.scrollTop||Rn&&Rn.scrollTop||0)-(Nn&&Nn.clientTop||Rn&&Rn.clientTop||0)),An.which||void 0===Pn||(An.which=1&Pn?1:2&Pn?3:4&Pn?2:0),An}},fix:function(An){if(An[qe.expando])return An;var Rn=An.type,Pn=An,Dn=this.fixHooks[Rn],Fn,Ln,Nn;for(Dn||(this.fixHooks[Rn]=Dn=kt.test(Rn)?this.mouseHooks:Et.test(Rn)?this.keyHooks:{}),Nn=Dn.props?this.props.concat(Dn.props):this.props,An=new qe.Event(Pn),Fn=Nn.length;Fn--;)Ln=Nn[Fn],An[Ln]=Pn[Ln];return An.target||(An.target=Le),3===An.target.nodeType&&(An.target=An.target.parentNode),Dn.filter?Dn.filter(An,Pn):An},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==G()&&this.focus)return this.focus(),!1},delegateType:'focusin'},blur:{trigger:function(){if(this===G()&&this.blur)return this.blur(),!1},delegateType:'focusout'},click:{trigger:function(){if('checkbox'===this.type&&this.click&&qe.nodeName(this,'input'))return this.click(),!1},_default:function(An){return qe.nodeName(An.target,'a')}},beforeunload:{postDispatch:function(An){void 0!==An.result&&An.originalEvent&&(An.originalEvent.returnValue=An.result)}}}},qe.removeEvent=function(An,Fn,Ln){An.removeEventListener&&An.removeEventListener(Fn,Ln)},qe.Event=function(An,Fn){return this instanceof qe.Event?void(An&&An.type?(this.originalEvent=An,this.type=An.type,this.isDefaultPrevented=An.defaultPrevented||void 0===An.defaultPrevented&&!1===An.returnValue?X:Y):this.type=An,Fn&&qe.extend(this,Fn),this.timeStamp=An&&An.timeStamp||qe.now(),this[qe.expando]=!0):new qe.Event(An,Fn)},qe.Event.prototype={constructor:qe.Event,isDefaultPrevented:Y,isPropagationStopped:Y,isImmediatePropagationStopped:Y,isSimulated:!1,preventDefault:function(){var An=this.originalEvent;this.isDefaultPrevented=X,An&&!this.isSimulated&&An.preventDefault()},stopPropagation:function(){var An=this.originalEvent;this.isPropagationStopped=X,An&&!this.isSimulated&&An.stopPropagation()},stopImmediatePropagation:function(){var An=this.originalEvent;this.isImmediatePropagationStopped=X,An&&!this.isSimulated&&An.stopImmediatePropagation(),this.stopPropagation()}},qe.each({mouseenter:'mouseover',mouseleave:'mouseout',pointerenter:'pointerover',pointerleave:'pointerout'},function(An,Fn){qe.event.special[An]={delegateType:Fn,bindType:Fn,handle:function(Ln){var Rn=this,Pn=Ln.relatedTarget,Dn=Ln.handleObj,Nn;return Pn&&(Pn===Rn||qe.contains(Rn,Pn))||(Ln.type=Dn.origType,Nn=Dn.handler.apply(this,arguments),Ln.type=Fn),Nn}}}),qe.fn.extend({on:function(An,Fn,Ln,Nn){return K(this,An,Fn,Ln,Nn)},one:function(An,Fn,Ln,Nn){return K(this,An,Fn,Ln,Nn,1)},off:function(An,Fn,Ln){var Nn,Rn;if(An&&An.preventDefault&&An.handleObj)return Nn=An.handleObj,qe(An.delegateTarget).off(Nn.namespace?Nn.origType+'.'+Nn.namespace:Nn.origType,Nn.selector,Nn.handler),this;if('object'==typeof An){for(Rn in An)this.off(Rn,Fn,An[Rn]);return this}return(!1===Fn||'function'==typeof Fn)&&(Ln=Fn,Fn=void 0),!1===Ln&&(Ln=Y),this.each(function(){qe.event.remove(this,An,Ln,Fn)})}});var St=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,It=/<script|<style|<link/i,Tt=/checked\s*(?:[^=]|=\s*.checked.)/i,At=/^true\/(.*)/,Ft=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;qe.extend({htmlPrefilter:function(An){return An.replace(St,'<$1></$2>')},clone:function(An,Fn,Ln){var Mn=An.cloneNode(!0),jn=qe.contains(An.ownerDocument,An),Nn,Rn,Pn,Dn;if(!Oe.noCloneChecked&&(1===An.nodeType||11===An.nodeType)&&!qe.isXMLDoc(An))for(Dn=U(Mn),Pn=U(An),(Nn=0,Rn=Pn.length);Nn<Rn;Nn++)te(Pn[Nn],Dn[Nn]);if(Fn)if(Ln)for(Pn=Pn||U(An),Dn=Dn||U(Mn),(Nn=0,Rn=Pn.length);Nn<Rn;Nn++)ee(Pn[Nn],Dn[Nn]);else ee(An,Mn);return Dn=U(Mn,'script'),0<Dn.length&&z(Dn,!jn&&U(An,'script')),Mn},cleanData:function(An){for(var Rn=qe.event.special,Pn=0,Fn,Ln,Nn;void 0!==(Ln=An[Pn]);Pn++)if(ot(Ln)){if(Fn=Ln[rt.expando]){if(Fn.events)for(Nn in Fn.events)Rn[Nn]?qe.event.remove(Ln,Nn):qe.removeEvent(Ln,Nn,Fn.handle);Ln[rt.expando]=void 0}Ln[dt.expando]&&(Ln[dt.expando]=void 0)}}}),qe.fn.extend({domManip:ae,detach:function(An){return ie(this,An,!0)},remove:function(An){return ie(this,An)},text:function(An){return it(this,function(Fn){return void 0===Fn?qe.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=Fn)})},null,An,arguments.length)},append:function(){return ae(this,arguments,function(An){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var Fn=Q(this,An);Fn.appendChild(An)}})},prepend:function(){return ae(this,arguments,function(An){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var Fn=Q(this,An);Fn.insertBefore(An,Fn.firstChild)}})},before:function(){return ae(this,arguments,function(An){this.parentNode&&this.parentNode.insertBefore(An,this)})},after:function(){return ae(this,arguments,function(An){this.parentNode&&this.parentNode.insertBefore(An,this.nextSibling)})},empty:function(){for(var Fn=0,An;null!=(An=this[Fn]);Fn++)1===An.nodeType&&(qe.cleanData(U(An,!1)),An.textContent='');return this},clone:function(An,Fn){return An=null!=An&&An,Fn=null==Fn?An:Fn,this.map(function(){return qe.clone(this,An,Fn)})},html:function(An){return it(this,function(Fn){var Ln=this[0]||{},Nn=0,Rn=this.length;if(void 0===Fn&&1===Ln.nodeType)return Ln.innerHTML;if('string'==typeof Fn&&!It.test(Fn)&&!bt[(vt.exec(Fn)||['',''])[1].toLowerCase()]){Fn=qe.htmlPrefilter(Fn);try{for(;Nn<Rn;Nn++)Ln=this[Nn]||{},1===Ln.nodeType&&(qe.cleanData(U(Ln,!1)),Ln.innerHTML=Fn);Ln=0}catch(Pn){}}Ln&&this.empty().append(Fn)},null,An,arguments.length)},replaceWith:function(){var An=[];return ae(this,arguments,function(Fn){var Ln=this.parentNode;0>qe.inArray(this,An)&&(qe.cleanData(U(this)),Ln&&Ln.replaceChild(Fn,this))},An)}}),qe.each({appendTo:'append',prependTo:'prepend',insertBefore:'before',insertAfter:'after',replaceAll:'replaceWith'},function(An,Fn){qe.fn[An]=function(Ln){for(var Rn=[],Pn=qe(Ln),Dn=Pn.length-1,Mn=0,Nn;Mn<=Dn;Mn++)Nn=Mn===Dn?this:this.clone(!0),qe(Pn[Mn])[Fn](Nn),Pe.apply(Rn,Nn.get());return this.pushStack(Rn)}});var Nt={HTML:'block',BODY:'block'},Rt=/^margin/,Pt=new RegExp('^('+ht+')(?!px)[a-z%]+$','i'),Dt=function(An){var Fn=An.ownerDocument.defaultView;return Fn&&Fn.opener||(Fn=T),Fn.getComputedStyle(An)},Mt=function(An,Fn,Ln,Nn){var Dn={},Rn,Pn;for(Pn in Fn)Dn[Pn]=An.style[Pn],An.style[Pn]=Fn[Pn];for(Pn in Rn=Ln.apply(An,Nn||[]),Fn)An.style[Pn]=Dn[Pn];return Rn},jt=Le.documentElement,Lt;(function(){function An(){Dn.style.cssText='-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%',Dn.innerHTML='',jt.appendChild(Pn);var Mn=T.getComputedStyle(Dn);Fn='1%'!==Mn.top,Rn='2px'===Mn.marginLeft,Ln='4px'===Mn.width,Dn.style.marginRight='50%',Nn='4px'===Mn.marginRight,jt.removeChild(Pn)}var Pn=Le.createElement('div'),Dn=Le.createElement('div'),Fn,Ln,Nn,Rn;Dn.style&&(Dn.style.backgroundClip='content-box',Dn.cloneNode(!0).style.backgroundClip='',Oe.clearCloneStyle='content-box'===Dn.style.backgroundClip,Pn.style.cssText='border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute',Pn.appendChild(Dn),qe.extend(Oe,{pixelPosition:function(){return An(),Fn},boxSizingReliable:function(){return null==Ln&&An(),Ln},pixelMarginRight:function(){return null==Ln&&An(),Nn},reliableMarginLeft:function(){return null==Ln&&An(),Rn},reliableMarginRight:function(){var jn=Dn.appendChild(Le.createElement('div')),Mn;return jn.style.cssText=Dn.style.cssText='-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0',jn.style.marginRight=jn.style.width='0',Dn.style.width='1px',jt.appendChild(Pn),Mn=!parseFloat(T.getComputedStyle(jn).marginRight),jt.removeChild(Pn),Dn.removeChild(jn),Mn}}))})();var Wt=/^(none|table(?!-c[ea]).+)/,Ot={position:'absolute',visibility:'hidden',display:'block'},Bt={letterSpacing:'0',fontWeight:'400'},qt=['Webkit','O','Moz','ms'],_t=Le.createElement('div').style;qe.extend({cssHooks:{opacity:{get:function(An,Fn){if(Fn){var Ln=de(An,'opacity');return''===Ln?'1':Ln}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:'cssFloat'},style:function(An,Fn,Ln,Nn){if(An&&3!==An.nodeType&&8!==An.nodeType&&An.style){var Mn=qe.camelCase(Fn),jn=An.style,Rn,Pn,Dn;if(Fn=qe.cssProps[Mn]||(qe.cssProps[Mn]=le(Mn)||Mn),Dn=qe.cssHooks[Fn]||qe.cssHooks[Mn],void 0!==Ln){if(Pn=typeof Ln,'string'===Pn&&(Rn=gt.exec(Ln))&&Rn[1]&&(Ln=H(An,Fn,Rn),Pn='number'),null==Ln||Ln!==Ln)return;'number'===Pn&&(Ln+=Rn&&Rn[3]||(qe.cssNumber[Mn]?'':'px')),Oe.clearCloneStyle||''!==Ln||0!==Fn.indexOf('background')||(jn[Fn]='inherit'),Dn&&'set'in Dn&&void 0===(Ln=Dn.set(An,Ln,Nn))||(jn[Fn]=Ln)}else return Dn&&'get'in Dn&&void 0!==(Rn=Dn.get(An,!1,Nn))?Rn:jn[Fn]}},css:function(An,Fn,Ln,Nn){var Mn=qe.camelCase(Fn),Rn,Pn,Dn;return Fn=qe.cssProps[Mn]||(qe.cssProps[Mn]=le(Mn)||Mn),Dn=qe.cssHooks[Fn]||qe.cssHooks[Mn],Dn&&'get'in Dn&&(Rn=Dn.get(An,!0,Ln)),void 0==Rn&&(Rn=de(An,Fn,Nn)),'normal'===Rn&&Fn in Bt&&(Rn=Bt[Fn]),''===Ln||Ln?(Pn=parseFloat(Rn),!0===Ln||isFinite(Pn)?Pn||0:Rn):Rn}}),qe.each(['height','width'],function(An,Fn){qe.cssHooks[Fn]={get:function(Ln,Nn,Rn){if(Nn)return Wt.test(qe.css(Ln,'display'))&&0===Ln.offsetWidth?Mt(Ln,Ot,function(){return ue(Ln,Fn,Rn)}):ue(Ln,Fn,Rn)},set:function(Ln,Nn,Rn){var Dn=Rn&&Dt(Ln),Mn=Rn&&pe(Ln,Fn,Rn,'border-box'===qe.css(Ln,'boxSizing',!1,Dn),Dn),Pn;return Mn&&(Pn=gt.exec(Nn))&&'px'!==(Pn[3]||'px')&&(Ln.style[Fn]=Nn,Nn=qe.css(Ln,Fn)),ce(Ln,Nn,Mn)}}}),qe.cssHooks.marginLeft=se(Oe.reliableMarginLeft,function(An,Fn){if(Fn)return(parseFloat(de(An,'marginLeft'))||An.getBoundingClientRect().left-Mt(An,{marginLeft:0},function(){return An.getBoundingClientRect().left}))+'px'}),qe.cssHooks.marginRight=se(Oe.reliableMarginRight,function(An,Fn){if(Fn)return Mt(An,{display:'inline-block'},de,[An,'marginRight'])}),qe.each({margin:'',padding:'',border:'Width'},function(An,Fn){qe.cssHooks[An+Fn]={expand:function(Ln){for(var Nn=0,Rn={},Pn='string'==typeof Ln?Ln.split(' '):[Ln];4>Nn;Nn++)Rn[An+mt[Nn]+Fn]=Pn[Nn]||Pn[Nn-2]||Pn[0];return Rn}},Rt.test(An)||(qe.cssHooks[An+Fn].set=ce)}),qe.fn.extend({css:function(An,Fn){return it(this,function(Ln,Nn,Rn){var Mn={},jn=0,Pn,Dn;if(qe.isArray(Nn)){for(Pn=Dt(Ln),Dn=Nn.length;jn<Dn;jn++)Mn[Nn[jn]]=qe.css(Ln,Nn[jn],!1,Pn);return Mn}return void 0===Rn?qe.css(Ln,Nn):qe.style(Ln,Nn,Rn)},An,Fn,1<arguments.length)},show:function(){return he(this,!0)},hide:function(){return he(this)},toggle:function(An){return'boolean'==typeof An?An?this.show():this.hide():this.each(function(){ft(this)?qe(this).show():qe(this).hide()})}}),qe.Tween=ge,ge.prototype={constructor:ge,init:function(An,Fn,Ln,Nn,Rn,Pn){this.elem=An,this.prop=Ln,this.easing=Rn||qe.easing._default,this.options=Fn,this.start=this.now=this.cur(),this.end=Nn,this.unit=Pn||(qe.cssNumber[Ln]?'':'px')},cur:function(){var An=ge.propHooks[this.prop];return An&&An.get?An.get(this):ge.propHooks._default.get(this)},run:function(An){var Ln=ge.propHooks[this.prop],Fn;return this.pos=this.options.duration?Fn=qe.easing[this.easing](An,this.options.duration*An,0,1,this.options.duration):Fn=An,this.now=(this.end-this.start)*Fn+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),Ln&&Ln.set?Ln.set(this):ge.propHooks._default.set(this),this}},ge.prototype.init.prototype=ge.prototype,ge.propHooks={_default:{get:function(An){var Fn;return 1!==An.elem.nodeType||null!=An.elem[An.prop]&&null==An.elem.style[An.prop]?An.elem[An.prop]:(Fn=qe.css(An.elem,An.prop,''),Fn&&'auto'!==Fn?Fn:0)},set:function(An){qe.fx.step[An.prop]?qe.fx.step[An.prop](An):1===An.elem.nodeType&&(null!=An.elem.style[qe.cssProps[An.prop]]||qe.cssHooks[An.prop])?qe.style(An.elem,An.prop,An.now+An.unit):An.elem[An.prop]=An.now}}},ge.propHooks.scrollTop=ge.propHooks.scrollLeft={set:function(An){An.elem.nodeType&&An.elem.parentNode&&(An.elem[An.prop]=An.now)}},qe.easing={linear:function(An){return An},swing:function(An){return 0.5-Math.cos(An*Math.PI)/2},_default:'swing'},qe.fx=ge.prototype.init,qe.fx.step={};var zt=/^(?:toggle|show|hide)$/,Vt=/queueHooks$/,Ht,Ut;qe.Animation=qe.extend(be,{tweeners:{'*':[function(An,Fn){var Ln=this.createTween(An,Fn);return H(Ln.elem,An,gt.exec(Fn),Ln),Ln}]},tweener:function(An,Fn){qe.isFunction(An)?(Fn=An,An=['*']):An=An.match(nt);for(var Nn=0,Rn=An.length,Ln;Nn<Rn;Nn++)Ln=An[Nn],be.tweeners[Ln]=be.tweeners[Ln]||[],be.tweeners[Ln].unshift(Fn)},prefilters:[function(An,Fn,Ln){var Bn=this,qn={},_n=An.style,Hn=An.nodeType&&ft(An),Un=rt.get(An,'fxshow'),Nn,Rn,Pn,Dn,Mn,jn,Wn,On;for(Nn in Ln.queue||(Mn=qe._queueHooks(An,'fx'),null==Mn.unqueued&&(Mn.unqueued=0,jn=Mn.empty.fire,Mn.empty.fire=function(){Mn.unqueued||jn()}),Mn.unqueued++,Bn.always(function(){Bn.always(function(){Mn.unqueued--,qe.queue(An,'fx').length||Mn.empty.fire()})})),1===An.nodeType&&('height'in Fn||'width'in Fn)&&(Ln.overflow=[_n.overflow,_n.overflowX,_n.overflowY],Wn=qe.css(An,'display'),On='none'===Wn?rt.get(An,'olddisplay')||re(An.nodeName):Wn,'inline'===On&&'none'===qe.css(An,'float')&&(_n.display='inline-block')),Ln.overflow&&(_n.overflow='hidden',Bn.always(function(){_n.overflow=Ln.overflow[0],_n.overflowX=Ln.overflow[1],_n.overflowY=Ln.overflow[2]})),Fn)if(Rn=Fn[Nn],zt.exec(Rn)){if(delete Fn[Nn],Pn=Pn||'toggle'===Rn,Rn===(Hn?'hide':'show'))if('show'===Rn&&Un&&void 0!==Un[Nn])Hn=!0;else continue;qn[Nn]=Un&&Un[Nn]||qe.style(An,Nn)}else Wn=void 0;if(!qe.isEmptyObject(qn))for(Nn in Un?'hidden'in Un&&(Hn=Un.hidden):Un=rt.access(An,'fxshow',{}),Pn&&(Un.hidden=!Hn),Hn?qe(An).show():Bn.done(function(){qe(An).hide()}),Bn.done(function(){for(var zn in rt.remove(An,'fxshow'),qn)qe.style(An,zn,qn[zn])}),qn)Dn=ye(Hn?Un[Nn]:0,Nn,Bn),Nn in Un||(Un[Nn]=Dn.start,Hn&&(Dn.end=Dn.start,Dn.start='width'===Nn||'height'===Nn?1:0));else'inline'===('none'===Wn?re(An.nodeName):Wn)&&(_n.display=Wn)}],prefilter:function(An,Fn){Fn?be.prefilters.unshift(An):be.prefilters.push(An)}}),qe.speed=function(An,Fn,Ln){var Nn=An&&'object'==typeof An?qe.extend({},An):{complete:Ln||!Ln&&Fn||qe.isFunction(An)&&An,duration:An,easing:Ln&&Fn||Fn&&!qe.isFunction(Fn)&&Fn};return Nn.duration=qe.fx.off?0:'number'==typeof Nn.duration?Nn.duration:Nn.duration in qe.fx.speeds?qe.fx.speeds[Nn.duration]:qe.fx.speeds._default,(null==Nn.queue||!0===Nn.queue)&&(Nn.queue='fx'),Nn.old=Nn.complete,Nn.complete=function(){qe.isFunction(Nn.old)&&Nn.old.call(this),Nn.queue&&qe.dequeue(this,Nn.queue)},Nn},qe.fn.extend({fadeTo:function(An,Fn,Ln,Nn){return this.filter(ft).css('opacity',0).show().end().animate({opacity:Fn},An,Ln,Nn)},animate:function(An,Fn,Ln,Nn){var Rn=qe.isEmptyObject(An),Pn=qe.speed(Fn,Ln,Nn),Dn=function(){var Mn=be(this,qe.extend({},An),Pn);(Rn||rt.get(this,'finish'))&&Mn.stop(!0)};return Dn.finish=Dn,Rn||!1===Pn.queue?this.each(Dn):this.queue(Pn.queue,Dn)},stop:function(An,Fn,Ln){var Nn=function(Rn){var Pn=Rn.stop;delete Rn.stop,Pn(Ln)};return'string'!=typeof An&&(Ln=Fn,Fn=An,An=void 0),Fn&&!1!==An&&this.queue(An||'fx',[]),this.each(function(){var Rn=!0,Pn=null!=An&&An+'queueHooks',Dn=qe.timers,Mn=rt.get(this);if(Pn)Mn[Pn]&&Mn[Pn].stop&&Nn(Mn[Pn]);else for(Pn in Mn)Mn[Pn]&&Mn[Pn].stop&&Vt.test(Pn)&&Nn(Mn[Pn]);for(Pn=Dn.length;Pn--;)Dn[Pn].elem===this&&(null==An||Dn[Pn].queue===An)&&(Dn[Pn].anim.stop(Ln),Rn=!1,Dn.splice(Pn,1));(Rn||!Ln)&&qe.dequeue(this,An)})},finish:function(An){return!1!==An&&(An=An||'fx'),this.each(function(){var Ln=rt.get(this),Nn=Ln[An+'queue'],Rn=Ln[An+'queueHooks'],Pn=qe.timers,Dn=Nn?Nn.length:0,Fn;for(Ln.finish=!0,qe.queue(this,An,[]),Rn&&Rn.stop&&Rn.stop.call(this,!0),Fn=Pn.length;Fn--;)Pn[Fn].elem===this&&Pn[Fn].queue===An&&(Pn[Fn].anim.stop(!0),Pn.splice(Fn,1));for(Fn=0;Fn<Dn;Fn++)Nn[Fn]&&Nn[Fn].finish&&Nn[Fn].finish.call(this);delete Ln.finish})}}),qe.each(['toggle','show','hide'],function(An,Fn){var Ln=qe.fn[Fn];qe.fn[Fn]=function(Nn,Rn,Pn){return null==Nn||'boolean'==typeof Nn?Ln.apply(this,arguments):this.animate(fe(Fn,!0),Nn,Rn,Pn)}}),qe.each({slideDown:fe('show'),slideUp:fe('hide'),slideToggle:fe('toggle'),fadeIn:{opacity:'show'},fadeOut:{opacity:'hide'},fadeToggle:{opacity:'toggle'}},function(An,Fn){qe.fn[An]=function(Ln,Nn,Rn){return this.animate(Fn,Ln,Nn,Rn)}}),qe.timers=[],qe.fx.tick=function(){var Fn=0,Ln=qe.timers,An;for(Ht=qe.now();Fn<Ln.length;Fn++)An=Ln[Fn],An()||Ln[Fn]!==An||Ln.splice(Fn--,1);Ln.length||qe.fx.stop(),Ht=void 0},qe.fx.timer=function(An){qe.timers.push(An),An()?qe.fx.start():qe.timers.pop()},qe.fx.interval=13,qe.fx.start=function(){Ut||(Ut=T.setInterval(qe.fx.tick,qe.fx.interval))},qe.fx.stop=function(){T.clearInterval(Ut),Ut=null},qe.fx.speeds={slow:600,fast:200,_default:400},qe.fn.delay=function(An,Fn){return An=qe.fx?qe.fx.speeds[An]||An:An,Fn=Fn||'fx',this.queue(Fn,function(Ln,Nn){var Rn=T.setTimeout(Ln,An);Nn.stop=function(){T.clearTimeout(Rn)}})},function(){var An=Le.createElement('input'),Fn=Le.createElement('select'),Ln=Fn.appendChild(Le.createElement('option'));An.type='checkbox',Oe.checkOn=''!==An.value,Oe.optSelected=Ln.selected,Fn.disabled=!0,Oe.optDisabled=!Ln.disabled,An=Le.createElement('input'),An.value='t',An.type='radio',Oe.radioValue='t'===An.value}();var Yt=qe.expr.attrHandle,Xt;qe.fn.extend({attr:function(An,Fn){return it(this,qe.attr,An,Fn,1<arguments.length)},removeAttr:function(An){return this.each(function(){qe.removeAttr(this,An)})}}),qe.extend({attr:function(An,Fn,Ln){var Pn=An.nodeType,Nn,Rn;if(3!==Pn&&8!==Pn&&2!==Pn)return'undefined'==typeof An.getAttribute?qe.prop(An,Fn,Ln):(1===Pn&&qe.isXMLDoc(An)||(Fn=Fn.toLowerCase(),Rn=qe.attrHooks[Fn]||(qe.expr.match.bool.test(Fn)?Xt:void 0)),void 0!==Ln)?null===Ln?void qe.removeAttr(An,Fn):Rn&&'set'in Rn&&void 0!==(Nn=Rn.set(An,Ln,Fn))?Nn:(An.setAttribute(Fn,Ln+''),Ln):Rn&&'get'in Rn&&null!==(Nn=Rn.get(An,Fn))?Nn:(Nn=qe.find.attr(An,Fn),null==Nn?void 0:Nn)},attrHooks:{type:{set:function(An,Fn){if(!Oe.radioValue&&'radio'===Fn&&qe.nodeName(An,'input')){var Ln=An.value;return An.setAttribute('type',Fn),Ln&&(An.value=Ln),Fn}}}},removeAttr:function(An,Fn){var Rn=0,Pn=Fn&&Fn.match(nt),Ln,Nn;if(Pn&&1===An.nodeType)for(;Ln=Pn[Rn++];)Nn=qe.propFix[Ln]||Ln,qe.expr.match.bool.test(Ln)&&(An[Nn]=!1),An.removeAttribute(Ln)}}),Xt={set:function(An,Fn,Ln){return!1===Fn?qe.removeAttr(An,Ln):An.setAttribute(Ln,Ln),Ln}},qe.each(qe.expr.match.bool.source.match(/\w+/g),function(An,Fn){var Ln=Yt[Fn]||qe.find.attr;Yt[Fn]=function(Nn,Rn,Pn){var Dn,Mn;return Pn||(Mn=Yt[Rn],Yt[Rn]=Dn,Dn=null==Ln(Nn,Rn,Pn)?null:Rn.toLowerCase(),Yt[Rn]=Mn),Dn}});var Gt=/^(?:input|select|textarea|button)$/i,Kt=/^(?:a|area)$/i;qe.fn.extend({prop:function(An,Fn){return it(this,qe.prop,An,Fn,1<arguments.length)},removeProp:function(An){return this.each(function(){delete this[qe.propFix[An]||An]})}}),qe.extend({prop:function(An,Fn,Ln){var Pn=An.nodeType,Nn,Rn;if(3!==Pn&&8!==Pn&&2!==Pn)return 1===Pn&&qe.isXMLDoc(An)||(Fn=qe.propFix[Fn]||Fn,Rn=qe.propHooks[Fn]),void 0===Ln?Rn&&'get'in Rn&&null!==(Nn=Rn.get(An,Fn))?Nn:An[Fn]:Rn&&'set'in Rn&&void 0!==(Nn=Rn.set(An,Ln,Fn))?Nn:An[Fn]=Ln},propHooks:{tabIndex:{get:function(An){var Fn=qe.find.attr(An,'tabindex');return Fn?parseInt(Fn,10):Gt.test(An.nodeName)||Kt.test(An.nodeName)&&An.href?0:-1}}},propFix:{'for':'htmlFor','class':'className'}}),Oe.optSelected||(qe.propHooks.selected={get:function(An){var Fn=An.parentNode;return Fn&&Fn.parentNode&&Fn.parentNode.selectedIndex,null},set:function(An){var Fn=An.parentNode;Fn&&(Fn.selectedIndex,Fn.parentNode&&Fn.parentNode.selectedIndex)}}),qe.each(['tabIndex','readOnly','maxLength','cellSpacing','cellPadding','rowSpan','colSpan','useMap','frameBorder','contentEditable'],function(){qe.propFix[this.toLowerCase()]=this});var $t=/[\t\r\n\f]/g;qe.fn.extend({addClass:function(An){var jn=0,Fn,Ln,Nn,Rn,Pn,Dn,Mn;if(qe.isFunction(An))return this.each(function(Wn){qe(this).addClass(An.call(this,Wn,we(this)))});if('string'==typeof An&&An)for(Fn=An.match(nt)||[];Ln=this[jn++];)if(Rn=we(Ln),Nn=1===Ln.nodeType&&(' '+Rn+' ').replace($t,' '),Nn){for(Dn=0;Pn=Fn[Dn++];)0>Nn.indexOf(' '+Pn+' ')&&(Nn+=Pn+' ');Mn=qe.trim(Nn),Rn!=Mn&&Ln.setAttribute('class',Mn)}return this},removeClass:function(An){var jn=0,Fn,Ln,Nn,Rn,Pn,Dn,Mn;if(qe.isFunction(An))return this.each(function(Wn){qe(this).removeClass(An.call(this,Wn,we(this)))});if(!arguments.length)return this.attr('class','');if('string'==typeof An&&An)for(Fn=An.match(nt)||[];Ln=this[jn++];)if(Rn=we(Ln),Nn=1===Ln.nodeType&&(' '+Rn+' ').replace($t,' '),Nn){for(Dn=0;Pn=Fn[Dn++];)for(;-1<Nn.indexOf(' '+Pn+' ');)Nn=Nn.replace(' '+Pn+' ',' ');Mn=qe.trim(Nn),Rn!=Mn&&Ln.setAttribute('class',Mn)}return this},toggleClass:function(An,Fn){var Ln=typeof An;return'boolean'==typeof Fn&&'string'==Ln?Fn?this.addClass(An):this.removeClass(An):qe.isFunction(An)?this.each(function(Nn){qe(this).toggleClass(An.call(this,Nn,we(this),Fn),Fn)}):this.each(function(){var Nn,Rn,Pn,Dn;if('string'==Ln)for(Rn=0,Pn=qe(this),Dn=An.match(nt)||[];Nn=Dn[Rn++];)Pn.hasClass(Nn)?Pn.removeClass(Nn):Pn.addClass(Nn);else(void 0===An||'boolean'==Ln)&&(Nn=we(this),Nn&&rt.set(this,'__className__',Nn),this.setAttribute&&this.setAttribute('class',Nn||!1===An?'':rt.get(this,'__className__')||''))})},hasClass:function(An){var Nn=0,Fn,Ln;for(Fn=' '+An+' ';Ln=this[Nn++];)if(1===Ln.nodeType&&-1<(' '+we(Ln)+' ').replace($t,' ').indexOf(Fn))return!0;return!1}});var Qt=/\r/g,Jt=/[\x20\t\r\n\f]+/g;qe.fn.extend({val:function(An){var Rn=this[0],Fn,Ln,Nn;return arguments.length?(Nn=qe.isFunction(An),this.each(function(Pn){var Dn;1!==this.nodeType||(Dn=Nn?An.call(this,Pn,qe(this).val()):An,null==Dn?Dn='':'number'==typeof Dn?Dn+='':qe.isArray(Dn)&&(Dn=qe.map(Dn,function(Mn){return null==Mn?'':Mn+''})),Fn=qe.valHooks[this.type]||qe.valHooks[this.nodeName.toLowerCase()],(!Fn||!('set'in Fn)||void 0===Fn.set(this,Dn,'value'))&&(this.value=Dn))})):Rn?(Fn=qe.valHooks[Rn.type]||qe.valHooks[Rn.nodeName.toLowerCase()],Fn&&'get'in Fn&&void 0!==(Ln=Fn.get(Rn,'value')))?Ln:(Ln=Rn.value,'string'==typeof Ln?Ln.replace(Qt,''):null==Ln?'':Ln):void 0}}),qe.extend({valHooks:{option:{get:function(An){var Fn=qe.find.attr(An,'value');return null==Fn?qe.trim(qe.text(An)).replace(Jt,' '):Fn}},select:{get:function(An){for(var Nn=An.options,Rn=An.selectedIndex,Pn='select-one'===An.type||0>Rn,Dn=Pn?null:[],Mn=Pn?Rn+1:Nn.length,jn=0>Rn?Mn:Pn?Rn:0,Fn,Ln;jn<Mn;jn++)if(Ln=Nn[jn],(Ln.selected||jn===Rn)&&(Oe.optDisabled?!Ln.disabled:null===Ln.getAttribute('disabled'))&&(!Ln.parentNode.disabled||!qe.nodeName(Ln.parentNode,'optgroup'))){if(Fn=qe(Ln).val(),Pn)return Fn;Dn.push(Fn)}return Dn},set:function(An,Fn){for(var Rn=An.options,Pn=qe.makeArray(Fn),Dn=Rn.length,Ln,Nn;Dn--;)Nn=Rn[Dn],(Nn.selected=-1<qe.inArray(qe.valHooks.option.get(Nn),Pn))&&(Ln=!0);return Ln||(An.selectedIndex=-1),Pn}}}}),qe.each(['radio','checkbox'],function(){qe.valHooks[this]={set:function(An,Fn){if(qe.isArray(Fn))return An.checked=-1<qe.inArray(qe(An).val(),Fn)}},Oe.checkOn||(qe.valHooks[this].get=function(An){return null===An.getAttribute('value')?'on':An.value})});var Zt=/^(?:focusinfocus|focusoutblur)$/;qe.extend(qe.event,{trigger:function(An,Fn,Ln,Nn){var Bn=[Ln||Le],qn=We.call(An,'type')?An.type:An,_n=We.call(An,'namespace')?An.namespace.split('.'):[],Rn,Pn,Dn,Mn,jn,Wn,On;if((Pn=Dn=Ln=Ln||Le,3!==Ln.nodeType&&8!==Ln.nodeType)&&!Zt.test(qn+qe.event.triggered)&&(-1<qn.indexOf('.')&&(_n=qn.split('.'),qn=_n.shift(),_n.sort()),jn=0>qn.indexOf(':')&&'on'+qn,An=An[qe.expando]?An:new qe.Event(qn,'object'==typeof An&&An),An.isTrigger=Nn?2:3,An.namespace=_n.join('.'),An.rnamespace=An.namespace?new RegExp('(^|\\.)'+_n.join('\\.(?:.*\\.|)')+'(\\.|$)'):null,An.result=void 0,An.target||(An.target=Ln),Fn=null==Fn?[An]:qe.makeArray(Fn,[An]),On=qe.event.special[qn]||{},Nn||!On.trigger||!1!==On.trigger.apply(Ln,Fn))){if(!Nn&&!On.noBubble&&!qe.isWindow(Ln)){for(Mn=On.delegateType||qn,Zt.test(Mn+qn)||(Pn=Pn.parentNode);Pn;Pn=Pn.parentNode)Bn.push(Pn),Dn=Pn;Dn===(Ln.ownerDocument||Le)&&Bn.push(Dn.defaultView||Dn.parentWindow||T)}for(Rn=0;(Pn=Bn[Rn++])&&!An.isPropagationStopped();)An.type=1<Rn?Mn:On.bindType||qn,Wn=(rt.get(Pn,'events')||{})[An.type]&&rt.get(Pn,'handle'),Wn&&Wn.apply(Pn,Fn),Wn=jn&&Pn[jn],Wn&&Wn.apply&&ot(Pn)&&(An.result=Wn.apply(Pn,Fn),!1===An.result&&An.preventDefault());return An.type=qn,Nn||An.isDefaultPrevented()||On._default&&!1!==On._default.apply(Bn.pop(),Fn)||!ot(Ln)||!jn||!qe.isFunction(Ln[qn])||qe.isWindow(Ln)||(Dn=Ln[jn],Dn&&(Ln[jn]=null),qe.event.triggered=qn,Ln[qn](),qe.event.triggered=void 0,Dn&&(Ln[jn]=Dn)),An.result}},simulate:function(An,Fn,Ln){var Nn=qe.extend(new qe.Event,Ln,{type:An,isSimulated:!0});qe.event.trigger(Nn,null,Fn)}}),qe.fn.extend({trigger:function(An,Fn){return this.each(function(){qe.event.trigger(An,Fn,this)})},triggerHandler:function(An,Fn){var Ln=this[0];if(Ln)return qe.event.trigger(An,Fn,Ln,!0)}}),qe.each('blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu'.split(' '),function(An,Fn){qe.fn[Fn]=function(Ln,Nn){return 0<arguments.length?this.on(Fn,null,Ln,Nn):this.trigger(Fn)}}),qe.fn.extend({hover:function(An,Fn){return this.mouseenter(An).mouseleave(Fn||An)}}),Oe.focusin='onfocusin'in T,Oe.focusin||qe.each({focus:'focusin',blur:'focusout'},function(An,Fn){var Ln=function(Nn){qe.event.simulate(Fn,Nn.target,qe.event.fix(Nn))};qe.event.special[Fn]={setup:function(){var Nn=this.ownerDocument||this,Rn=rt.access(Nn,Fn);Rn||Nn.addEventListener(An,Ln,!0),rt.access(Nn,Fn,(Rn||0)+1)},teardown:function(){var Nn=this.ownerDocument||this,Rn=rt.access(Nn,Fn)-1;Rn?rt.access(Nn,Fn,Rn):(Nn.removeEventListener(An,Ln,!0),rt.remove(Nn,Fn))}}});var en=T.location,tn=qe.now(),nn=/\?/;qe.parseJSON=function(An){return JSON.parse(An+'')},qe.parseXML=function(An){var Fn;if(!An||'string'!=typeof An)return null;try{Fn=new T.DOMParser().parseFromString(An,'text/xml')}catch(Ln){Fn=void 0}return(!Fn||Fn.getElementsByTagName('parsererror').length)&&qe.error('Invalid XML: '+An),Fn};var an=/#.*$/,rn=/([?&])_=[^&]*/,dn=/^(.*?):[ \t]*([^\r\n]*)$/mg,sn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ln=/^(?:GET|HEAD)$/,cn=/^\/\//,pn={},un={},hn='*/'.concat('*'),gn=Le.createElement('a');gn.href=en.href,qe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:en.href,type:'GET',isLocal:sn.test(en.protocol),global:!0,processData:!0,async:!0,contentType:'application/x-www-form-urlencoded; charset=UTF-8',accepts:{'*':hn,text:'text/plain',html:'text/html',xml:'application/xml, text/xml',json:'application/json, text/javascript'},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:'responseXML',text:'responseText',json:'responseJSON'},converters:{'* text':String,'text html':!0,'text json':qe.parseJSON,'text xml':qe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(An,Fn){return Fn?Ce(Ce(An,qe.ajaxSettings),Fn):Ce(qe.ajaxSettings,An)},ajaxPrefilter:Ee(pn),ajaxTransport:Ee(un),ajax:function(An,Fn){function Ln($n,Qn,Jn,Zn){var ra=Qn,ta,na,aa,ia,oa;2===Yn||(Yn=2,Mn&&T.clearTimeout(Mn),Nn=void 0,Pn=Zn||'',Kn.readyState=0<$n?4:0,ta=200<=$n&&300>$n||304===$n,Jn&&(ia=Se(Bn,Kn,Jn)),ia=Ie(Bn,ia,Kn,ta),ta?(Bn.ifModified&&(oa=Kn.getResponseHeader('Last-Modified'),oa&&(qe.lastModified[Rn]=oa),oa=Kn.getResponseHeader('etag'),oa&&(qe.etag[Rn]=oa)),204===$n||'HEAD'===Bn.type?ra='nocontent':304===$n?ra='notmodified':(ra=ia.state,na=ia.data,aa=ia.error,ta=!aa)):(aa=ra,($n||!ra)&&(ra='error',0>$n&&($n=0))),Kn.status=$n,Kn.statusText=(Qn||ra)+'',ta?Hn.resolveWith(qn,[na,ra,Kn]):Hn.rejectWith(qn,[Kn,ra,aa]),Kn.statusCode(zn),zn=void 0,Wn&&_n.trigger(ta?'ajaxSuccess':'ajaxError',[Kn,Bn,ta?na:aa]),Un.fireWith(qn,[Kn,ra]),Wn&&(_n.trigger('ajaxComplete',[Kn,Bn]),! --qe.active&&qe.event.trigger('ajaxStop')))}'object'==typeof An&&(Fn=An,An=void 0),Fn=Fn||{};var Bn=qe.ajaxSetup({},Fn),qn=Bn.context||Bn,_n=Bn.context&&(qn.nodeType||qn.jquery)?qe(qn):qe.event,Hn=qe.Deferred(),Un=qe.Callbacks('once memory'),zn=Bn.statusCode||{},Vn={},Xn={},Yn=0,Gn='canceled',Kn={readyState:0,getResponseHeader:function($n){var Qn;if(2==Yn){if(!Dn)for(Dn={};Qn=dn.exec(Pn);)Dn[Qn[1].toLowerCase()]=Qn[2];Qn=Dn[$n.toLowerCase()]}return null==Qn?null:Qn},getAllResponseHeaders:function(){return 2==Yn?Pn:null},setRequestHeader:function($n,Qn){var Jn=$n.toLowerCase();return Yn||($n=Xn[Jn]=Xn[Jn]||$n,Vn[$n]=Qn),this},overrideMimeType:function($n){return Yn||(Bn.mimeType=$n),this},statusCode:function($n){if($n)if(2>Yn)for(var Qn in $n)zn[Qn]=[zn[Qn],$n[Qn]];else Kn.always($n[Kn.status]);return this},abort:function($n){var Qn=$n||Gn;return Nn&&Nn.abort(Qn),Ln(0,Qn),this}},Nn,Rn,Pn,Dn,Mn,jn,Wn,On;if(Hn.promise(Kn).complete=Un.add,Kn.success=Kn.done,Kn.error=Kn.fail,Bn.url=((An||Bn.url||en.href)+'').replace(an,'').replace(cn,en.protocol+'//'),Bn.type=Fn.method||Fn.type||Bn.method||Bn.type,Bn.dataTypes=qe.trim(Bn.dataType||'*').toLowerCase().match(nt)||[''],null==Bn.crossDomain){jn=Le.createElement('a');try{jn.href=Bn.url,jn.href=jn.href,Bn.crossDomain=gn.protocol+'//'+gn.host!=jn.protocol+'//'+jn.host}catch($n){Bn.crossDomain=!0}}if(Bn.data&&Bn.processData&&'string'!=typeof Bn.data&&(Bn.data=qe.param(Bn.data,Bn.traditional)),ke(pn,Bn,Fn,Kn),2==Yn)return Kn;for(On in Wn=qe.event&&Bn.global,Wn&&0==qe.active++&&qe.event.trigger('ajaxStart'),Bn.type=Bn.type.toUpperCase(),Bn.hasContent=!ln.test(Bn.type),Rn=Bn.url,Bn.hasContent||(Bn.data&&(Rn=Bn.url+=(nn.test(Rn)?'&':'?')+Bn.data,delete Bn.data),!1===Bn.cache&&(Bn.url=rn.test(Rn)?Rn.replace(rn,'$1_='+tn++):Rn+(nn.test(Rn)?'&':'?')+'_='+tn++)),Bn.ifModified&&(qe.lastModified[Rn]&&Kn.setRequestHeader('If-Modified-Since',qe.lastModified[Rn]),qe.etag[Rn]&&Kn.setRequestHeader('If-None-Match',qe.etag[Rn])),(Bn.data&&Bn.hasContent&&!1!==Bn.contentType||Fn.contentType)&&Kn.setRequestHeader('Content-Type',Bn.contentType),Kn.setRequestHeader('Accept',Bn.dataTypes[0]&&Bn.accepts[Bn.dataTypes[0]]?Bn.accepts[Bn.dataTypes[0]]+('*'===Bn.dataTypes[0]?'':', '+hn+'; q=0.01'):Bn.accepts['*']),Bn.headers)Kn.setRequestHeader(On,Bn.headers[On]);if(Bn.beforeSend&&(!1===Bn.beforeSend.call(qn,Kn,Bn)||2==Yn))return Kn.abort();for(On in Gn='abort',{success:1,error:1,complete:1})Kn[On](Bn[On]);if(Nn=ke(un,Bn,Fn,Kn),!Nn)Ln(-1,'No Transport');else{if(Kn.readyState=1,Wn&&_n.trigger('ajaxSend',[Kn,Bn]),2==Yn)return Kn;Bn.async&&0<Bn.timeout&&(Mn=T.setTimeout(function(){Kn.abort('timeout')},Bn.timeout));try{Yn=1,Nn.send(Vn,Ln)}catch($n){if(2>Yn)Ln(-1,$n);else throw $n}}return Kn},getJSON:function(An,Fn,Ln){return qe.get(An,Fn,Ln,'json')},getScript:function(An,Fn){return qe.get(An,void 0,Fn,'script')}}),qe.each(['get','post'],function(An,Fn){qe[Fn]=function(Ln,Nn,Rn,Pn){return qe.isFunction(Nn)&&(Pn=Pn||Rn,Rn=Nn,Nn=void 0),qe.ajax(qe.extend({url:Ln,type:Fn,dataType:Pn,data:Nn,success:Rn},qe.isPlainObject(Ln)&&Ln))}}),qe._evalUrl=function(An){return qe.ajax({url:An,type:'GET',dataType:'script',async:!1,global:!1,throws:!0})},qe.fn.extend({wrapAll:function(An){var Fn;return qe.isFunction(An)?this.each(function(Ln){qe(this).wrapAll(An.call(this,Ln))}):(this[0]&&(Fn=qe(An,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&Fn.insertBefore(this[0]),Fn.map(function(){for(var Ln=this;Ln.firstElementChild;)Ln=Ln.firstElementChild;return Ln}).append(this)),this)},wrapInner:function(An){return qe.isFunction(An)?this.each(function(Fn){qe(this).wrapInner(An.call(this,Fn))}):this.each(function(){var Fn=qe(this),Ln=Fn.contents();Ln.length?Ln.wrapAll(An):Fn.append(An)})},wrap:function(An){var Fn=qe.isFunction(An);return this.each(function(Ln){qe(this).wrapAll(Fn?An.call(this,Ln):An)})},unwrap:function(){return this.parent().each(function(){qe.nodeName(this,'body')||qe(this).replaceWith(this.childNodes)}).end()}}),qe.expr.filters.hidden=function(An){return!qe.expr.filters.visible(An)},qe.expr.filters.visible=function(An){return 0<An.offsetWidth||0<An.offsetHeight||0<An.getClientRects().length};var mn=/%20/g,yn=/\[\]$/,vn=/\r?\n/g,xn=/^(?:submit|button|image|reset|file)$/i,bn=/^(?:input|select|textarea|keygen)/i;qe.param=function(An,Fn){var Nn=[],Rn=function(Pn,Dn){Dn=qe.isFunction(Dn)?Dn():null==Dn?'':Dn,Nn[Nn.length]=encodeURIComponent(Pn)+'='+encodeURIComponent(Dn)},Ln;if(void 0===Fn&&(Fn=qe.ajaxSettings&&qe.ajaxSettings.traditional),qe.isArray(An)||An.jquery&&!qe.isPlainObject(An))qe.each(An,function(){Rn(this.name,this.value)});else for(Ln in An)Te(Ln,An[Ln],Fn,Rn);return Nn.join('&').replace(mn,'+')},qe.fn.extend({serialize:function(){return qe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var An=qe.prop(this,'elements');return An?qe.makeArray(An):this}).filter(function(){var An=this.type;return this.name&&!qe(this).is(':disabled')&&bn.test(this.nodeName)&&!xn.test(An)&&(this.checked||!yt.test(An))}).map(function(An,Fn){var Ln=qe(this).val();return null==Ln?null:qe.isArray(Ln)?qe.map(Ln,function(Nn){return{name:Fn.name,value:Nn.replace(vn,'\r\n')}}):{name:Fn.name,value:Ln.replace(vn,'\r\n')}}).get()}}),qe.ajaxSettings.xhr=function(){try{return new T.XMLHttpRequest}catch(An){}};var wn={0:200,1223:204},En=qe.ajaxSettings.xhr();Oe.cors=!!En&&'withCredentials'in En,Oe.ajax=En=!!En,qe.ajaxTransport(function(An){var Fn,Ln;if(Oe.cors||En&&!An.crossDomain)return{send:function(Nn,Rn){var Dn=An.xhr(),Pn;if(Dn.open(An.type,An.url,An.async,An.username,An.password),An.xhrFields)for(Pn in An.xhrFields)Dn[Pn]=An.xhrFields[Pn];for(Pn in An.mimeType&&Dn.overrideMimeType&&Dn.overrideMimeType(An.mimeType),An.crossDomain||Nn['X-Requested-With']||(Nn['X-Requested-With']='XMLHttpRequest'),Nn)Dn.setRequestHeader(Pn,Nn[Pn]);Fn=function(Mn){return function(){Fn&&(Fn=Ln=Dn.onload=Dn.onerror=Dn.onabort=Dn.onreadystatechange=null,'abort'===Mn?Dn.abort():'error'===Mn?'number'==typeof Dn.status?Rn(Dn.status,Dn.statusText):Rn(0,'error'):Rn(wn[Dn.status]||Dn.status,Dn.statusText,'text'!==(Dn.responseType||'text')||'string'!=typeof Dn.responseText?{binary:Dn.response}:{text:Dn.responseText},Dn.getAllResponseHeaders()))}},Dn.onload=Fn(),Ln=Dn.onerror=Fn('error'),void 0===Dn.onabort?Dn.onreadystatechange=function(){4===Dn.readyState&&T.setTimeout(function(){Fn&&Ln()})}:Dn.onabort=Ln,Fn=Fn('abort');try{Dn.send(An.hasContent&&An.data||null)}catch(Mn){if(Fn)throw Mn}},abort:function(){Fn&&Fn()}}}),qe.ajaxSetup({accepts:{script:'text/javascript, application/javascript, application/ecmascript, application/x-ecmascript'},contents:{script:/\b(?:java|ecma)script\b/},converters:{'text script':function(An){return qe.globalEval(An),An}}}),qe.ajaxPrefilter('script',function(An){void 0===An.cache&&(An.cache=!1),An.crossDomain&&(An.type='GET')}),qe.ajaxTransport('script',function(An){if(An.crossDomain){var Fn,Ln;return{send:function(Nn,Rn){Fn=qe('<script>').prop({charset:An.scriptCharset,src:An.url}).on('load error',Ln=function(Pn){Fn.remove(),Ln=null,Pn&&Rn('error'===Pn.type?404:200,Pn.type)}),Le.head.appendChild(Fn[0])},abort:function(){Ln&&Ln()}}}});var kn=[],Cn=/(=)\?(?=&|$)|\?\?/;qe.ajaxSetup({jsonp:'callback',jsonpCallback:function(){var An=kn.pop()||qe.expando+'_'+tn++;return this[An]=!0,An}}),qe.ajaxPrefilter('json jsonp',function(An,Fn,Ln){var Dn=!1!==An.jsonp&&(Cn.test(An.url)?'url':'string'==typeof An.data&&0===(An.contentType||'').indexOf('application/x-www-form-urlencoded')&&Cn.test(An.data)&&'data'),Nn,Rn,Pn;if(Dn||'jsonp'===An.dataTypes[0])return Nn=An.jsonpCallback=qe.isFunction(An.jsonpCallback)?An.jsonpCallback():An.jsonpCallback,Dn?An[Dn]=An[Dn].replace(Cn,'$1'+Nn):!1!==An.jsonp&&(An.url+=(nn.test(An.url)?'&':'?')+An.jsonp+'='+Nn),An.converters['script json']=function(){return Pn||qe.error(Nn+' was not called'),Pn[0]},An.dataTypes[0]='json',Rn=T[Nn],T[Nn]=function(){Pn=arguments},Ln.always(function(){void 0==Rn?qe(T).removeProp(Nn):T[Nn]=Rn,An[Nn]&&(An.jsonpCallback=Fn.jsonpCallback,kn.push(Nn)),Pn&&qe.isFunction(Rn)&&Rn(Pn[0]),Pn=Rn=void 0}),'script'}),qe.parseHTML=function(An,Fn,Ln){if(!An||'string'!=typeof An)return null;'boolean'==typeof Fn&&(Ln=Fn,Fn=!1),Fn=Fn||Le;var Nn=Ke.exec(An),Rn=!Ln&&[];return Nn?[Fn.createElement(Nn[1])]:(Nn=V([An],Fn,Rn),Rn&&Rn.length&&qe(Rn).remove(),qe.merge([],Nn.childNodes))};var Sn=qe.fn.load;qe.fn.load=function(An,Fn,Ln){if('string'!=typeof An&&Sn)return Sn.apply(this,arguments);var Dn=this,Mn=An.indexOf(' '),Nn,Rn,Pn;return-1<Mn&&(Nn=qe.trim(An.slice(Mn)),An=An.slice(0,Mn)),qe.isFunction(Fn)?(Ln=Fn,Fn=void 0):Fn&&'object'==typeof Fn&&(Rn='POST'),0<Dn.length&&qe.ajax({url:An,type:Rn||'GET',dataType:'html',data:Fn}).done(function(jn){Pn=arguments,Dn.html(Nn?qe('<div>').append(qe.parseHTML(jn)).find(Nn):jn)}).always(Ln&&function(jn,Wn){Dn.each(function(){Ln.apply(this,Pn||[jn.responseText,Wn,jn])})}),this},qe.each(['ajaxStart','ajaxStop','ajaxComplete','ajaxError','ajaxSuccess','ajaxSend'],function(An,Fn){qe.fn[Fn]=function(Ln){return this.on(Fn,Ln)}}),qe.expr.filters.animated=function(An){return qe.grep(qe.timers,function(Fn){return An===Fn.elem}).length},qe.offset={setOffset:function(An,Fn,Ln){var On=qe.css(An,'position'),Bn=qe(An),qn={},Nn,Rn,Pn,Dn,Mn,jn,Wn;'static'===On&&(An.style.position='relative'),Mn=Bn.offset(),Pn=qe.css(An,'top'),jn=qe.css(An,'left'),Wn=('absolute'===On||'fixed'===On)&&-1<(Pn+jn).indexOf('auto'),Wn?(Nn=Bn.position(),Dn=Nn.top,Rn=Nn.left):(Dn=parseFloat(Pn)||0,Rn=parseFloat(jn)||0),qe.isFunction(Fn)&&(Fn=Fn.call(An,Ln,qe.extend({},Mn))),null!=Fn.top&&(qn.top=Fn.top-Mn.top+Dn),null!=Fn.left&&(qn.left=Fn.left-Mn.left+Rn),'using'in Fn?Fn.using.call(An,qn):Bn.css(qn)}},qe.fn.extend({offset:function(An){if(arguments.length)return void 0===An?this:this.each(function(Dn){qe.offset.setOffset(this,An,Dn)});var Nn=this[0],Rn={top:0,left:0},Pn=Nn&&Nn.ownerDocument,Fn,Ln;if(Pn)return(Fn=Pn.documentElement,!qe.contains(Fn,Nn))?Rn:(Rn=Nn.getBoundingClientRect(),Ln=Ae(Pn),{top:Rn.top+Ln.pageYOffset-Fn.clientTop,left:Rn.left+Ln.pageXOffset-Fn.clientLeft})},position:function(){if(this[0]){var Ln=this[0],Nn={top:0,left:0},An,Fn;return'fixed'===qe.css(Ln,'position')?Fn=Ln.getBoundingClientRect():(An=this.offsetParent(),Fn=this.offset(),!qe.nodeName(An[0],'html')&&(Nn=An.offset()),Nn.top+=qe.css(An[0],'borderTopWidth',!0),Nn.left+=qe.css(An[0],'borderLeftWidth',!0)),{top:Fn.top-Nn.top-qe.css(Ln,'marginTop',!0),left:Fn.left-Nn.left-qe.css(Ln,'marginLeft',!0)}}},offsetParent:function(){return this.map(function(){for(var An=this.offsetParent;An&&'static'===qe.css(An,'position');)An=An.offsetParent;return An||jt})}}),qe.each({scrollLeft:'pageXOffset',scrollTop:'pageYOffset'},function(An,Fn){var Ln='pageYOffset'===Fn;qe.fn[An]=function(Nn){return it(this,function(Rn,Pn,Dn){var Mn=Ae(Rn);return void 0===Dn?Mn?Mn[Fn]:Rn[Pn]:void(Mn?Mn.scrollTo(Ln?Mn.pageXOffset:Dn,Ln?Dn:Mn.pageYOffset):Rn[Pn]=Dn)},An,Nn,arguments.length)}}),qe.each(['top','left'],function(An,Fn){qe.cssHooks[Fn]=se(Oe.pixelPosition,function(Ln,Nn){if(Nn)return Nn=de(Ln,Fn),Pt.test(Nn)?qe(Ln).position()[Fn]+'px':Nn})}),qe.each({Height:'height',Width:'width'},function(An,Fn){qe.each({padding:'inner'+An,content:Fn,'':'outer'+An},function(Ln,Nn){qe.fn[Nn]=function(Rn,Pn){var Dn=arguments.length&&(Ln||'boolean'!=typeof Rn),Mn=Ln||(!0===Rn||!0===Pn?'margin':'border');return it(this,function(jn,Wn,On){var Bn;return qe.isWindow(jn)?jn.document.documentElement['client'+An]:9===jn.nodeType?(Bn=jn.documentElement,Math.max(jn.body['scroll'+An],Bn['scroll'+An],jn.body['offset'+An],Bn['offset'+An],Bn['client'+An])):void 0===On?qe.css(jn,Wn,Mn):qe.style(jn,Wn,On,Mn)},Fn,Dn?Rn:void 0,Dn,null)}})}),qe.fn.extend({bind:function(An,Fn,Ln){return this.on(An,null,Fn,Ln)},unbind:function(An,Fn){return this.off(An,null,Fn)},delegate:function(An,Fn,Ln,Nn){return this.on(Fn,An,Ln,Nn)},undelegate:function(An,Fn,Ln){return 1===arguments.length?this.off(An,'**'):this.off(Fn,An||'**',Ln)},size:function(){return this.length}}),qe.fn.andSelf=qe.fn.addBack,C=[],I=function(){return qe}.apply(h,C),!(void 0!==I&&(u.exports=I));var In=T.jQuery,Tn=T.$;return qe.noConflict=function(An){return T.$===qe&&(T.$=Tn),An&&T.jQuery===qe&&(T.jQuery=In),qe},L||(T.jQuery=T.$=qe),qe})},function(u,h,E){u.exports={URLHelper:E(10),sortedSubIdeas:E(9),traverse:E(38),formattedNodeTitle:E(37),contentUpgrade:E(7),content:E(36),observable:E(8)}},function(u,h,E){u.exports={URLHelper:E(19),sortedSubIdeas:E(18),traverse:E(49),formattedNodeTitle:E(48),contentUpgrade:E(16),content:E(47),observable:E(17)}},function(u,h,E){const C=E(1);C.fn.showSection=function(I){'use strict';return C.each(this,function(){const T=C(this);T.trigger(C.Event('showSection',{section:I}))})},C.fn.hasSection=function(I){'use strict';const T=C(this);return!!T.find('[data-mm-section~="'+I+'"]').length},C.fn.backupSections=function(I){'use strict';return C.each(this,function(){const T=C(this);T.trigger(C.Event('backToPreviousSection',{skip:I||1}))})},C.fn.sectionHandlerWidget=function(){'use strict';return C.each(this,function(){let I=[];const T=C(this),L=T.data('mm-initial-section')||'initial',N=function(D,M){M||0!==I.length&&I[0]===D||(I=[D].concat(I)),T.find('[data-mm-section]').addClass('hidden'),D&&(T.find('[data-mm-section~="'+D+'"]').removeClass('hidden').find('[data-mm-request-focus]').focus(),T.find('[data-mm-section~="'+D+'"][data-mm-request-focus]').focus())},P=function(D){const M=I&&I.length&&Math.min(D&&D.skip||1,I.length-1),W=M&&I[M];W&&(I=I.slice(M),N(W,!0))};T.on('showSection',function(D){const M=D&&D.section||L;M&&this===D.target&&N(M)}),T.on('hide',function(){I=[]}),T.find('[data-mm-show-section]').click(function(D){const M=C(this),W=M.data('mm-show-section')||L;D.stopPropagation();M.hasClass('disabled')||T.showSection(W)}),T.find('[data-mm-show-section-back]').click(P),T.on('backToPreviousSection',P)})}},function(u,h,E){const C=E(0);u.exports={isValid:function(I){'use strict';return I&&!!I.provider&&!!I.token},build:function(I,T,L){'use strict';if(!I||!T)throw'invalid-args';return C.extend({},L,{provider:I,token:T})}}},function(u,h,E){u.exports={AtlasModel:E(52),ArgumentMapping:{Model:E(50)},Authentication:{EmailIdentityProvider:E(54),GoldIdentityProvider:E(55),GoogleIdentityProvider:E(57),GoldLicenseManager:E(56),Model:E(53),StoredLicenseIdentityProvider:E(58)},GoldApi:E(60),JsonStorage:E(61),Measures:{ActivatedNodesFilter:E(62),filterById:E(63),Model:E(64)},oneTimePassword:E(65),Progress:E(71),S3Api:E(77),Subscription:{Model:E(80),PlanModel:E(81),StripeModel:E(79)},Themes:{Model:E(82)}}},function(u,h,E){const C=E(0);u.exports=function(T){'use strict';return function(){const R=function(P){let D;P.style&&(P.attr={},D=P.style.collapsed,delete P.style.collapsed,P.attr.style=P.style,D&&(P.attr.collapsed=D),delete P.style),P.ideas&&C.each(P.ideas,R)};T.formatVersion&&2<=T.formatVersion||(R(T),T.formatVersion=2)}(),function(){T.formatVersion&&3<=T.formatVersion||(function(){const P=['theme','measurements-config','storyboards','progress-statuses'],D=T&&T.attr||{},M=C.pick(D,P),W=C.omit(D,P),O=T&&T.ideas,H={id:T.id,title:T.title,attr:W};O&&(H.ideas=O),T.id='root',T.ideas={1:H},delete T.title,T.attr=M}(),T.formatVersion=3)}(),T}},function(u){u.exports=function(C){'use strict';let I=[];return C.addEventListener=function(T,L,N){T.split(' ').forEach(function(R){R&&I.push({type:R,listener:L,priority:N||0})})},C.listeners=function(T){return I.filter(function(L){return L.type===T}).map(function(L){return L.listener})},C.removeEventListener=function(T,L){I=I.filter(function(N){return N.listener!==L})},C.dispatchEvent=function(T){const L=Array.prototype.slice.call(arguments,1);I.filter(function(N){return N.type===T}).sort(function(N,R){return R.priority-N.priority}).some(function(N){try{return!1===N.listener.apply(void 0,L)}catch(R){console.log('dispatchEvent failed',R,N)}})},C}},function(u){const E=function(N){'use strict';return 0<=N},C=function(N){'use strict';return!E(N)},I=function(L,N){'use strict';return Math.abs(L)-Math.abs(N)},T=function(L){'use strict';const N=Object.keys(L.ideas).map(parseFloat),R=N.filter(E).sort(I).concat(N.filter(C).sort(I));return R.map(function(P){return L.ideas[P]})};u.exports=function(N){'use strict';return N.ideas?T(N):[]}},function(u){u.exports=new function(){'use strict';const C=this,I=/(https?:\/\/|www\.)[\w-]+(\.[\w-]+)+([\w\(\)\u0080-\u00FF.,!@?^=%&amp;:\/~+#-]*[\w\(\)\u0080-\u00FF!@?^=%&amp;\/~+#-])?/i;C.containsLink=function(T){return I.test(T)},C.getLink=function(T){let L=T&&T.match(I);return L&&L[0]&&(L=L[0],!/https?:\/\//i.test(L)&&(L='http://'+L)),L},C.stripLink=function(T){return T?T.replace(I,'').trim():''}}},function(u,h,E){const C=E(0);u.exports=function(T,L,N,R){'use strict';const P=this;P.getUserProfile=function(D,M){return new Promise(function(W,O){L({url:'https://www.googleapis.com/oauth2/v2/userinfo',dataType:'json',headers:{Authorization:'Bearer '+D}}).then(function(H){M&&H.id!==M?O('userIdMismatch'):W(H)},function(){O('networkError')})})},P.authorize=function(D){const M={},W=C.extend({},T,D);M.promise=new Promise(function(H,U){M.resolve=H,M.reject=U});let O=!1;return D.immediate&&(O=R.setTimeout(M.reject,3e3)),N.gapi.auth.authorize(W,function(H){O&&R.clearTimeout(O),H.access_token&&!H.error?M.resolve(H.access_token):M.reject('notAuthenticated')}),M.promise},P.setToken=function(D){N.gapi.auth.setToken(D)},P.getToken=function(){const D=N.gapi.auth.getToken();return D&&D.access_token},P.initRealtimeContent=function(D,M){return new Promise(function(W,O){N.gapi.drive.realtime.load(D,function(U){U.close(),W(D)},function(U){U.getRoot().set('events',U.createList()),U.getRoot().set('focusNodes',U.createMap()),U.getRoot().set('initialContent',M)},function(){O('network-error')})})},P.realtime=function(){return N.gapi.drive.realtime},P.buildShareClient=function(){return new N.gapi.drive.share.ShareClient(T.googleAppId)}}},function(u,h,E){const C=E(1);C.fn.eventVisibilityWidget=function(I){'use strict';return C(this).each(function(){const T=C(this),L=T.data('mm-show-events'),N=T.data('mm-hide-events'),R=function(D){T.find('[data-mm-show-default]').removeClass('hidden'),T.find('[data-mm-event-arg]').addClass('hidden'),T.find('[data-mm-event-arg~="'+D+'"]').removeClass('hidden').siblings('[data-mm-show-default]').addClass('hidden'),T.find('[data-mm-request-focus]:not(.hidden)').each(function(){const M=C(this);M.parents('.hidden').length||M.focus()})},P=function(D){T.find('[data-mm-event-val]').text(D)};L&&I.addEventListener(L,function(D){T.removeClass('hidden'),R(D),P(D)}),N&&I.addEventListener(N,function(){T.addClass('hidden')})})}},function(u,h,E){const C=E(1);C.fn.modelActionWidget=function(I){'use strict';return C.each(this,function(){const T=C(this),L=T.data('mm-model-action');T.click(function(){T.hasClass('disabled')||I[L]()})})}},function(u,h,E){const C=E(2).observable,I=E(41),T=E(40),L=E(0),N=E(1),R=function(W){'use strict';const O=new Uint8Array(W.length);for(let H=0;H<W.length;++H)O[H]=W.charCodeAt(H);return O},P=function(W){'use strict';const O=W.split(','),H=O[0].split(':')[1],U=decodeURIComponent(O[1]);return new window.Blob([U],{type:H})},D=function(W,O){'use strict';const H=W.split(O),U=H[0].split(':')[1],z=window.atob(H[1]);return new window.Blob([R(z)],{type:U})},M=function(W,O){'use strict';return new Promise(function(H,U){const z=new window.FileReader;z.onload=function(V){H(V.target.result)},z.onerror=U,z[W](O)})};u.exports=function(){'use strict';const O=C(this),H=function(){O.dispatchEvent('network-status',O.isOnline())};O.redirect=function(U){window.location.assign(U)},O.getQueryStringAsMap=function(){return T(window.location.search)},O.getHostName=function(){return window.document.location.hostname},O.replaceUrl=function(U,z){window.history.replaceState({},U,z),window.document.title=U},O.locationReplace=function(U){window.location.replace(U)},O.setTitle=function(U){window.document.title=U},O.getPath=function(){return window.location.pathname},O.popup=function(U){window.open(U,'','menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600')},O.open=function(U){window.open(U)},O.isDownloadSupported=L.memoize(function(){const U=document.createElement('a');return'undefined'!=typeof U.download}),O.setTitle=function(U){document.title=U},O.isOnline=function(){return window.navigator.onLine},O.isMac=function(){return'MacIntel'===window.navigator.platform},O.beforeUnload=function(U){window.addEventListener('beforeunload',U)},O.isBlobDownloadSupported=function(){return /Chrome/.test(window.navigator.userAgent)||!/Version\/[\d\.]+.*Safari/.test(window.navigator.userAgent)},O.downloadAsDataUri=function(U,z){return new Promise(function(V,X){const Y=new window.FileReader,G=new window.XMLHttpRequest;Y.onload=function(){V(Y.result)},Y.onerror=X,G.responseType='arraybuffer',G.open('GET',U,!0),G.onload=function(){const Q=new window.Blob([G.response],{type:G.getResponseHeader('content-type')});Y.readAsDataURL(Q)},G.onerror=X,G.send(),G.onprogress=function(Q){z&&z.notify&&z.notify(Q.loaded,Q.total)}})},O.convertToPng=function(U,z,V){return new Promise(function(X,Y){const G=function(te){const ae=z||te.width,ie=V||te.height,oe=document.createElement('canvas');return oe.setAttribute('width',ae),oe.setAttribute('height',ie),oe.getContext('2d').drawImage(te,0,0,ae,ie),oe},Q=new window.Image,J=window.setTimeout(function(){Y('network-error')},2e4);Q.addEventListener('load',function(){window.clearTimeout(J),X(G(this).toDataURL('image/png'))}),Q.addEventListener('error',function(te){window.clearTimeout(J),Y(te)}),/^data:/.test(U)||Q.setAttribute('crossOrigin','anonymous'),Q.src=U})},O.toObjectUrl=function(U,z){return z?window.URL.createObjectURL(new window.Blob([U],{type:z})):window.URL.createObjectURL(U)},O.dataURLToBlob=function(U){const z=';base64,';return-1===U.indexOf(z)?P(U):D(U,z)},O.reloadPage=function(){window.location.reload()},O.revokeObjectUrl=function(U){window.URL.revokeObjectURL(U)},O.isTouch=function(){return!!('ontouchstart'in document.documentElement)},O.loadScript=function(U){return N('<script src="'+U+'" async defer></script>').appendTo('body')},O.isMobile=function(){const U=/iPad|iPhone|iPod/.test(window.navigator.platform),z=/Android/i.test(window.navigator.platform)||/Android/i.test(window.navigator.userAgent);return U||z},O.fullScreenEnabled=function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled},O.requestFullScreen=function(U){U.requestFullscreen?U.requestFullscreen():U.webkitRequestFullscreen?U.webkitRequestFullscreen():U.mozRequestFullScreen?U.mozRequestFullScreen():U.msRequestFullscreen&&U.msRequestFullscreen()},O.exitFullScreen=function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},O.buildFormData=function(){return new window.FormData},O.buildXMLHttpRequest=function(){return new window.XMLHttpRequest},O.setTimeout=function(U,z){return window.setTimeout(U,z)},O.clearTimeout=function(U){return window.clearTimeout(U)},O.setInterval=function(U,z){return window.setInterval(U,z)},O.clearInterval=function(U){return window.clearInterval(U)},O.getWindow=function(){return window},O.buildAjaxXMLResponse=function(U){return new I(U)},O.createElement=function(U){return document.createElement(U)},O.readFileAsDataURL=function(U){return M('readAsDataURL',U)},O.readFileAsText=function(U){return M('readAsText',U)},O.addWindowEventListener=function(U,z){return window.addEventListener(U,z)},window.addEventListener('online',H),window.addEventListener('offline',H)}},function(u,h,E){const C=E(1);C.fn.visibilityObserver=function(){'use strict';const I=new window.MutationObserver(function(L){L.forEach(function(N){const R=C(N.target),P=0<=N.oldValue.indexOf('hidden'),D=R.hasClass('hidden');P&&!D?R.trigger('show'):!P&&D&&R.trigger('hide')})}),T={attributes:!0,attributeOldValue:!0,attributeFilter:['class']};return C.each(this,function(){const L=C(this);I.observe(L[0],T)})}},function(u,h,E){var C=E(0);u.exports=function(T){'use strict';return function(){var R=function(P){var D;P.style&&(P.attr={},D=P.style.collapsed,delete P.style.collapsed,P.attr.style=P.style,D&&(P.attr.collapsed=D),delete P.style),P.ideas&&C.each(P.ideas,R)};T.formatVersion&&2<=T.formatVersion||(R(T),T.formatVersion=2)}(),function(){T.formatVersion&&3<=T.formatVersion||(function(){var P=['theme','measurements-config','storyboards','progress-statuses'],D=T&&T.attr||{},M=C.pick(D,P),W=C.omit(D,P),O=T&&T.ideas,H={id:T.id,title:T.title,attr:W};O&&(H.ideas=O),T.id='root',T.ideas={1:H},delete T.title,T.attr=M}(),T.formatVersion=3)}(),T}},function(u){u.exports=function(C){'use strict';var I=[];return C.addEventListener=function(T,L,N){T.split(' ').forEach(function(R){R&&I.push({type:R,listener:L,priority:N||0})})},C.listeners=function(T){return I.filter(function(L){return L.type===T}).map(function(L){return L.listener})},C.removeEventListener=function(T,L){I=I.filter(function(N){return N.listener!==L})},C.dispatchEvent=function(T){var L=Array.prototype.slice.call(arguments,1);I.filter(function(N){return N.type===T}).sort(function(N,R){return R.priority-N.priority}).some(function(N){try{return!1===N.listener.apply(void 0,L)}catch(R){console.log('dispatchEvent failed',R,N)}})},C}},function(u){var E=function(L){'use strict';return 0<=L},C=function(L){'use strict';return!E(L)},I=function(T,L){'use strict';return Math.abs(T)-Math.abs(L)};u.exports=function(L){'use strict';var N,R;return L.ideas?(N=Object.keys(L.ideas).map(parseFloat),R=N.filter(E).sort(I).concat(N.filter(C).sort(I)),R.map(function(P){return L.ideas[P]})):[]}},function(u){u.exports=new function(){'use strict';var C=this,I=/(https?:\/\/|www\.)[\w-]+(\.[\w-]+)+([\w\(\)\u0080-\u00FF.,!@?^=%&amp;:\/~+#-]*[\w\(\)\u0080-\u00FF!@?^=%&amp;\/~+#-])?/i;C.containsLink=function(T){return I.test(T)},C.getLink=function(T){var L=T&&T.match(I);return L&&L[0]&&(L=L[0],!/https?:\/\//i.test(L)&&(L='http://'+L)),L},C.stripLink=function(T){return T?T.replace(I,'').trim():''}}},function(u,h,E){const C='GoogleIdentityProvider',I=E(22),T=E(5),L=function(N){'use strict';return T.build(C,N.token,{userId:N.id,name:N.name})};u.exports={providerId:C,build:function(N){'use strict';if(!N)throw'not-authenticated';return I.build(L(N),N.email,N.hd)},isGoogleUserProfile:function(N){'use strict';return N&&N.identity&&N.identity.token&&N.identity.provider===C}}},function(u,h,E){const C='MindMupLicense',I=E(22),T=E(5);u.exports={build:function(L){'use strict';const N=L&&(L.email||L.account),R=L&&T.build(C,L);if(!R||!N)throw'invalid-license';return I.build(R,N)},isLicenseUserProfile:function(L){'use strict';return L&&L.identity&&L.identity.token&&L.identity.provider===C}}},function(u,h,E){const C=E(5);u.exports={build:function(I,T,L){'use strict';const N={identity:I,displayName:T};if(!T||!C.isValid(I))throw'invalid-args';return L&&(N.domain=L),N}}},function(u){u.exports={configurationAttributeName:'measurements-config',measurementAttributeName:'measurements'}},function(u){u.exports={statusAttributeName:'progress',statusConfigAttr:'progress-statuses'}},function(u,h,E){u.exports={calculateLayout:E(230),colorToRGB:E(103),Connectors:E(232),foregroundStyle:E(234),LayoutModel:E(236),nodeToBox:E(112),Theme:E(104),ThemeProcessor:E(248),ThemeDimensionProvider:E(247),Themes:{default:E(233)}}},function(u,h,E){const C=E(2).observable;u.exports=function(T){'use strict';const L=this,N=[];let R=1;C(this),L.log=function(){let P=['log'];N.length===T&&N.shift(),N.push({id:R,ts:new Date,event:Array.prototype.join.call(arguments,',')}),R+=1,Array.prototype.slice.call(arguments).forEach(function(D){Array.isArray(D)?P=P.concat(D):P.push(D)}),L.dispatchEvent.apply(L,P)},L.error=function(P){L.log('Error',P),L.dispatchEvent('error',P,N)},L.getLog=N.slice.bind(N),L.timer=function(P,D){const M=Date.now();return{end:function(){L.dispatchEvent('timer',P,D,Date.now()-M)}}}}},function(u){u.exports=function(C,I,T){'use strict';let L;if(!I&&C&&C.setItem&&C.getItem&&C.removeItem)try{C.setItem('testkey','testval'),'testval'===C.getItem('testkey')&&(C.removeItem('testkey'),L=C)}catch(N){}return L?T?{fake:!0,readonly:!0,getItem:function(N){const R=this[N];return void 0===R?L[N]:R},setItem:function(N,R){this[N]=!!R&&R},removeItem:function(N){this[N]=!1}}:L:{fake:!0,getItem:function(N){return this[N]},setItem:function(N,R){this[N]=R},removeItem:function(N){delete this[N]}}}},function(u){u.exports=function(C){'use strict';const I=this;let T;I.poll=function(L,N,R){return new Promise(function(P,D){const M=R&&R.pollingInterval||1e4,W=R&&R.pollingFailurePredicate,O=function(){L().then(function(H){N(H)?(I.cancelPolling(),P(H)):W&&W(H)&&(I.cancelPolling(),D(H))},function(H){(!W||W(H))&&(I.cancelPolling(),D(H))})};I.cancelPolling(),T=C.setInterval(O,M),O()})},I.cancelPolling=function(){T&&C.clearInterval(T)}}},function(u,h,E){const C=E(1);C.fn.dismissibleWidget=function(){'use strict';return C(this).each(function(){const I=C(this),T=I.data('mm-dismissible'),L=function(N){N.preventDefault(),N.stopPropagation(),I.addClass('hidden')};'buttonOnly'!==T&&I.on('keyup',function(N){27===N.which&&L(N)}).on('click',function(N){N.target===this&&L(N)}),I.find('[data-mm-role~="dismiss"]').click(L)})}},function(u,h,E){const C=E(1);C.fn.toggleClassWidget=function(){'use strict';return C.each(this,function(){const I=C(this),T=I.data('mm-toggle-class'),L=I.data('mm-target-selector')||'body';T&&I.click(function(){C(L).toggleClass(T)})})}},function(u){u.exports=function(){'use strict';const C=function(){const I=1+Math.random();return(65536*I||0).toString(16).substring(1)};return C()+'-'+C()}},function(u){u.exports=function(C,I,T){'use strict';let L=!1;const N=this;N.scriptsLoaded=function(){return I.gapi&&I.gapi.auth},N.ensureScripts=function(P){return N.scriptsLoaded()?Promise.resolve():new Promise(function(D,M){let W;const O=function(){W&&T.clearTimeout(W),W=0,N.scriptsLoaded()?P?M('notAuthenticated'):D():M('network-error')};L&&(L.remove(),L=!1),I.initGoogleAPI=O,W=T.setTimeout(O,C||15000),L=T.loadScript('https://apis.google.com/js/client.js?onload=initGoogleAPI')})}}},function(u,h,E){const C=E(2).observable;u.exports=function(T){'use strict';let L='direct';const N=C(this);N.setFunnelId=function(P){L=P},N.step=function(P,D){T.log('goldFunnel',P+':'+D,L)}}},function(u,h,E){const C=E(1),I=E(0);E(83),C.fn.goldPlanSelectorWidget=function(T){'use strict';return this.each(function(){const L=C(this),N=function(R,P){L.empty(),I.each(R,function(D){C('<option></option>').goldPlanOptionWidget(D).appendTo(L)}),L.val(JSON.stringify(P))};T.addEventListener('subscriptionPlansChanged',N),T.addEventListener('planSelected',function(R){L.val(JSON.stringify(R))}),L.on('change',function(){const R=L.val(),P=R&&JSON.parse(R);P&&T.setSelectedPlan(P)}),N(T.availablePlans(),T.getSelectedPlan())})}},function(u,h,E){const C=E(1);C.fn.userProfileWidget=function(I){'use strict';return C.each(this,function(){const T=C(this),L=T.data('mm-user-profile');I.addEventListener('authenticated',function(N){L&&N&&N[L]&&T.text(N[L])}),I.addEventListener('authenticating notAuthenticated',function(){T.text('')})})}},function(u,h,E){const C=E(0),I=E(8),T=E(7);u.exports=function(N,R){'use strict';let D={},M=!1,P;const W=function(){P=void 0},O=function he(ge){return ge=ge||N,ge.ideas?C.reduce(ge.ideas,function(me,fe){return Math.max(me,he(fe))},parseInt(ge.id,10)||0):parseInt(ge.id,10)||0},H=function(ge){return ge=ge||R,P||(P=O()),P+=1,ge?P+'.'+ge:P},U=function(he,ge){const me=he.id===N.id;return he.id?W():he.id=H(ge),he.ideas&&C.each(he.ideas,function(fe,ye){!me&&fe.attr&&fe.attr.group&&C.isEmpty(fe.ideas)?delete he.ideas[ye]:he.ideas[parseFloat(ye)]=U(fe,ge)}),he.title||(he.title=''),he.containsDirectChild=he.findChildRankById=function(fe){return parseFloat(C.reduce(he.ideas,function(ye,ve,xe){return ve.id==fe?xe:ye},void 0))},he.findSubIdeaById=function(fe){const ye=C.find(he.ideas,function(ve){return ve.id==fe});return ye||C.reduce(he.ideas,function(ve,xe){return ve||xe.findSubIdeaById(fe)},void 0)},he.isEmptyGroup=function(){return!N.isRootNode(he.id)&&he.attr&&he.attr.group&&C.isEmpty(he.ideas)},he.find=function(fe){const ye=fe(he)?[C.pick(he,'id','title')]:[];return 0===C.size(he.ideas)?ye:C.reduce(he.ideas,function(ve,xe){return C.union(ve,xe.find(fe))},ye)},he.getAttr=function(fe){return he.attr&&he.attr[fe]&&C.clone(he.attr[fe])},he.sortedSubIdeas=function(){const fe=[],ye=he.ideas&&C.groupBy(C.map(C.keys(he.ideas),parseFloat),function(xe){return 0<xe}),ve=ye&&C.sortBy(ye[!0],Math.abs).concat(C.sortBy(ye[!1],Math.abs));return he.ideas?(C.each(ve,function(xe){fe.push(he.ideas[xe])}),fe):[]},he.traverse=function(fe,ye){ye||he===N||fe(he),C.each(he.sortedSubIdeas(),function(ve){ve.traverse(fe,ye)}),ye&&he!==N&&fe(he)},he},z=function(he,ge){let me=[];return(ge=ge||1,0===C.size(he))?0:(me=C.keys(he),me.push(0),C.max(C.map(me,parseFloat),function(fe){return fe*ge}))},V=function(he){return!!C.find(N.ideas,function(ge){return ge.id===he})},X=function(he){let ge=0,me=0,fe=1;return V(he.id)&&(me=C.countBy(he.ideas,function(ye,ve){return 0>ve}),(me['true']||0)<me['false']&&(fe=-1)),ge=z(he.ideas,fe)+fe,ge},Y=function(he,ge){let me=0;return he.ideas=he.ideas||{},me=X(he),he.ideas[me]=ge,me},G=function(he){return N.id==he?N:N.findSubIdeaById(he)},K=function(he,ge){return C(C.map(C.keys(he.ideas),parseFloat)).reject(function(me){return 0>me*ge})},Q=function(he){return 0>he?-1:1},J={},Z={},ee={},te=function(he,ge,me){me?N.dispatchEvent('changed',he,ge,me):N.dispatchEvent('changed',he,ge)},ae=function(he,ge,me,fe){const ye={eventMethod:he,eventArgs:ge,undoFunction:me};return ee[fe]?void ee[fe].push(ye):void(!J[fe]&&(J[fe]=[]),J[fe].push(ye),M?N.dispatchEvent('changed','redo',void 0,fe):(te(he,ge,fe),Z[fe]=[]))},ie=function(he,ge,me,fe){return'batch'!==he&&!ee[fe]&&J&&J[fe]&&0!==J[fe].length?void function(){const ve=J[fe].pop();'batch'===ve.eventMethod?J[fe].push({eventMethod:'batch',eventArgs:ve.eventArgs.concat([[he].concat(ge)]),undoFunction:function(){me(),ve.undoFunction()}}):J[fe].push({eventMethod:'batch',eventArgs:[[ve.eventMethod].concat(ve.eventArgs)].concat([[he].concat(ge)]),undoFunction:function(){me(),ve.undoFunction()}}),M?N.dispatchEvent('changed','redo',void 0,fe):(te(he,ge,fe),Z[fe]=[])}():void ae(he,ge,me,fe)},oe=function(he,ge,me){return he.ideas[ge]=he.ideas[me],delete he.ideas[me],function(){return he.ideas[me]||!he.ideas[ge]?!1:void(he.ideas[me]=he.ideas[ge],delete he.ideas[ge])}},re=function(he){const ge=(he+'').indexOf('.');return 0<ge&&he.substr(ge+1)},de={},se='/xxxxxxxx-yxxx-yxxx-yxxx-xxxxxxxxxxxx/'.replace(/[xy]/g,function(he){const ge=0|16*Math.random(),me='x'===he?ge:8|3&ge;return me.toString(16)})+(R||''),le=function(he,ge,me){const fe=he&&C.extend({},he.attr);if(!he)return!1;if(he.attr=C.extend({},he.attr),!me||'false'===me||C.isObject(me)&&C.isEmpty(me)){if(!he.attr[ge])return!1;delete he.attr[ge]}else{if(C.isEqual(he.attr[ge],me))return!1;he.attr[ge]=JSON.parse(JSON.stringify(me))}return 0===C.size(he.attr)&&delete he.attr,function(){he.attr=fe}},ce=function(he,ge){return C.find(N.links,function(me){return me.ideaIdFrom===he&&me.ideaIdTo===ge||me.ideaIdFrom===ge&&me.ideaIdTo===he})},pe=function(he,ge){const me=G(he),fe=G(ge),ye=me&&fe&&(C.find(me.ideas,function(ve){return ve.id===ge})||C.find(fe.ideas,function(ve){return ve.id===he}));return he!==ge&&!!me&&!!fe&&!ye},ue=function(he,ge){return C.find(N.links,function(me){return me.ideaIdFrom==he&&me.ideaIdTo==ge})};return N.setConfiguration=function(he){D=he||{}},N.getSessionKey=function(){return R},N.nextSiblingId=function(he){const ge=N.findParent(he),me=ge&&ge.findChildRankById(he),fe=me&&K(ge,me),ye=fe&&C.reject(fe,function(ve){return Math.abs(ve)<=Math.abs(me)});return!!ge&&0!==ye.length&&ge.ideas[C.min(ye,Math.abs)].id},N.sameSideSiblingIds=function(he){const ge=N.findParent(he),me=ge.findChildRankById(he);return C.without(C.map(C.pick(ge.ideas,K(ge,me)),function(fe){return fe.id}),he)},N.getAttrById=function(he,ge){const me=G(he);return me&&me.getAttr(ge)},N.previousSiblingId=function(he){const ge=N.findParent(he),me=ge&&ge.findChildRankById(he),fe=me&&K(ge,me),ye=fe&&C.reject(fe,function(ve){return Math.abs(ve)>=Math.abs(me)});return!!ge&&0!==ye.length&&ge.ideas[C.max(ye,Math.abs)].id},N.clone=function(he){const ge=he&&he!=N.id&&N.findSubIdeaById(he)||N;return JSON.parse(JSON.stringify(ge))},N.cloneMultiple=function(he){return C.map(he,N.clone)},N.calculatePath=function(he,ge,me){return N.isRootNode(he)?[]:(ge=ge||[N],me=me||N,me.containsDirectChild(he)?ge:C.reduce(me.ideas,function(fe,ye){return fe||N.calculatePath(he,[ye].concat(ge),ye)},!1))},N.getSubTreeIds=function(he){const ge=[],me=function(fe){return C.isEmpty(fe.ideas)?[]:void C.each(fe.sortedSubIdeas(),function(ye){me(ye),ge.push(ye.id)})};return me(N.findSubIdeaById(he)||N),ge},N.findParent=function(he,ge){return ge=ge||N,!N.isRootNode(he)&&(ge.containsDirectChild(he)?ge:C.reduce(ge.ideas,function(me,fe){return me||N.findParent(he,fe)},!1))},N.isBatchActive=function(he){return!!ee[he||R]},N.startBatch=function(he){N.endBatch(he),ee[he||R]=[]},N.discardBatch=function(he){ee[he||R]=void 0},N.endBatch=function(he){const ge=he||R,me=ee[ge];ee[ge]=void 0,C.isEmpty(me)||(1===C.size(me)?ae(me[0].eventMethod,me[0].eventArgs,me[0].undoFunction,ge):function(){const ye=C.map(me,function(be){return[be.eventMethod].concat(be.eventArgs)}),ve=C.sortBy(C.map(me,function(be){return be.undoFunction}),function(be,we){return-1*we});ae('batch',ye,function(){C.each(ve,function(be){be()})},ge)}())},N.execCommand=function(he,ge,me){return!!de[he]&&de[he].apply(N,[me||R].concat(C.toArray(ge)))},N.batch=function(he){const ge=N.isBatchActive();let me;ge||N.startBatch();try{me=he()}catch(fe){throw ge||N.discardBatch(),fe}return ge||N.endBatch(),me},de.batch=function(he){N.startBatch(he);try{C.each(C.toArray(arguments).slice(1),function(ge){N.execCommand(ge[0],ge.slice(1),he)})}finally{N.endBatch(he)}},N.pasteMultiple=function(he,ge){return N.batch(function(){return C.map(ge,function(me){return N.paste(he,me)})})},N.paste=function(){return N.execCommand('paste',arguments)},de.paste=function(he,ge,me,fe){const ye=ge==N.id?N:N.findSubIdeaById(ge),ve=function(we){const Ee=C.omit(we,'ideas','id','attr');let ke=1,Ce,Se;return Ee.attr=C.omit(we.attr,D.nonClonedAttributes),C.isEmpty(Ee.attr)&&delete Ee.attr,we.ideas&&(Ce=C.groupBy(C.map(C.keys(we.ideas),parseFloat),function(Ie){return 0<Ie}),Se=C.sortBy(Ce[!0],Math.abs).concat(C.sortBy(Ce[!1],Math.abs)),Ee.ideas={},C.each(Se,function(Ie){Ee.ideas[ke++]=ve(we.ideas[Ie])})),Ee};let be=0,xe;return(fe&&(P=parseInt(fe,10)-1),xe=me&&(me.title||me.attr)&&U(ve(me),re(fe)),ye&&xe)&&(be=Y(ye,xe),fe&&W(),le(xe,'position'),ae('paste',[ge,me,xe.id],function(){delete ye.ideas[be]},he),xe.id)},N.flip=function(){return N.execCommand('flip',arguments)},de.flip=function(he,ge){const me=N.findParent(ge),fe=me&&N.isRootNode(me.id)&&me.findChildRankById(ge);return!!fe&&(function(){const ve=z(me.ideas,-1*Q(fe)),xe=ve-10*Q(fe),be=oe(me,xe,fe);ae('flip',[ge],be,he)}(),!0)},N.initialiseTitle=function(){return N.execCommand('initialiseTitle',arguments)},de.initialiseTitle=function(he,ge,me){const fe=G(ge),ye=fe&&fe.title;return!!fe&&ye!==me&&(fe.title=me,ie('initialiseTitle',[ge,me],function(){fe.title=ye},he),!0)},N.updateTitle=function(){return N.execCommand('updateTitle',arguments)},de.updateTitle=function(he,ge,me){const fe=G(ge),ye=fe&&fe.title;return!!fe&&ye!==me&&(fe.title=me,ae('updateTitle',[ge,me],function(){fe.title=ye},he),!0)},N.addSubIdea=function(){return N.execCommand('addSubIdea',arguments)},de.addSubIdea=function(he,ge,me,fe){const ye=G(ge);return!!ye&&(fe&&G(fe)?!1:function(){const xe=U({title:me,id:fe}),be=Y(ye,xe);return ae('addSubIdea',[ge,me,xe.id],function(){delete ye.ideas[be]},he),xe.id}())},N.removeMultiple=function(he){let ge=!1;return N.startBatch(),ge=C.map(he,N.removeSubIdea),N.endBatch(),ge},N.removeSubIdea=function(){return N.execCommand('removeSubIdea',arguments)},de.removeSubIdea=function(he,ge){return!!function(){return!N.isRootNode(ge)||1<C.size(N.ideas)}()&&function(){const ye=N.findParent(ge)||N,ve=ye&&ye.findChildRankById(ge),xe=ye&&ye.ideas[ve],be=N.links;return!!ve&&(delete ye.ideas[ve],N.links=C.reject(N.links,function(we){return we.ideaIdFrom==ge||we.ideaIdTo==ge}),ae('removeSubIdea',[ge],function(){ye.ideas[ve]=xe,N.links=be},he),!0)}()},N.insertIntermediateMultiple=function(he,ge){return N.batch(function(){const me=N.insertIntermediate(he[0],ge&&ge.title);return ge&&ge.attr&&Object.keys(ge.attr).forEach(function(fe){N.updateAttr(me,fe,ge.attr[fe])}),C.each(he.slice(1),function(fe){N.changeParent(fe,me)}),me})},N.insertIntermediate=function(){return N.execCommand('insertIntermediate',arguments)},de.insertIntermediate=function(he,ge,me,fe){const ye=N.isRootNode(ge)?N:N.findParent(ge),ve=ye&&ye.findChildRankById(ge);return!!function(){return N.id!=ge&&!!ye&&(fe&&G(fe)?!1:!!ve)}()&&function(){const we=ye.ideas[ve],Ee=U({title:me,id:fe});return ye.ideas[ve]=Ee,Ee.ideas={1:we},ae('insertIntermediate',[ge,me,Ee.id],function(){ye.ideas[ve]=we},he),Ee.id}()},N.changeParent=function(){return N.execCommand('changeParent',arguments)},de.changeParent=function(he,ge,me){const fe=G(me),ye=N.findSubIdeaById(ge),ve=N.isRootNode(ge)?N:N.findParent(ge);return!!function(){return ge!=me&&!!fe&&!!ye&&!ye.findSubIdeaById(me)&&!fe.containsDirectChild(ge)&&!!ve}()&&(function(){const we=ve.findChildRankById(ge),Ee=Y(fe,ye),ke=ye.getAttr('position');le(ye,'position'),delete ve.ideas[we],ae('changeParent',[ge,me],function(){le(ye,'position',ke),ve.ideas[we]=ye,delete fe.ideas[Ee]},he)}(),!0)},N.mergeAttrProperty=function(he,ge,me,fe){let ye=N.getAttrById(he,ge)||{};return fe?ye[me]=fe:delete ye[me],C.isEmpty(ye)&&(ye=!1),N.updateAttr(he,ge,ye)},N.updateAttr=function(){return N.execCommand('updateAttr',arguments)},de.updateAttr=function(he,ge,me,fe){const ye=G(ge),ve=le(ye,me,fe);return ve&&ae('updateAttr',[ge,me,fe],ve,he),!!ve},N.getOrderedSiblingRanks=function(he,ge){const me=N.findParent(he),fe=me&&me.findChildRankById(he);return!!fe&&(ge&&ge.ignoreRankSide?C.sortBy(C.map(C.keys(me.ideas),parseFloat)):C.sortBy(K(me,fe),Math.abs))},N.moveRelative=function(he,ge,me){const fe=N.findParent(he),ye=fe&&fe.findChildRankById(he),ve=N.getOrderedSiblingRanks(he,me),xe=ve&&ve.indexOf(ye),we=function(){let Ie=xe+(0<ge?ge+1:ge);return me&&me.ignoreRankSide&&(0>ye?(Ie=xe+(0>ge?ge-1:ge),0<ve[Ie]&&++Ie):0>ve[Ie]&&--Ie),Ie}(),Ee=0<=we&&ve&&ve.length&&ve[we],ke=Ee&&fe&&fe.ideas[Ee];let Se=!1;return!function(){return!!fe&&(me&&me.ignoreRankSide&&0>ye?we>ve.length-1:0>we)}()&&(N.startBatch(),me&&me.ignoreRankSide&&Ee&&ke&&0>Ee*ye&&N.flip(he),Se=N.positionBefore(he,ke&&ke.id,fe),N.endBatch(),Se)},N.positionBefore=function(){return N.execCommand('positionBefore',arguments)},de.positionBefore=function(he,ge,me,fe){let ke,ye,ve,xe,be,we,Ee;const Ce=fe||N.findParent(ge),Se=Ce&&Ce.findChildRankById(ge);if(!Ce)return!1;if(ge==me)return!1;if(ye=0,me){if(ve=Ce.findChildRankById(me),!ve)return!1;if(xe=K(Ce,ve),be=C.reject(C.sortBy(xe,Math.abs),function(Ie){return Math.abs(Ie)>=Math.abs(ve)}),we=0<be.length?C.max(be,Math.abs):0,we==Se)return!1;ye=we+(ve-we)/2}else{if(Ee=z(Ce.ideas,0>Se?-1:1),Ee==Se)return!1;ye=Ee+10*(0>Se?-1:1)}return ye!=Se&&(ke=oe(Ce,ye,Se),ae('positionBefore',[ge,me],ke,he),!0)},N.addLink=function(){return N.execCommand('addLink',arguments)},de.addLink=function(he,ge,me){return!!pe(ge,me)&&!ce(ge,me)&&(N.links=N.links||[],N.links.push({ideaIdFrom:ge,ideaIdTo:me,attr:{style:{color:'#FF0000',lineStyle:'dashed'}}}),ae('addLink',[ge,me],function(){N.links.pop()},he),!0)},N.removeLink=function(){return N.execCommand('removeLink',arguments)},de.removeLink=function(he,ge,me){for(let fe=0,ye;N.links&&fe<N.links.length;){if(ye=N.links[fe],ye.ideaIdFrom===ge&&ye.ideaIdTo===me)return N.links.splice(fe,1),ae('removeLink',[ge,me],function(){N.links.push(C.clone(ye))},he),!0;fe+=1}return!1},N.getLinkAttr=function(he,ge,me){const fe=ue(he,ge);return fe&&fe.attr&&fe.attr[me]&&fe.attr[me]},N.updateLinkAttr=function(){return N.execCommand('updateLinkAttr',arguments)},de.updateLinkAttr=function(he,ge,me,fe,ye){const ve=ue(ge,me),xe=le(ve,fe,ye);return xe&&ae('updateLinkAttr',[ge,me,fe,ye],xe,he),!!xe},N.canUndo=function(){return!!(J[R]&&0<J[R].length)},N.canRedo=function(){return!!(Z[R]&&0<Z[R].length)},N.undo=function(){return N.execCommand('undo',arguments)},de.undo=function(he){let ge=!1;return N.endBatch(),ge=J[he]&&J[he].pop(),ge&&ge.undoFunction&&(ge.undoFunction(),Z[he]||(Z[he]=[]),Z[he].push(ge),N.dispatchEvent('changed','undo',[],he),!0)},N.redo=function(){return N.execCommand('redo',arguments)},de.redo=function(he){let ge=!1;return N.endBatch(),ge=Z[he]&&Z[he].pop(),!!ge&&(M=!0,N.execCommand(ge.eventMethod,ge.eventArgs,he),M=!1,!0)},N.storeResource=function(){return N.execCommand('storeResource',arguments)},de.storeResource=function(he,ge,me){const fe=function(){const be=C.keys(N.resources),we=R?C.filter(be,RegExp.prototype.test.bind(new RegExp('\\/'+R+'$'))):be,Ee=C.map(we,function(ke){return parseInt(ke,10)});return C.isEmpty(Ee)?0:C.max(Ee)},ye=function(){const be=fe()+1;return be+se};return function(){if(!me&&N.resources)return C.find(C.keys(N.resources),function(be){return N.resources[be]===ge})}()||function(){const be=me||ye();return N.resources=N.resources||{},N.resources[be]=ge,N.dispatchEvent('resourceStored',ge,be,he),be}()},N.getResource=function(he){return N.resources&&N.resources[he]},N.hasSiblings=function(he){const ge=N.findParent(he);return!N.isRootNode(he)&&ge&&1<C.size(ge.ideas)},N.isRootNode=function(he){return V(he)},N.getDefaultRootId=function(){const he=N&&C.values(N.ideas);return he&&he.length&&he[0].id},T(N),I(N),U(N),N}},function(u,h,E){const C=E(10),I=function(N,R){'use strict';const P=N&&C.stripLink(N);return N?''===P.trim()?!R||N.length<R?N:N.substring(0,R)+'...':P:''},T=function(N){'use strict';return N.replace(/[ \t]+/g,' ')},L=function(N){'use strict';return N.replace(/\r/g,'').split('\n').map(R=>R.trim()).join('\n')};u.exports=function(N,R){'use strict';return L(T(I(N,R)))}},function(u,h,E){const C=E(9);u.exports=function I(T,L,N,R){'use strict';const P=!R&&(!T.formatVersion||3>T.formatVersion);R=R||(P?1:0),!N&&(P||R)&&L(T,R),C(T).forEach(function(D){I(D,L,N,R+1)}),N&&(P||R)&&L(T,R)}},function(u){u.exports=function(C){'use strict';const I=C&&C.type||'personal';return C.prefix+C.price+C.postfix+' '+C.period+' '+I+' subscription'}},function(u){u.exports=function(C){'use strict';const I=function(T){return decodeURIComponent(T.replace(/\+/g,' '))};return C.substr(1).split('&').reduce(function(T,L){const N=L.split('=').map(I);return T[N[0]]=N[1],T},{})}},function(u,h,E){const C=E(1);u.exports=function(T){'use strict';const L=this;let N;N=T.responseXML||T.responseText?T.responseXML||C.parseXML(T.responseText):T,N=N&&C(N),L.valueOf=function(R){return N&&N.find(R).first().text()}}},,function(u,h,E){const C=E(2).observable;u.exports=function(){'use strict';const T=C(this);let L;T.signOut=function(){T.dispatchEvent('notAuthenticated','signed-out')},T.getProfile=function(){return Promise.resolve(L)},T.setSuggestedEmail=function(N){T.dispatchEvent('suggestedEmail',N)},T.authenticationStarted=function(){T.dispatchEvent('authenticating')},T.authenticatedProfile=function(N){L=N,T.dispatchEvent('authenticated',N)},T.authenticationFailed=function(){L=!1,T.dispatchEvent('notAuthenticated')}}},function(u,h,E){const C=E(0);u.exports=function(T,L,N,R,P,D){'use strict';let M,W;const O=this,H=D&&D.onetimePassword||E(31),U='GoldApi',z=function(V){return C.contains(['not-authenticated','invalid-args','server-error','user-exists','email-exists','not-registered','domain-expired','domain-not-purchased','email-already-linked','max-linked-exceeded','card_declined','incorrect_number','invalid_expiry_month','invalid_expiry_year','invalid_cvc','processing_error','already-a-customer'],V)?V:'network-error'};O.exec=function(V,X){return new Promise(function(Y,G){const K=N.timer(U,V);T({url:L+'/'+V,dataType:'json',data:JSON.stringify(X),contentType:'application/json',processData:!1,type:'POST'}).then(function(Q){K.end(),Y(Q)},function(Q){K.end();const J=Q&&Q.responseText;N.log(U,'error',V+':'+J),G(z(J))})})},O.restoreLicenseWithGoogle=function(V){return O.exec('license/request_license_using_google',{token:V}).catch(function(X){if('not-registered'!==X){if('domain-expired'===X||'domain-not-purchased'===X)return void P.disableDomainRegistration(!0);throw X}})},O.getSubscription=function(V){return!V||C.isEmpty(V)?Promise.resolve(!1):O.exec('license/subscription',{license:V})},['delete','undelete'].forEach(function(V){O[V+'File']=function(X,Y){return X&&!C.isEmpty(X)&&Y?O.exec('file/'+V,{license:X,fileKey:Y}):Promise.reject('not-authenticated')}}),O.exists=function(V,X){return!V||C.isEmpty(V)?Promise.reject('not-authenticated'):!X||C.isEmpty(X)?Promise.reject('invalid-args'):O.exec('file/exists',{license:V,fileKey:X})},O.fileUrl=function(V,X){return!V||C.isEmpty(V)?Promise.reject('not-authenticated'):!X||C.isEmpty(X)?Promise.reject('invalid-args'):O.exec('file/url',{license:V,fileKey:X})},O.generateSaveConfiguration=function(V){const X=V?{license:V}:{};return O.exec('file/upload_config',X)},O.generateExportConfiguration=function(V,X){return O.exec('file/export_config',{license:V,format:X})},O.generateImportConfiguration=function(V){return O.exec('file/import_config',{mimeType:V})},O.listFiles=function(V){return O.exec('file/list',{license:V}).then(function(Y){const G=V.account+'/',K=C.map(Y.list,function(Q){return{modifiedDate:Q.LastModified,title:Q.Key.slice(G.length)}});return K})},O.requestCode=function(V){return M=H(),W=V,O.exec('license/request_code',{identifier:V,one_time_pw:M})},O.restoreLicenseWithCode=function(V){return M&&W?O.exec('license/request_license_using_code',{identifier:W,one_time_pw:M,code:V}):Promise.reject('no-code-requested')},O.register=function(V,X){return O.exec('license/register',{to_email:X,account_name:V,source:R&&R.getHostName()})},O.registerGoogleDomain=function(V){return O.exec('license/register_google_domain',{token:V})},O.cancelSubscription=function(V){return O.exec('license/cancel_subscription',{license:V})},O.stripePayment=function(V,X,Y,G){return O.exec('stripe/payment',{accountName:V,planId:X,stripeToken:Y,args:G})},O.stripeCardChange=function(V,X){return O.exec('stripe/card_change',{license:V,stripeToken:X})},O.addLinkedEmail=function(V,X){return O.exec('license/email/link',{license:V,email:X})},O.removeLinkedEmail=function(V,X){return O.exec('license/email/unlink',{license:V,email:X})}}},function(u,h,E){const C=E(91);u.exports=function(T,L){'use strict';const N=this,R=function(P){return L&&L.authenticationStarted(),T.authorize(P).then(function(D){return T.getUserProfile(D,P.login_hint).then(function(M){return C(D,M)})}).then(function(D){return L&&L.authenticatedProfile(D),D}).catch(function(D){throw L&&L.authenticationFailed(D),D})};N.backgroundAuthenticate=function(P){return R({login_hint:P,immediate:!0})},N.modalAuthenticate=function(P){return T.setToken(null),R({login_hint:P,immediate:!1,authuser:-1})},N.changeAccount=function(){return R({prompt:'select_account'})}}},function(u,h,E){const C=E(1);C.fn.contactLinkWidget=function(I,T){'use strict';return C(this).each(function(){const L=C(this),N=/^mailto:/i.test(I.contactLink);'A'===this.tagName?(L.attr('href',I.contactLink),!N&&L.attr('target','_blank').on('click',function(){return T.popup(I.contactLink),!1})):L.on('click',function(){N?T.locationReplace(I.contactLink):T.popup(I.contactLink)})})}},function(u,h,E){var C=E(0),I=E(17),T=E(16);u.exports=function(N,R){'use strict';var D=function(){P=void 0},M=function ce(pe){return pe=pe||N,pe.ideas?C.reduce(pe.ideas,function(ue,he){return Math.max(ue,ce(he))},parseInt(pe.id,10)||0):parseInt(pe.id,10)||0},W=function(pe){return pe=pe||R,P||(P=M()),P+=1,pe?P+'.'+pe:P},O=function(ce,pe){var ue=ce.id===N.id;return ce.id?D():ce.id=W(pe),ce.ideas&&C.each(ce.ideas,function(he,ge){!ue&&he.attr&&he.attr.group&&C.isEmpty(he.ideas)?delete ce.ideas[ge]:ce.ideas[parseFloat(ge)]=O(he,pe)}),ce.title||(ce.title=''),ce.containsDirectChild=ce.findChildRankById=function(he){return parseFloat(C.reduce(ce.ideas,function(ge,me,fe){return me.id==he?fe:ge},void 0))},ce.findSubIdeaById=function(he){var ge=C.find(ce.ideas,function(me){return me.id==he});return ge||C.reduce(ce.ideas,function(me,fe){return me||fe.findSubIdeaById(he)},void 0)},ce.isEmptyGroup=function(){return!N.isRootNode(ce.id)&&ce.attr&&ce.attr.group&&C.isEmpty(ce.ideas)},ce.find=function(he){var ge=he(ce)?[C.pick(ce,'id','title')]:[];return 0===C.size(ce.ideas)?ge:C.reduce(ce.ideas,function(me,fe){return C.union(me,fe.find(he))},ge)},ce.getAttr=function(he){return ce.attr&&ce.attr[he]&&C.clone(ce.attr[he])},ce.sortedSubIdeas=function(){var he=[],ge,me;return ce.ideas?(ge=C.groupBy(C.map(C.keys(ce.ideas),parseFloat),function(fe){return 0<fe}),me=C.sortBy(ge[!0],Math.abs).concat(C.sortBy(ge[!1],Math.abs)),C.each(me,function(fe){he.push(ce.ideas[fe])}),he):[]},ce.traverse=function(he,ge){ge||ce===N||he(ce),C.each(ce.sortedSubIdeas(),function(me){me.traverse(he,ge)}),ge&&ce!==N&&he(ce)},ce},H=function(ce,pe){var ue;return(pe=pe||1,0===C.size(ce))?0:(ue=C.keys(ce),ue.push(0),C.max(C.map(ue,parseFloat),function(he){return he*pe}))},U=function(ce){return!!C.find(N.ideas,function(pe){return pe.id===ce})},z=function(ce){var he=1,pe,ue;return U(ce.id)&&(ue=C.countBy(ce.ideas,function(ge,me){return 0>me}),(ue['true']||0)<ue['false']&&(he=-1)),pe=H(ce.ideas,he)+he,pe},V=function(ce,pe){var ue;return ce.ideas=ce.ideas||{},ue=z(ce),ce.ideas[ue]=pe,ue},X=function(ce){return N.id==ce?N:N.findSubIdeaById(ce)},Y=function(ce,pe){return C(C.map(C.keys(ce.ideas),parseFloat)).reject(function(ue){return 0>ue*pe})},G=function(ce){return 0>ce?-1:1},K={},Q={},J=!1,Z={},ee=function(ce,pe,ue){ue?N.dispatchEvent('changed',ce,pe,ue):N.dispatchEvent('changed',ce,pe)},te=function(ce,pe,ue,he){var ge;return'batch'!==ce&&!Z[he]&&K&&K[he]&&0!==K[he].length?void(ge=K[he].pop(),'batch'===ge.eventMethod?K[he].push({eventMethod:'batch',eventArgs:ge.eventArgs.concat([[ce].concat(pe)]),undoFunction:function(){ue(),ge.undoFunction()}}):K[he].push({eventMethod:'batch',eventArgs:[[ge.eventMethod].concat(ge.eventArgs)].concat([[ce].concat(pe)]),undoFunction:function(){ue(),ge.undoFunction()}}),J?N.dispatchEvent('changed','redo',void 0,he):(ee(ce,pe,he),Q[he]=[])):void ae(ce,pe,ue,he)},ae=function(ce,pe,ue,he){var ge={eventMethod:ce,eventArgs:pe,undoFunction:ue};return Z[he]?void Z[he].push(ge):void(!K[he]&&(K[he]=[]),K[he].push(ge),J?N.dispatchEvent('changed','redo',void 0,he):(ee(ce,pe,he),Q[he]=[]))},ie=function(ce,pe,ue){return ce.ideas[pe]=ce.ideas[ue],delete ce.ideas[ue],function(){return ce.ideas[ue]||!ce.ideas[pe]?!1:void(ce.ideas[ue]=ce.ideas[pe],delete ce.ideas[pe])}},oe=function(ce){var pe=(ce+'').indexOf('.');return 0<pe&&ce.substr(pe+1)},re={},de={},se='/xxxxxxxx-yxxx-yxxx-yxxx-xxxxxxxxxxxx/'.replace(/[xy]/g,function(ce){var pe=0|16*Math.random(),ue='x'===ce?pe:8|3&pe;return ue.toString(16)})+(R||''),le=function(ce,pe,ue){var he;if(!ce)return!1;if(he=C.extend({},ce.attr),ce.attr=C.extend({},ce.attr),!ue||'false'===ue||C.isObject(ue)&&C.isEmpty(ue)){if(!ce.attr[pe])return!1;delete ce.attr[pe]}else{if(C.isEqual(ce.attr[pe],ue))return!1;ce.attr[pe]=JSON.parse(JSON.stringify(ue))}return 0===C.size(ce.attr)&&delete ce.attr,function(){ce.attr=he}},P;return N.setConfiguration=function(ce){de=ce||{}},N.getSessionKey=function(){return R},N.nextSiblingId=function(ce){var pe=N.findParent(ce),ue,he,ge;return!!pe&&(ue=pe.findChildRankById(ce),he=Y(pe,ue),ge=C.reject(he,function(me){return Math.abs(me)<=Math.abs(ue)}),0!==ge.length&&pe.ideas[C.min(ge,Math.abs)].id)},N.sameSideSiblingIds=function(ce){var pe=N.findParent(ce),ue=pe.findChildRankById(ce);return C.without(C.map(C.pick(pe.ideas,Y(pe,ue)),function(he){return he.id}),ce)},N.getAttrById=function(ce,pe){var ue=X(ce);return ue&&ue.getAttr(pe)},N.previousSiblingId=function(ce){var pe=N.findParent(ce),ue,he,ge;return!!pe&&(ue=pe.findChildRankById(ce),he=Y(pe,ue),ge=C.reject(he,function(me){return Math.abs(me)>=Math.abs(ue)}),0!==ge.length&&pe.ideas[C.max(ge,Math.abs)].id)},N.clone=function(ce){var pe=ce&&ce!=N.id&&N.findSubIdeaById(ce)||N;return JSON.parse(JSON.stringify(pe))},N.cloneMultiple=function(ce){return C.map(ce,N.clone)},N.calculatePath=function(ce,pe,ue){return N.isRootNode(ce)?[]:(pe=pe||[N],ue=ue||N,ue.containsDirectChild(ce)?pe:C.reduce(ue.ideas,function(he,ge){return he||N.calculatePath(ce,[ge].concat(pe),ge)},!1))},N.getSubTreeIds=function(ce){var pe=[],ue=function(he){return C.isEmpty(he.ideas)?[]:void C.each(he.sortedSubIdeas(),function(ge){ue(ge),pe.push(ge.id)})};return ue(N.findSubIdeaById(ce)||N),pe},N.findParent=function(ce,pe){return pe=pe||N,!N.isRootNode(ce)&&(pe.containsDirectChild(ce)?pe:C.reduce(pe.ideas,function(ue,he){return ue||N.findParent(ce,he)},!1))},N.isBatchActive=function(ce){return!!Z[ce||R]},N.startBatch=function(ce){N.endBatch(ce),Z[ce||R]=[]},N.discardBatch=function(ce){Z[ce||R]=void 0},N.endBatch=function(ce){var pe=ce||R,ue=Z[pe],he,ge,me;Z[pe]=void 0,C.isEmpty(ue)||(1===C.size(ue)?ae(ue[0].eventMethod,ue[0].eventArgs,ue[0].undoFunction,pe):(he=C.map(ue,function(fe){return[fe.eventMethod].concat(fe.eventArgs)}),ge=C.sortBy(C.map(ue,function(fe){return fe.undoFunction}),function(fe,ye){return-1*ye}),me=function(){C.each(ge,function(fe){fe()})},ae('batch',he,me,pe)))},N.execCommand=function(ce,pe,ue){return!!re[ce]&&re[ce].apply(N,[ue||R].concat(C.toArray(pe)))},N.batch=function(ce){var pe=N.isBatchActive(),ue;pe||N.startBatch();try{ue=ce()}catch(he){throw pe||N.discardBatch(),he}return pe||N.endBatch(),ue},re.batch=function(ce){N.startBatch(ce);try{C.each(C.toArray(arguments).slice(1),function(pe){N.execCommand(pe[0],pe.slice(1),ce)})}finally{N.endBatch(ce)}},N.pasteMultiple=function(ce,pe){return N.batch(function(){return C.map(pe,function(ue){return N.paste(ce,ue)})})},N.paste=function(){return N.execCommand('paste',arguments)},re.paste=function(ce,pe,ue,he){var ge=pe==N.id?N:N.findSubIdeaById(pe),me=function(ve){var xe=C.omit(ve,'ideas','id','attr'),be=1,we,Ee;return xe.attr=C.omit(ve.attr,de.nonClonedAttributes),C.isEmpty(xe.attr)&&delete xe.attr,ve.ideas&&(we=C.groupBy(C.map(C.keys(ve.ideas),parseFloat),function(ke){return 0<ke}),Ee=C.sortBy(we[!0],Math.abs).concat(C.sortBy(we[!1],Math.abs)),xe.ideas={},C.each(Ee,function(ke){xe.ideas[be++]=me(ve.ideas[ke])})),xe},fe,ye;return(he&&(P=parseInt(he,10)-1),fe=ue&&(ue.title||ue.attr)&&O(me(ue),oe(he)),ge&&fe)&&(ye=V(ge,fe),he&&D(),le(fe,'position'),ae('paste',[pe,ue,fe.id],function(){delete ge.ideas[ye]},ce),fe.id)},N.flip=function(){return N.execCommand('flip',arguments)},re.flip=function(ce,pe){var ge=N.findParent(pe),fe=ge&&N.isRootNode(ge.id)&&ge.findChildRankById(pe),ue,he,me;return!!fe&&(he=H(ge.ideas,-1*G(fe)),ue=he-10*G(fe),me=ie(ge,ue,fe),ae('flip',[pe],me,ce),!0)},N.initialiseTitle=function(){return N.execCommand('initialiseTitle',arguments)},re.initialiseTitle=function(ce,pe,ue){var he=X(pe),ge;return!!he&&(ge=he.title,ge!=ue)&&(he.title=ue,te('initialiseTitle',[pe,ue],function(){he.title=ge},ce),!0)},N.updateTitle=function(){return N.execCommand('updateTitle',arguments)},re.updateTitle=function(ce,pe,ue){var he=X(pe),ge;return!!he&&(ge=he.title,ge!=ue)&&(he.title=ue,ae('updateTitle',[pe,ue],function(){he.title=ge},ce),!0)},N.addSubIdea=function(){return N.execCommand('addSubIdea',arguments)},re.addSubIdea=function(ce,pe,ue,he){var me=X(pe),ge,fe;return!!me&&(he&&X(he)?!1:(ge=O({title:ue,id:he}),fe=V(me,ge),ae('addSubIdea',[pe,ue,ge.id],function(){delete me.ideas[fe]},ce),ge.id))},N.removeMultiple=function(ce){var pe;return N.startBatch(),pe=C.map(ce,N.removeSubIdea),N.endBatch(),pe},N.removeSubIdea=function(){return N.execCommand('removeSubIdea',arguments)},re.removeSubIdea=function(ce,pe){var ue,he,ge,me;return(N.isRootNode(pe)?1<C.size(N.ideas)&&(ue=N):ue=N.findParent(pe),!!ue)&&(he=ue.findChildRankById(pe),ge=ue.ideas[he],delete ue.ideas[he],me=N.links,N.links=C.reject(N.links,function(fe){return fe.ideaIdFrom==pe||fe.ideaIdTo==pe}),ae('removeSubIdea',[pe],function(){ue.ideas[he]=ge,N.links=me},ce),!0)},N.insertIntermediateMultiple=function(ce,pe){return N.batch(function(){var ue=N.insertIntermediate(ce[0],pe&&pe.title);return pe&&pe.attr&&Object.keys(pe.attr).forEach(function(he){N.updateAttr(ue,he,pe.attr[he])}),C.each(ce.slice(1),function(he){N.changeParent(he,ue)}),ue})},N.insertIntermediate=function(){return N.execCommand('insertIntermediate',arguments)},re.insertIntermediate=function(ce,pe,ue,he){var ge,me,fe,ye;return N.id!=pe&&(ye=N.isRootNode(pe)?N:N.findParent(pe),!!ye)&&(he&&X(he)?!1:(ge=ye.findChildRankById(pe),!!ge)&&(me=ye.ideas[ge],fe=O({title:ue,id:he}),ye.ideas[ge]=fe,fe.ideas={1:me},ae('insertIntermediate',[pe,ue,fe.id],function(){ye.ideas[ge]=me},ce),fe.id))},N.changeParent=function(){return N.execCommand('changeParent',arguments)},re.changeParent=function(ce,pe,ue){var ve=X(ue),he,ge,me,fe,ye;return pe!=ue&&!!ve&&(fe=N.findSubIdeaById(pe),!!fe)&&!fe.findSubIdeaById(ue)&&!ve.containsDirectChild(pe)&&(he=N.isRootNode(pe)?N:N.findParent(pe),!!he)&&(ge=he.findChildRankById(pe),me=V(ve,fe),ye=fe.getAttr('position'),le(fe,'position'),delete he.ideas[ge],ae('changeParent',[pe,ue],function(){le(fe,'position',ye),he.ideas[ge]=fe,delete ve.ideas[me]},ce),!0)},N.mergeAttrProperty=function(ce,pe,ue,he){var ge=N.getAttrById(ce,pe)||{};return he?ge[ue]=he:delete ge[ue],C.isEmpty(ge)&&(ge=!1),N.updateAttr(ce,pe,ge)},N.updateAttr=function(){return N.execCommand('updateAttr',arguments)},re.updateAttr=function(ce,pe,ue,he){var ge=X(pe),me;return me=le(ge,ue,he),me&&ae('updateAttr',[pe,ue,he],me,ce),!!me},N.getOrderedSiblingRanks=function(ce,pe){var ue=N.findParent(ce),he=ue&&ue.findChildRankById(ce);return!!he&&(pe&&pe.ignoreRankSide?C.sortBy(C.map(C.keys(ue.ideas),parseFloat)):C.sortBy(Y(ue,he),Math.abs))},N.moveRelative=function(ce,pe,ue){var he=N.findParent(ce),ge=he&&he.findChildRankById(ce),me=N.getOrderedSiblingRanks(ce,ue),fe=me&&me.indexOf(ge),ve=function(){var ke=fe+(0<pe?pe+1:pe);return ue&&ue.ignoreRankSide&&(0>ge?(ke=fe+(0>pe?pe-1:pe),0<me[ke]&&++ke):0>me[ke]&&--ke),ke}(),xe=0<=ve&&me&&me.length&&me[ve],be=xe&&he&&he.ideas[xe],Ee;return!function(){return!!he&&(ue&&ue.ignoreRankSide&&0>ge?ve>me.length-1:0>ve)}()&&(N.startBatch(),ue&&ue.ignoreRankSide&&xe&&be&&0>xe*ge&&N.flip(ce),Ee=N.positionBefore(ce,be&&be.id,he),N.endBatch(),Ee)},N.positionBefore=function(){return N.execCommand('positionBefore',arguments)},re.positionBefore=function(ce,pe,ue,he){var ge,me,fe,ye,ve,xe,be,we;if(he=he||N.findParent(pe),!he)return!1;if(be=he.findChildRankById(pe),pe==ue)return!1;if(ge=0,ue){if(me=he.findChildRankById(ue),!me)return!1;if(fe=Y(he,me),ye=C.reject(C.sortBy(fe,Math.abs),function(Ee){return Math.abs(Ee)>=Math.abs(me)}),ve=0<ye.length?C.max(ye,Math.abs):0,ve==be)return!1;ge=ve+(me-ve)/2}else{if(xe=H(he.ideas,0>be?-1:1),xe==be)return!1;ge=xe+10*(0>be?-1:1)}return ge!=be&&(we=ie(he,ge,be),ae('positionBefore',[pe,ue],we,ce),!0)},I(N),function(){var ce=function(pe,ue){var he,ge,me;return pe!==ue&&(ge=X(pe),!!ge)&&(me=X(ue),!!me)&&(he=C.find(ge.ideas,function(fe){return fe.id===ue})||C.find(me.ideas,function(fe){return fe.id===pe}),!he)};N.addLink=function(){return N.execCommand('addLink',arguments)},re.addLink=function(pe,ue,he){var ge,me;return!!ce(ue,he)&&(ge=C.find(N.links,function(fe){return fe.ideaIdFrom===ue&&fe.ideaIdTo===he||fe.ideaIdFrom===he&&fe.ideaIdTo===ue}),!ge)&&(N.links=N.links||[],me={ideaIdFrom:ue,ideaIdTo:he,attr:{style:{color:'#FF0000',lineStyle:'dashed'}}},N.links.push(me),ae('addLink',[ue,he],function(){N.links.pop()},pe),!0)},N.removeLink=function(){return N.execCommand('removeLink',arguments)},re.removeLink=function(pe,ue,he){for(var ge=0,me;N.links&&ge<N.links.length;){if(me=N.links[ge],me.ideaIdFrom+''===ue+''&&me.ideaIdTo+''===he+'')return N.links.splice(ge,1),ae('removeLink',[ue,he],function(){N.links.push(C.clone(me))},pe),!0;ge+=1}return!1},N.getLinkAttr=function(pe,ue,he){var ge=C.find(N.links,function(me){return me.ideaIdFrom==pe&&me.ideaIdTo==ue});return ge&&ge.attr&&ge.attr[he]&&ge.attr[he]},N.updateLinkAttr=function(){return N.execCommand('updateLinkAttr',arguments)},re.updateLinkAttr=function(pe,ue,he,ge,me){var fe=C.find(N.links,function(ve){return ve.ideaIdFrom==ue&&ve.ideaIdTo==he}),ye;return ye=le(fe,ge,me),ye&&ae('updateLinkAttr',[ue,he,ge,me],ye,pe),!!ye}}(),N.canUndo=function(){return!!(K[R]&&0<K[R].length)},N.canRedo=function(){return!!(Q[R]&&0<Q[R].length)},N.undo=function(){return N.execCommand('undo',arguments)},re.undo=function(ce){var pe;return N.endBatch(),pe=K[ce]&&K[ce].pop(),pe&&pe.undoFunction&&(pe.undoFunction(),Q[ce]||(Q[ce]=[]),Q[ce].push(pe),N.dispatchEvent('changed','undo',[],ce),!0)},N.redo=function(){return N.execCommand('redo',arguments)},re.redo=function(ce){var pe;return N.endBatch(),pe=Q[ce]&&Q[ce].pop(),!!pe&&(J=!0,N.execCommand(pe.eventMethod,pe.eventArgs,ce),J=!1,!0)},N.storeResource=function(){return N.execCommand('storeResource',arguments)},re.storeResource=function(ce,pe,ue){var me=function(){var ve,xe,be;return C.isEmpty(N.resources)?0:(ve=C.keys(N.resources),xe=R?C.filter(ve,RegExp.prototype.test.bind(new RegExp('\\/'+R+'$'))):ve,be=C.map(xe,function(we){return parseInt(we,10)}),C.isEmpty(be)?0:C.max(be))},he,ge;return!ue&&N.resources&&(he=C.find(C.keys(N.resources),function(ye){return N.resources[ye]===pe}),he)?he:(ge=ue||function(){var ye=me()+1;return ye+se}(),N.resources=N.resources||{},N.resources[ge]=pe,N.dispatchEvent('resourceStored',pe,ge,ce),ge)},N.getResource=function(ce){return N.resources&&N.resources[ce]},N.hasSiblings=function(ce){var pe;return!N.isRootNode(ce)&&(pe=N.findParent(ce),pe&&1<C.size(pe.ideas))},N.isRootNode=function(ce){return U(ce)},N.getDefaultRootId=function(){var ce=N&&C.values(N.ideas);return ce&&ce.length&&ce[0].id},T(N),O(N),N}},function(u,h,E){var C=E(19);u.exports=function(I,T){'use strict';var L;return I?(L=C.stripLink(I),''===L.trim()?!T||I.length<T?I:I.substring(0,T)+'...':L):''}},function(u,h,E){var C=E(18);u.exports=function I(T,L,N,R){'use strict';var P=!R&&(!T.formatVersion||3>T.formatVersion);R=R||(P?1:0),!N&&(P||R)&&L(T,R),C(T).forEach(function(D){I(D,L,N,R+1)}),N&&(P||R)&&L(T,R)}},function(u,h,E){const C=E(3).observable,I=E(51);u.exports=function(L,N){'use strict';let R;const P=C(this),D=L.addSubIdea,M=function(ee){return ee&&ee.attr&&ee.attr.group},W=function(ee){const te=L.getIdea().findSubIdeaById(ee);return te&&!M(te)},O=function(ee,te,ae){const ie=te||L.getSelectedNodeId(),oe=L.getIdea(),re=oe.findSubIdeaById(ie);M(re)?D(ee,te,ae):L.addGroupSubidea(ee,{group:'supporting',parentId:ie,initialTitle:ae})},H=L.dropNode,U=function(ee,te,ae){const ie=L.getIdea(),oe=ie.findParent(ee);return te!==ee&&te!==oe.id&&W(te)&&W(ee)?ie.batch(function(){return ie.changeParent(ee,te)&&ie.insertIntermediateMultiple([ee],{title:'group',attr:{group:'supporting',contentLocked:!0}})}):void H(ee,te,ae)},z=L.paste,V=function(ee){const te=W(L.getSelectedNodeId()),ae=z(ee);return te&&ae&&Array.isArray(ae)&&L.getIdea().insertIntermediateMultiple(ae.filter(W),{title:'group',attr:{group:'supporting',contentLocked:!0}}),ae},X=function(ee){return ee&&ee.attr&&'argMappingSimple'===ee.attr.theme},Y=function(ee){return!!X(ee)},G=function(){Y(L.getIdea())?(L.addSubIdea=O,L.dropNode=U,L.paste=V):(L.addSubIdea=D,L.dropNode=H,L.paste=z)},K=function(ee){const te=Y(ee),ae=te&&L.getCurrentLayout().nodes[L.getSelectedNodeId()],ie={active:te};return te&&(R&&(ie.labelsShown=!0),ae&&(ie.canAddParentReason=1!==ae.level,ie.nodeGroupType=ae.attr&&ae.attr.group)),ie},Q=function(){const ee=L.getIdea(),te=K(ee);te&&P.dispatchEvent('argumentMappingContext',te)},J='argumentMapping',Z=function(ee){ee&&Y(L.getIdea())?(R=!0,L.setLabelGenerator(I,J)):R&&(R&&L.setLabelGenerator(!1,J),R=!1),Q()};P.start=function(){L.setTheme('argMappingSimple')},P.addOpposingGroup=function(){L.addGroupSubidea('menu',{group:'opposing'})},P.addSupportingGroup=function(){L.addGroupSubidea('menu',{group:'supporting'})},P.addParentGroup=function(){L.insertIntermediateGroup('menu',{group:'supporting'})},P.toggleNodeLabels=function(){Z(!R)},P.toggleGroupType=function(){const ee=L.getIdea(),te=Y(ee),ae=te&&L.getCurrentLayout().nodes[L.getSelectedNodeId()],ie=ae&&ae.attr&&ae.attr.group,oe=ie&&('opposing'===ie?'supporting':'opposing');oe&&ee.updateAttr(L.getSelectedNodeId(),'group',oe)},N.addListener(function(){G(),Z(!0)}),L.addEventListener('themeChanged',function(){G(),Q()}),L.addEventListener('nodeSelectionChanged',function(){Q()}),L.addEventListener('labelGeneratorChange',function(ee,te){ee===J?te?!R&&(R=!0,Q()):(R=!1,Q()):(R=!1,Q())})}},function(u,h,E){const C=E(3).sortedSubIdeas;u.exports=function(T){'use strict';const L={},N=function(M){return M&&M.attr&&M.attr.group},R=function(M,W,O){const H=!O&&(!M.formatVersion||3>M.formatVersion);let U;O=O||(H?1:0),!N(M)&&(H||O)&&W(M,O),C(M).forEach(function(z){U=N(z)?O:O+1,R(z,W,U)})},P=[];return R(T,function(M,W){const O=(P[W]||0)+1;P[W]=O,L[M.id]=W+'.'+O}),L}},function(u,h,E){const C=E(0);u.exports=function(T,L){'use strict';const N=this,R=function(D){const M={},W=D&&D.list,O={'index.html':'index','atlas.json':'config','archive.zip':'archive','thumb.png':'thumb'};return W&&W.length?(C.each(W,function(H){const U=H&&H.Key&&H.Key.split&&H.Key.split('/'),z=U&&U.length&&U[1],V=z&&U[2],X=V&&O[V];X&&(!M[z]&&(M[z]={slug:z}),'index'===X&&(M[z].ts=Date.parse(H.LastModified)),M[z][X]=H)}),C.values(M)):[]},P=function(D,M,W){return Promise.resolve().then(T.getLicense).then(function(O){if(!O||C.isEmpty(O)){if(W)return!1;throw'not-authenticated'}return L.exec(M,C.extend({},D,{license:O}))})};N.exists=function(D){return D?P({slug:D},'atlas/exists',!0):Promise.reject('invalid-args')},N.delete=function(D){return D?P({slug:D},'atlas/delete'):Promise.reject('invalid-args')},N.list=function(){return P({},'atlas/list').then(R)}}},function(u,h,E){const C=E(3).observable;u.exports=function(){'use strict';const T=C(this);let L;T.signOut=function(){L=!1,T.dispatchEvent('notAuthenticated','signed-out')},T.getProfile=function(){return L},T.setSuggestedEmail=function(N){T.dispatchEvent('suggestedEmail',N)},T.authenticationStarted=function(){L=!1,T.dispatchEvent('authenticating')},T.authenticatedProfile=function(N){L=N,T.dispatchEvent('authenticatedProfile',N)},T.authenticationFailed=function(){L=!1,T.dispatchEvent('notAuthenticated')}}},function(u,h,E){const C=E(21);u.exports=function(T,L,N){'use strict';const R=this;let P,D;R.setIdentifier=function(M){return P=N(),D=M,L.exec('license/request_code',{identifier:M,one_time_pw:P})},R.authenticateIdentity=function(M){return M?P&&D?L.exec('license/request_license_using_code',{identifier:D,one_time_pw:P,code:M}).then(function(O){const H=C.build(O);return T.authenticatedProfile(H),H}).catch(function(O){throw T.authenticationFailed(),O}):Promise.reject('no-code-requested'):Promise.reject('invalid-args')}}},function(u,h,E){const C=E(20);u.exports=function(T,L,N){'use strict';const R=this;let P;R.getLicense=function(){return new Promise(function(D,M){const W=T.getProfile(),O=W&&(P||N&&N.getLicense());W?O?D(O):C.isGoogleUserProfile(W)?L.exec('license/request_license_using_google',{token:W.identity.token}).then(function(H){P=H,N&&N.storeLicense(H),D(H)},function(H){'not-registered'===H?D():M(H)}):D(W.identity.token):D()})},T.addEventListener('notAuthenticated authenticatedProfile authenticating',function(){P=!1})}},function(u,h,E){const C=E(0);u.exports=function(T,L){'use strict';const N=this,R=function(P){return P&&'mindmup-gold'===P.accountType&&P.account};N.getLicense=function(){return T.getItem(L)},N.storeLicense=function(P){let D=P;if(C.isString(P))try{D=JSON.parse(P)}catch(M){return!1}return!!R(D)&&(T.setItem(L,D),!0)},N.removeLicense=function(){T.setItem(L,void 0)}}},function(u,h,E){const C=E(20),I=E(0);u.exports=function(L,N,R){'use strict';const P=this,D=function(){R&&R.authenticationStarted()},M=function(U){return R&&R.authenticatedProfile(U),U},W=function(){return R&&R.authenticationFailed(),Promise.reject('not-authenticated')},O=function(U,z){return!!U&&(z&&U.id!==z?!1:U)},H=function(U,z){return D(),L.authorize(I.extend({},N,U)).then(function(V){return O(V,z)}).then(C.build).then(M).catch(W)};P.backgroundAuthenticate=function(U){return H({login_hint:U,immediate:!0},U)},P.authenticate=function(U){return H({login_hint:U,immediate:!1,authuser:-1},U)},P.changeAccount=function(){return L.signOut(),H({prompt:'select_account'})}}},function(u,h,E){const C=E(21);u.exports=function(T,L,N){'use strict';const R=this;R.authenticate=function(){return new Promise(function(P,D){const M=T.getLicense(),W=M&&C.build(M);W?(L.authenticatedProfile(W),P(W)):(L.authenticationFailed(),D('not-authenticated'))})},N.addEventListener('accountRegistered',function(P){const D=P&&C.build(P);D&&T.storeLicense(P)&&L.authenticatedProfile(D)}),L.addEventListener('notAuthenticated authenticating',function(){T.removeLicense()}),L.addEventListener('authenticatedProfile',function(P){C.isLicenseUserProfile(P)&&T.storeLicense(P.identity.token)})}},function(u,h,E){const C=E(0);u.exports=function I(T,L){'use strict';const N=this;let M,W;(function(O){return I.prototype.isPrototypeOf(O)})(T)?(M=T.value(),W=T.decimals()):T===void 0?(M=0,W=0):(M=function(){let O;if(C.isNumber(T)?O=T:C.isString(T)&&(O=parseFloat(T)),C.isNaN(O)||!C.isNumber(O))throw new Error('not a number '+T);return O}(),W=function(){const O=T+'',H=O.indexOf('.');if(L!==void 0){if(!C.isNumber(L)||0>L)throw new Error('invalid decimals '+L);return L}return 0>H?0:O.length-H-1}()),N.toString=function(){return M.toFixed(W)},N.value=function(){return M},N.decimals=function(){return W},N.add=function(O){const H=new I(O);return new I(M+H.value(),Math.max(W,H.decimals()))}}},function(u,h,E){const C=E(0);u.exports=function(T,L,N){'use strict';const R=this,P='GoldApi',D=function(M){return C.contains(['not-authenticated','invalid-args','server-error','user-exists','email-exists','not-registered','domain-expired','domain-not-purchased','email-already-linked','max-linked-exceeded','card_declined','incorrect_number','invalid_expiry_month','invalid_expiry_year','invalid_cvc','processing_error','already-a-customer','stripe-server-error'],M)?M:'network-error'};R.exec=function(M,W){return new Promise(function(O,H){const z=N.timer(P,M);T({url:L+'/'+M,dataType:'json',data:JSON.stringify(W),contentType:'application/json',processData:!1,type:'POST'}).then(O,function(V){const X=V&&V.responseText;N.log(P,'error',M+':'+X),H(D(X))}).always(z.end)})}}},function(u,h,E){const C=E(0);u.exports=function(T){'use strict';const L=this;L.setItem=function(N,R){return T.setItem(N,JSON.stringify(R))},L.getItem=function(N){const R=T.getItem(N);try{return JSON.parse(R)}catch(P){}},L.remove=function(N){T.removeItem(N)},L.removeKeysWithPrefix=function(N){return C.isEmpty(N)?0:function(P){const D=Object.keys(T),M=C.filter(D,function(W){return 0===W.indexOf(P)});return C.each(M,function(W){T.removeItem(W)}),M.length}(N)}}},function(u,h,E){const C=E(0);u.exports=function(T,L){'use strict';let N=[];const R=L(this),P=function(W){N=W&&W.slice&&W.slice(0)||[]},D=function(W){const O=T.getActivatedNodeIds();(W||!C.isEqual(N,O))&&(P(O),R.dispatchEvent('filteredRowsChanged'))},M=D.bind(R,!0);P(T.getActivatedNodeIds()),T.addEventListener('activatedNodesChanged',D),T.addEventListener('nodeTitleChanged',M),R.predicate=function(W){return W&&C.include(N,W.id)},R.cleanup=function(){T.removeEventListener('activatedNodesChanged',D),T.removeEventListener('nodeTitleChanged',M)}}},function(u,h,E){const C=E(0);u.exports=function(T){'use strict';return{predicate:function(L){return L&&C.include(T,L.id)}}}},function(u,h,E){const C=E(0),I=E(59);u.exports=function(L,N,R,P,D,M){'use strict';let U=[],z=[],X=!1,W,O,H,V;const Y=D(this),K=function(){const le=W&&W.getAttr(N);return C.isArray(le)?le.slice(0):[]},Q=function(le){W=le,W&&(z=K(),Y.getMeasurementValues())},J=function(){return z.length&&z||K()},Z=function(){const le=J(),ce=C.contains(le,V)&&V,pe=C.contains(le,O)&&O,ue=ce&&pe&&pe===ce,ge=!!(le&&le.length);return{isActive:X,selectedMeasure:ce,hasSelection:!!ce,hasMeasures:ge,labelledMeasure:pe,canLabelSelected:!!(!ue&&ce),hasLabelledSelected:!!ue}},ee=function(){Y.dispatchEvent('measuresContext',Z())},te=function(){const le=K();0<Y.listeners('measureRemoved').length&&C.each(C.difference(z,le),function(ce){Y.dispatchEvent('measureRemoved',ce)}),0<Y.listeners('measureAdded').length&&C.each(C.difference(le,z),function(ce){Y.dispatchEvent('measureAdded',ce,le.indexOf(ce))}),z=le},ae=function(){Y.dispatchEvent('measureRowsChanged'),ee()},ie=function(le){const ce={};return C.each(le,function(pe){ce[pe.id]=pe}),ce},oe=function(le,ce){const pe=[];return C.each(le.values,function(ue,he){const ge=ce&&ce.values&&ce.values[he]||0;ue!==ge&&pe.push(['measureValueChanged',le.id,he,ue||0])}),ce&&C.each(ce.values,function(ue,he){const ge=!le||!le.values||!le.values[he];ge&&pe.push(['measureValueChanged',ce.id,he,0])}),pe},re=function(le,ce){const pe=ie(ce);let ue=[];return C.each(le,function(he){const ge=pe[he.id];ue=ue.concat(oe(he,ge))}),ue},de=function(){if(0!==Y.listeners('measureValueChanged').length){const le=U,ce=re(Y.getMeasurementValues(),le);C.each(ce,function(pe){Y.dispatchEvent.apply(Y,pe)})}},se=function(){X&&(te(),de(),ee())};Y.getTitle=function(){return W&&W.title||'map measures'},Y.bindContentListeners=function(){const le=P.getIdea();W&&W.removeEventListener('changed',se),Q(le),le&&(Y.dispatchEvent('startFromScratch'),le.addEventListener('changed',se))},Y.editingMeasure=function(le,ce){le&&ce&&P.selectNode(ce,!0,!0),P.setInputEnabled(!le,!0),Y.dispatchEvent('measureEditing',le,ce)},Y.getMeasures=function(){return K()},Y.setActive=function(le){X=le,ee()},Y.setSelectedMeasure=function(le){V=le,ee()},Y.editWithFilter=function(le){H&&Y.removeFilter(),H=le,H&&H.addEventListener&&H.addEventListener('filteredRowsChanged',ae)},Y.addUpMeasurementForAllNodes=function(le){const ce={},pe=function(he){return he?isNaN(parseFloat(he))?0:parseFloat(he):void 0};return W&&le?(W.traverse(function(he){const ge=he.getAttr(R),me=pe(ge&&ge[le]);let fe=new I,ye=!1;void 0!==me&&(fe=new I(me),ye=!0),he.ideas&&C.each(he.ideas,function(ve){void 0!==ce[ve.id]&&(ye=!0,fe=fe.add(ce[ve.id]))}),ye&&(ce[he.id]=fe.toString())},!0),ce):{}},Y.getMeasurementValues=function(){const le=[];return W?(W.traverse(function(ce){const pe={};(!H||H.predicate(ce))&&(C.each(C.extend({},ce.getAttr(R)),function(ue,he){void 0!==ue&&(isNaN(parseFloat(ue))||(pe[he]=parseFloat(ue)))}),le.push({id:ce.id,title:ce.title,values:pe}))}),U=le.slice(0),le):le},Y.addMeasure=function(le){const ce=Y.getMeasures();return W&&le&&''!==le.trim()&&(le=le.trim(),!C.find(ce,function(pe){return pe.toUpperCase()===le.toUpperCase()}))&&(W.updateAttr(W.id,N,ce.concat([le])),!0)},Y.removeMeasure=function(le){if(!W)return!1;if(!le||''===le.trim())return!1;const ce=Y.getMeasures(),pe=C.without(ce,le);C.isEqual(pe,ce)||(W.startBatch(),W.updateAttr(W.id,N,pe),W.traverse(function(ue){W.mergeAttrProperty(ue.id,R,le,!1)}),W.endBatch())},Y.removeSelectedMeasure=function(){const le=Z();le.hasSelection&&Y.removeMeasure(le.selectedMeasure)},Y.labelMeasure=function(le){return(O||le)&&O!==le&&(!le||C.contains(J(),le))&&(le?P.setLabelGenerator(function(){return Y.addUpMeasurementForAllNodes(le)}):P.setLabelGenerator(!1),O=le,ee(),!0)},Y.labelSelectedMeasure=function(){return!!V&&Y.labelMeasure(V)},Y.validate=function(le){return!isNaN(parseFloat(le))&&isFinite(le)},Y.setValue=function(le,ce,pe){return!!Y.validate(pe)&&W.mergeAttrProperty(le,R,ce,pe)},Y.getRawData=function(le){const ce=[],pe=Y.getMeasures();return W?(ce.push(['Name'].concat(pe)),W.traverse(function(ue){(le||!H||H.predicate(ue))&&ce.push([ue.title].concat(C.map(pe,function(he){const ge=ue.getAttr(R)||{},me=ge[he]&&parseFloat(ge[he]);if(void 0!==me&&!isNaN(me))return me})))}),ce):ce},Y.removeFilter=function(){H&&H.cleanup&&H.cleanup(),H&&H.removeEventListener&&H.removeEventListener('filteredRowsChanged',ae),H=void 0},Y.showAddMeasure=function(){Y.dispatchEvent('showAddMeasure')},P.addEventListener('labelGeneratorChange',function(le){le!=='measures'&&(O=!1,ee())}),L.addListener(function(){Y.bindContentListeners()}),Y.bindContentListeners(),Y.editWithFilter(M)}},function(u){u.exports=function(){'use strict';const C=function(){const I=1+Math.random();return(65536*I||0).toString(16).substring(1)};return C()+'-'+C()}},function(u,h,E){const C=E(67),I={testing:E(69),tasks:E(68)};u.exports=function(T,L,N,R){'use strict';let P=I[T];return N&&(P=C(P,L+T+'/'+N+'/',R)),P}},function(u,h,E){const C=E(0);u.exports=function(T,L,N){'use strict';const R={};return C.each(T,function(P,D){const M=C.omit(P,'style');M.icon={height:N,width:N,position:'left',url:L+(D||'not-started')+'.png'},R[D]=M}),R}},function(u){u.exports={'not-started':{description:'Not Started',priority:1,style:{background:!1}},passing:{description:'Done',style:{background:'#00CC00'}},'under-review':{description:'Under review',style:{background:'#00CCFF'}},'in-progress':{description:'In Progress',priority:3,style:{background:'#FFCC00'}},blocked:{description:'Blocked',priority:4,style:{background:'#990033'}},parked:{description:'Parked',priority:2,style:{background:'#FF3300'}}}},function(u){u.exports={'not-started':{description:'Not Started',priority:1,style:{background:!1}},passing:{description:'Passed',style:{background:'#00CC00'}},'in-progress':{description:'In Progress',priority:2,style:{background:'#FFCC00'}},failure:{description:'Failed',priority:999,style:{background:'#FF3300'}}}},function(u,h,E){const C=E(3).observable,I=E(0),T=E(24),L=E(23);u.exports=function(R){'use strict';const P=C(this),D=function(U){return R.getAttr(T.statusConfigAttr)[U]},M=function(U){const z=D(U);return z&&z.priority},O=function(U){const z=R.getAttrById(U,T.statusAttributeName),V=z&&D(z);let X;V&&(V.icon&&R.updateAttr(U,'icon',!1),V.style&&(X=R.getAttrById(U,'style'),R.updateAttr(U,'style',I.omit(X,I.keys(V.style))))),R.updateAttr(U,T.statusAttributeName,!1)},H=function(U){O(U.id),I.each(U.ideas,H)};P.setStatusConfig=function(U){const z={};return U?void(I.each(U,function(V,X){z[X]=I.clone(V),isNaN(z[X].priority)&&delete z[X].priority}),R.updateAttr(R.id,T.statusConfigAttr,z)):void R.updateAttr(R.id,T.statusConfigAttr,!1)},P.getStatusConfig=function(){return R.getAttr(T.statusConfigAttr)},P.updateStatus=function(U,z){let V=!1;const X=function(G,K){const Q=D(K);let J;return!!Q&&(O(G),Q.style&&(J=I.extend({},R.getAttrById(G,'style'),Q.style),R.updateAttr(G,'style',J)),Q.icon&&R.updateAttr(G,'icon',Q.icon),R.updateAttr(G,T.statusAttributeName,K))},Y=function(G){const K=I.uniq(I.map(G.ideas,function(Q){return Q.getAttr(T.statusAttributeName)}));return 1===K.length?K[0]:!!I.some(K,M)&&I.max(K,M)};return X(U,z)&&(I.each(R.calculatePath(U),function(G){const K=Y(G);K&&X(G.id,K)}),V=!0),V},P.setMeasurements=function(U){R.updateAttr(R.id,L.configurationAttributeName,U)},P.clear=function(){H(R)},P.refresh=function(){P.dispatchEvent('configChanged',R.getAttr(T.statusConfigAttr)),P.dispatchEvent('measurementsChanged',R.getAttr(L.configurationAttributeName))},R.addEventListener('changed',function(U,z){U&&z&&'updateAttr'===U&&z[0]==R.id&&(z[1]===T.statusConfigAttr?P.dispatchEvent('configChanged',z[2]):z[1]===L.configurationAttributeName&&P.dispatchEvent('measurementsChanged',z[2]))})}},function(u,h,E){const C=E(72),I=E(75);u.exports={buildConfig:E(66),sortConfig:E(74),Model:I(C)}},function(u,h,E){u.exports={StatusCalculator:E(76),ProgressModel:E(73)}},function(u,h,E){const C=E(3).observable,I=E(70),T=E(0);u.exports=function(N,R,P){'use strict';let U=!1,D,M,W,O,H,z,V;const X=C(this),Y=X.addEventListener,G=function(){P&&P.log('CalcModel','Projection:'+V)},K=function(ee){return T.find(R.getProjectionsFor(D),function(te){return te.name===ee})},Q=function(){V&&0<X.listeners('dataUpdated').length&&(O=R.dataAdapter(D,W),X.dispatchEvent('dataUpdated',K(V).iterator(O),W))},J=function(){const ee=!!z;return{isActive:U,isEnabled:ee,currentStatusConfig:z}},Z=function(){X.dispatchEvent('progressContext',J())};X.setActive=function(ee){U=ee,Z()},X.addEventListener=function(ee,te){D&&'dataUpdated'===ee&&0===X.listeners('dataUpdated').length&&(O=R.dataAdapter(D,W),G()),Y(ee,te),D&&'dataUpdated'===ee&&te.apply(void 0,[K(V).iterator(O),W])},X.setFilter=function(ee){T.isEqual(ee,W)||(W=ee,Q())},X.getFilter=function(){return W},X.getActiveProjection=function(){return V},X.dataUpdated=function(ee){D=ee;const te=T.map(R.getProjectionsFor(D),function(ae){return ae.name});T.isEqual(te,H)||(H=te,X.dispatchEvent('projectionsChanged',H)),T.include(H,V)||(V=T.first(H)),Q()},X.setActiveProjection=function(ee){V===ee||K(ee)&&(V=ee,G(),Q())},X.getFilterPredicate=function(){const ee=T.map(O||R.dataAdapter(D,W),function(te){return te.id});return function(te){return T.include(ee,te.id)}},X.getContentStatusUpdater=function(){return M},X.bindContentListeners=function(){const ee=N.getIdea(),te=function(){X.dataUpdated(ee)};M=new I(ee),z=M.getStatusConfig(),M.addEventListener('configChanged',function(ae){z=ae,X.setFilter({}),Z(),X.dispatchEvent('configChanged',ae)}),N.addEventListener('nodeSelectionChanged',function(){const ae=X.getFilter()||{};ae.subtree&&te()}),ee.addEventListener('changed',te),te()},X.resetProgress=function(){M&&M.clear()},X.setStatusConfig=function(ee){M&&M.setStatusConfig(ee)},X.updateActivatedStatus=function(ee){N.applyToActivated(function(te){M.updateStatus(te,ee)})},X.toggleFilterProperty=function(ee){W||(W={}),W[ee]?delete W[ee]:'subtree'===ee?W.subtree=N.getCurrentlySelectedIdeaId:W[ee]=!0,Q()},X.setFilterStatus=function(ee,te){if(!W){if(!z)return;W={}}W.statuses||(W.statuses=T.map(z,function(ie,oe){return oe}));const ae=T.contains(W.statuses,ee);ae&&!te?(W.statuses=T.without(W.statuses,ee),Q()):!ae&&te&&(W.statuses.push(ee),Q())},X.selectAllFilterStatuses=function(){W&&W.statuses&&(delete W.statuses,Q())}}},function(u,h,E){const C=E(0);u.exports=function(T){'use strict';const L=C.map(T,function(R,P){return C.extend({key:P},R)}),N=C.sortBy(L,function(R){return R.description||R.key});return C.sortBy(N,function(R){return-1*R.priority||0})}},function(u){u.exports=function(C){'use strict';return function(I,T){const L=new C.StatusCalculator,N=new C.ProgressModel(I,L,T);return N}}},function(u,h,E){const C=E(0),I=E(24),T=E(23);u.exports=function(){'use strict';const N=this,R=function(D){return D&&D.attr&&D.attr[I.statusConfigAttr]||{}},P=function(D){return D&&D.attr&&D.attr[T.configurationAttributeName]||[]};N.getProjectionsFor=function(D){const M=[],W=R(D),O=function(){return C.reduce(this,function(z,V){return z+V[1]},0)},H=function(z,V){return{name:z,iterator:function(X,Y){const G=V(X,Y),K=C.reduce(G,function(Q,J){return Q+J[1]},0);return 0===K?[]:C.map(G,function(Q){const J=(100*Q[1]/K).toFixed(0)+'%';return[Q[0],J]})}}},U=function(z,V){return{name:z,iterator:function(X){const G=C.map(function(){const Q={};return C.each(X,function(J){let Z=1;const ee=Q[J.status]||0;V&&(Z=V(J)),Z&&(Q[J.status]=ee+Z)}),Q}(),function(Q,J){return[J,Q]}),K=G.sort(function(Q,J){const Z=W[Q[0]]||{},ee=W[J[0]]||{},te=Z.priority||0,ae=ee.priority||0;return te===ae?Z.description.localeCompare(ee.description):ae-te});return C.each(K,function(Q){Q[0]=W[Q[0]]&&W[Q[0]].description||Q[0]}),K.total=O,K}}};return M.push(U('Counts')),M.push(H('Percentages',M[0].iterator)),C.each(P(D),function(z){const V=U('Total '+z,function(X){const Y=parseFloat(X.measurements&&X.measurements[z])||0;return Y});M.push(V),M.push(H('Percentage '+z,V.iterator))}),M},N.dataAdapter=function(D,M){const W=D&&D.attr&&D.attr[I.statusConfigAttr]||{},O=[];return M=M||{},M.subtree&&(D=D.findSubIdeaById(M.subtree())||D),D.traverse(function(H){const U=H.attr&&H.attr[I.statusAttributeName];let z;!M.includeParents&&C.find(H.ideas,function(V){return V.attr&&V.attr[I.statusAttributeName]===U})||U&&W[U]&&(!M.statuses||C.include(M.statuses,U))&&(z={status:U,id:H.id},H.title&&(z.title=H.title),H.attr&&H.attr[T.measurementAttributeName]&&(z.measurements=H.attr[T.measurementAttributeName]),O.push(z))}),O}}},function(u,h,E){const C=E(0);u.exports=function(T,L,N){'use strict';const R=this;this.save=function(P,D,M){return new Promise(function(W,O){const H=T.buildFormData(),U=M&&M.isPrivate?'bucket-owner-read':'public-read',z=function(X){M&&M.notify&&(X.lengthComputable?M.notify(Math.round(100*X.loaded/X.total,2)+'%'):M.notify())};['key','AWSAccessKeyId','policy','signature'].forEach(function(X){H.append(X,D[X])}),H.append('acl',U),H.append('Content-Type',D['Content-Type']||'text/plain'),H.append('file',P),L({url:'https://'+D.s3BucketName+'.s3.amazonaws.com/',type:'POST',processData:!1,contentType:!1,data:H,xhr:function(){const X=T.buildXMLHttpRequest();return X.upload.addEventListener('progress',z),X}}).then(W,function(X){let G,K;if(403===X.status)return void O('failed-authentication');try{G=N(X),K=G('Error Code')}catch(Q){}return K?void O({EntityTooLarge:'file-too-large'}[K]):void O('network-error')},z)})},R.pollerDefaults={sleepPeriod:1e3,timeoutPeriod:1.2e5},R.poll=function(P,D){return new Promise(function(M,W){let H=!0,O,U;const z=function(){return H&&!(D.stoppedSemaphore&&D.stoppedSemaphore())},V=function(){const Y=function(){z()&&(D.sleepTimeoutId=T.setTimeout(V,D.sleepPeriod))};z()?L({url:P,timeout:D.sleepPeriod,method:'GET'}).then(function(K){const Q=N(K)('Contents Key');H&&Q?(T.clearTimeout(U),M(Q)):Y()},Y):(T.clearTimeout(U),M())};D=C.extend({},R.pollerDefaults,D),z()?(U=T.setTimeout(function(){z()?W('polling-timeout'):M(),T.clearTimeout(O),H=!1},D.timeoutPeriod),V()):M()})},R.loadUrl=function(P){return new Promise(function(D,M){L(P,{cache:!1}).then(D,function(W){404===W.status||403===W.status?M('map-not-found'):M('network-error')})})}}},function(u,h,E){const C=E(0),I=function(N){'use strict';return N&&'delinquent'===N.status},T=function(N){'use strict';return!!(N&&N.status&&C.contains(['active','cancelled'],N.status))},L=function(N){'use strict';const R=N&&N.expiry,P=new Date(1e3*R);return P&&P.toDateString()||''};u.exports={isActive:T,forSubscription:function(N,R){'use strict';const P=!!(R&&T(R)),D=R&&R.expiry&&L(R)||'',M=R&&R.linkedEmails&&R.linkedEmails.length||0,W=R&&R.maxLinkedEmails||0;return C.extend({},{license:N,subscription:R,active:T(R),description:function(){return R?I(R)&&R.period&&R.price?'Payment failed for '+R.period+'ly renewal of '+R.price+' on '+D:P?R.expiry?R.period?'MindMup Gold is active, '+R.period+'ly renewal of '+R.price+' next due on '+D:'MindMup Gold is active until '+L(R)+'. It will not automatically renew':'MindMup Gold is active. It will not automatically renew':'MindMup Gold is not active':'MindMup Gold is not active'}(),renewalDate:D,linkedEmailsRemaining:W-M})}}},function(u,h,E){const C=E(0),I=E(3).observable;u.exports=function(L,N,R,P){'use strict';let D;const M=I(this),W=function(H,U,z){const V={name:'Mindmup Gold',key:L,image:N,email:H,billingAddress:!0,allowRememberMe:!1,token:U};return z&&(V.panelLabel=z),R.configure(V)},O=function(H,U,z){return M.dispatchEvent('loading-stripe-api'),new Promise(function(V,X){const Y=z&&z.amountRequired,G=z&&z.amount,K=U&&(!Y||G)&&L,Q=z&&z.buttonLabel,J=K&&W(H,V,Q),Z={description:U,opened:function(){M.dispatchEvent('loading-stripe-api-complete'),z&&z.notify&&z.notify('stripe-shown')},closed:function(){M.dispatchEvent('loading-stripe-api-complete'),z&&z.notify&&z.notify('stripe-hidden')}};K?J?(G&&(Z.amount=G),J.open(Z)):(M.dispatchEvent('loading-stripe-api-failed'),X('stripe-not-available')):(M.dispatchEvent('loading-stripe-api-failed'),X('invalid-args'))})};M.purchaseSubscription=function(H,U,z,V,X,Y){const G=C.extend({},Y,{amountRequired:!0,amount:X});return O(z,V,G).then(function(K){if(!K)throw'no-payment-token';return Y&&Y.notify&&Y.notify('stripe-gold-api-payment'),P.stripePayment(K,U,H)})},M.changeCard=function(){return O(D,'New Payment Info',{buttonLabel:'Change Payment Info'}).then(function(U){if(!U)throw'no-payment-token';return P.stripeCardChange(U)},function(){M.dispatchEvent('loading-stripe-api-failed')})},P.addEventListener('goldAccountInfo',function(H){D=H&&H.subscription&&H.subscription.email})}},function(u,h,E){const C=E(3).observable,I=E(0),T=E(78);u.exports=function(N,R,P){'use strict';const D=C(this),M=function(U,z){return N.getLicense().then(function(V){if(!V||I.isEmpty(V))throw'not-authenticated';return R.exec(z,I.extend({},U,{license:V}))})},W=function(U){return U&&U.license&&D.dispatchEvent('accountRegistered',U.license,U),U},O=function(U,z){return D.dispatchEvent('updating-subscription'),M(U,z).then(function(V){return D.getGoldAccountDetails().then(function(){return V})}).catch(function(V){throw D.dispatchEvent('updating-subscription-failed'),V})},H=function(U,z){return U?O({email:U},z):Promise.reject('invalid-args')};D.validEmail=function(U){return!!(U&&2<U.length&&0<U.indexOf('@'))},D.validAccountName=function(U){return!!(U&&3<U.length&&/^[a-z][a-z0-9]{3,20}$/.test(U))},D.register=function(U,z,V){return U&&z?R.exec('license/register',{to_email:z,account_name:U,source:V}).then(W):Promise.reject('invalid-args')},D.registerGoogleDomain=function(U,z){return U?R.exec('license/register_google_domain',{token:U,source:z}).then(W):Promise.reject('invalid-args')},D.addLinkedEmail=function(U){return H(U,'license/email/link')},D.removeLinkedEmail=function(U){return H(U,'license/email/unlink')},D.getSubscription=function(){return M({},'license/subscription')},D.cancelSubscription=function(){return O({},'license/cancel_subscription')},D.stripeCardChange=function(U){return O({stripeToken:U},'stripe/card_change')},D.stripePayment=function(U,z,V){return D.dispatchEvent('updating-subscription'),R.exec('stripe/payment',{accountName:V,planId:z,stripeToken:U}).then(function(X){return D.getGoldAccountDetails().then(function(){return X})}).catch(function(X){throw D.dispatchEvent('updating-subscription-failed'),X})},D.getGoldAccountDetails=function(){return D.dispatchEvent('retrievingSubscription'),N.getLicense().then(function(U){if(!U||I.isEmpty(U))throw D.dispatchEvent('notRegistered',T.forSubscription(),'not-registered'),'not-authenticated';return D.getSubscription().then(function(z){const V=T.forSubscription(U,z);return D.dispatchEvent('goldAccountInfo',V),z?V.active?D.dispatchEvent('subscribed',V):D.dispatchEvent('expiredSubscription',V):D.dispatchEvent('notRegistered',V,'not-registered'),V})}).catch(function(U){throw D.dispatchEvent('load-subscription-failed',U),U})},D.pollForAccountInfo=function(){return N.getLicense().then(function(U){if(!U||I.isEmpty(U))throw'not-authenticated';return new Promise(function(z,V){P.poll(D.getSubscription,T.isActive).then(function(X){const Y=T.forSubscription(U,X);D.dispatchEvent('subscribed',Y),z(Y)},V)})})},D.cancelPolling=function(){P.cancelPolling()},D.purchaseCancelled=function(U){D.dispatchEvent('purchaseCancelled',U)}}},function(u,h,E){const C=E(3).observable,I=E(0);u.exports=function(L,N){'use strict';let D={},R,P,M;const W=C(this),O=function(z){return z&&z.id&&(P||P.length)&&!!I.find(P,function(V){return V.id===z.id})},H=function(z){z===M||(M=z,W.dispatchEvent('planSelected',z))},U=function(z,V){const X=function(K,Q){return V?I.contains(V,K):!Q},Y=N&&!R&&z,G=I.filter(L,function(K){return'domain'===K.type&&(X('BuyDomainSubscription',!0)||Y&&X('BuyDomainSubscription'))||'personal'===K.type&&X('BuySubscription')});D={domain:z,actions:V};(!P||I.difference(P,G).length||I.difference(G,P).length)&&(P=G,!O(M)&&H(!!P.length&&P[0]),W.dispatchEvent('subscriptionPlansChanged',P,M))};M=P&&P.length&&P[0],W.getSelectedPlan=function(){return M},W.disableDomainRegistration=function(z){R=z,U(D.domain,D.actions)},W.availablePlans=function(){return P&&P.slice(0)},W.setSelectedPlan=function(z){return z&&z.id&&O(z)&&(H(z),!0)},W.filterPlans=function(z,V){U(z,V)},U()}},function(u,h,E){const C=E(3).observable;u.exports=function(T){'use strict';let L,N;const R=C(this),P=function(){return!!L&&!!L.attr&&L.attr.theme},D=function(){return N=P(),{theme:!!N&&N}},M=function(){R.dispatchEvent('themesContext',D())},W=function(H){L=H,L&&M()},O=function(){N===P()||M()};R.getTheme=P,R.bindContentListeners=function(){const H=T.getIdea();L&&L.removeEventListener('changed',O),W(H),H&&H.addEventListener('changed',O)}}},function(u,h,E){const C=E(1),I=E(39);C.fn.goldPlanOptionWidget=function(T){'use strict';return this.each(function(){const L=C(this);L.attr('value',JSON.stringify(T)),L.text(I(T))})}},function(u,h,E){const C=E(1);C.fn.setLicense=function(I){'use strict';return C.each(this,function(){const T=C(this);T.trigger(C.Event('setLicense',{license:I}))})},C.fn.appendInput=function(I,T){'use strict';const L=C(this),N=C('<input type="hidden">').appendTo(L);return N.attr('name',I),T&&N.val(T),N},C.fn.stripeCardChangeWidget=function(I){'use strict';return this.each(function(){const T=C(this),L=C('<form></form>').appendTo(T),N={};L.addClass('hidden'),L.attr('method','post'),L.attr('target','_blank'),L.attr('data-mm-role','card-change-stripe'),L.attr('action',I.goldApiUrl+'/form/change_card'),N.license=L.appendInput('license'),T.on('setLicense',function(R){const P=R&&R.license;P&&N.license.val(JSON.stringify(P))})})},C.fn.paypalPaymentWidget=function(I,T){'use strict';return this.each(function(){const L=C(this),N=C('<form></form>').appendTo(L),R={},P=function(D){D&&(R.currencyCode.val(D.CCY),R.subscriptionDescription.val('Mindmup Gold '+D.prefix+D.price+D.postfix+' '+D.period),R.amountInDollars.val(D.price),R.subscriptionPeriod.val(D.paypalPeriodCode))};N.addClass('hidden'),N.attr('name','_xclick'),N.attr('target','_blank'),N.attr('data-mm-role','payment-paypal'),N.attr('action',I.url+'/cgi-bin/webscr'),N.attr('method','post'),N.appendInput('cmd','_xclick-subscriptions'),N.appendInput('business',I.id),N.appendInput('return','https://www.mindmup.com/paypal-return'),N.appendInput('cancel_return','https://www.mindmup.com/paypal-return'),R.currencyCode=N.appendInput('currency_code'),R.subscriptionDescription=N.appendInput('item_name'),R.amountInDollars=N.appendInput('a3'),R.subscriptionPeriod=N.appendInput('t3'),R.accountName=N.appendInput('custom'),['p3','src','sra','no_note'].forEach(function(D){N.appendInput(D,'1')}),['rm','no_shipping'].forEach(function(D){N.appendInput(D,'2')}),N.appendInput('disp_tot','Y'),L.on('setLicense',function(D){const M=D&&D.license;M&&R.accountName.val(M.account)}),T.addEventListener('planSelected',P),P(T.getSelectedPlan())})}},,function(u,h,E){const C=E(0);u.exports=function(T,L,N){'use strict';const R=this,P=function(M,W,O){const H={name:'Mindmup Gold',key:T,image:L,email:M,billingAddress:!0,allowRememberMe:!1,token:W};return O&&(H.panelLabel=O),N.StripeCheckout&&N.StripeCheckout.configure(H)},D=function(M,W,O){return new Promise(function(H,U){const z=O&&O.amountRequired,V=function(J){O&&O.notify&&O.notify(J)},X=O&&O.amount,Y=W&&(!z||X)&&T,G=O&&O.buttonLabel,K=Y&&P(M,function(J,Z){H({token:J,args:Z})},G),Q={description:W,opened:function(){V('stripe-shown')},closed:function(){V('stripe-hidden')}};Y?K?(X&&(Q.amount=X),K.open(Q)):U('stripe-not-available'):U('invalid-args')})};R.purchaseSubscription=function(M,W,O,H){return D(M,W,C.extend({},H,{amountRequired:!0,amount:O}))},R.changeCard=function(M,W){return D(M,'New Payment Info',C.extend({},W,{buttonLabel:'Change Payment Info'}))}}},function(u,h,E){const C=E(1),I=E(0);E(4),E(84),E(34),C.fn.goldAccountWidget=function(T,L,N,R,P,D,M){'use strict';return this.each(function(){let O=4,W;const H=C(this).sectionHandlerWidget().paypalPaymentWidget(L.paypal,M).stripeCardChangeWidget(L),U=function(be){H.find('[data-mm-subscription-action]').addClass('hidden'),be&&I.each(be,function(we){H.find('[data-mm-subscription-action~='+we+']').removeClass('hidden')})},z=H.find('[data-mm-role~="linkedEmailList"]'),V=z.find('[data-mm-role~="linkedEmailTemplate"]').remove(),X=H.find('[data-mm-show-section="add-linked-email"]'),Y=function(be,we){be.find('[data-mm-role~=error]').addClass('hidden'),we&&(be.find('[data-mm-role~=error][data-mm-reason~='+we+']').removeClass('hidden'),0===be.find('[data-mm-role~=error]:not(.hidden)').length&&be.find('[data-mm-role~=error]:not([data-mm-reason])').removeClass('hidden'))},G=function(be){H.find('[data-mm-role~="linked-email-to-remove"]').text(be),H.find('[data-mm-role~="confirm-remove-linked-email"]').data('mm-email-to-remove',be),H.showSection('remove-linked-email')},K=function(be){H.find('[data-mm-role~="progress-message"]').text(be),H.showSection('progress')},Q=function(be){return U([]),'domain-expired'===be||'domain-not-purchased'===be?(M.disableDomainRegistration(!0),void H.showSection('not-registered')):'not-registered'===be?void H.showSection(be):void(I.contains(['notAuthenticated','network-error','not-authenticated','stripe-zip-check-error'],be)?H.showSection('error-'+be):H.showSection('error'))},J=function(be){be&&'personal'!==be.type?(H.find('[data-mm-role~="personal-plan-selected"]').addClass('hidden'),H.find('[data-mm-role~="domain-plan-selected"]').removeClass('hidden')):(H.find('[data-mm-role~="domain-plan-selected"]').addClass('hidden'),H.find('[data-mm-role~="personal-plan-selected"]').removeClass('hidden'))},Z=function(be){const we=T.getProfileAuthenticatedEmail();z.empty(),be&&be.length>=O?X.addClass('disabled'):X.removeClass('disabled'),be&&be.length?(H.find('[data-mm-role~="nolinkedEmails"]').hide(),H.find('[data-mm-role~="haslinkedEmails"]').show(),be.forEach(function(Ee){let ke=Ee;const Ce=V.clone(),Se=Ce.find('[data-mm-role~="remove-linked-email"]');Ee===we?(z.prepend(Ce),Se.addClass('disabled'),ke+=' (authenticated)'):(z.append(Ce),Se.click(function(){G(Ee)}).removeClass('disabled')),Ce.find('[data-mm-role~="linkedEmail"]').text(ke)})):(H.find('[data-mm-role~="haslinkedEmails"]').hide(),H.find('[data-mm-role~="nolinkedEmails"]').show())},te=function(be){K('Removing linked email: '+be),T.removeLinkedEmail(be).then(function(we){Z(we),H.backupSections(2)},Q)},ae=function(be){const we=be&&be.email||'',Ee=be&&be.domain||'';W=be,H.find('[data-mm-role~="profile-domain"]').text(Ee),H.find('[data-mm-role~=registration-email]').text(we).val(we)},ie=function(be){const we=be||'';H.find('[data-mm-role~=account-name]').text(we).val(we)},oe=function(be){const we=be&&be.expiry,Ee=new Date(1e3*we),ke=Ee&&Ee.toDateString()||'',Ce=be&&be.price||'',Se=be&&be.actions||[];be&&!be.maxLinkedEmails&&(be.maxLinkedEmails=4),O=be&&be.maxLinkedEmails||4,H.find('[data-mm-role~=expiry-date]').val(ke).text(ke),H.find('[data-mm-role~=renewal-price]').val(Ce).text(Ce),I.each(be,function(Ie,Te){H.find('[data-mm-role~=subscription-'+Te+']').text(Ie)}),Z(be&&be.linkedEmails||[]),U(Se)},re=function(be){const we=be&&be.subscription&&be.subscription.provider;return we?'-'+we:''},de=function(be){return be?R||be.profile?be.license&&be.license.account?be.subscription&&be.subscription.status?'subscription-'+be.subscription.status+re(be):'not-subscribed':'not-registered':'error-notAuthenticated':'error'},se=function(be){const we=de(be),Ee=be&&be.license&&be.license.account||'',ke=be&&be.profile,Ce=be&&be.subscription&&be.subscription.actions,Se=ke&&ke.domain;M.filterPlans(Se,Ce),be&&(ae(be.profile),ie(Ee),oe(be.subscription),be.license&&H.setLicense(be.license)),N.step('account-widget',we),H.showSection(we),J(M.getSelectedPlan())},le=H.find('input[name=registration-account-name]'),ce=H.find('[data-mm-role~="profile-domain"]'),pe=H.find('input[name=registration-terms]'),ue=H.find('input[name=registration-email-address]'),he=function(){const we=le&&le.val&&le.val(),Ee=ce&&ce.text&&ce.text(),ke=pe&&pe.prop&&pe.prop('checked'),Ce=function(){return R?ue&&ue.val&&ue.val():W&&W.email}();return{name:we,email:Ce,terms:ke,domainName:Ee}},ge=function(be){const we=he();let Ee=!1;return(N.step('account-widget','registration-requested'),le.parents('div.control-block').removeClass('error'),pe.parents('div.control-block').removeClass('error'),'personal'!==be||we.name&&/^[a-z][a-z0-9]{3,20}$/.test(we.name)||(le.parents('div.control-block').addClass('error'),N.step('account-widget','registration-attempt-rejected:account-name'),Ee=!0),we.terms||(pe.parents('div.control-block').addClass('error'),N.step('account-widget','registration-attempt-rejected:terms'),Ee=!0),R&&!we.email&&(ue.parents('div.control-block').addClass('error'),N.step('account-widget','registration-attempt-rejected:email'),Ee=!0),Ee)?C.Deferred().reject('invalid-inputs').promise():(K('Registering for MindMup Gold'),N.step('account-widget','registration-initiated'),'personal'===be?T.register(we.name,we.email):T.registerDomain())},me=function(be){const we=be&&be.type||'personal';return be.prefix+be.price+be.postfix+' '+be.period+' '+we+' subscription'},fe={stripe:function(){const be=M.getSelectedPlan(),we=me(be),Ee=function(ke){'stripe-hidden'===ke&&H.showSection('subscription-not-purchased')};T.getGoldAccountDetails().then(function(ke){const Ce=ke&&ke.subscription&&ke.subscription.email,Se=ke&&ke.license&&ke.license.account;return Se?void(N.step('account-widget','payment-initiated-stripe'),K('Waiting for card information...'),P.purchaseSubscription(Ce,we,100*be.price,{notify:Ee}).then(function(Ie){K('Waiting for the card payment to be completed...'),D.stripePayment(Se,be.id,Ie.token,Ie.args).then(function(){T.getGoldAccountDetails(!0).then(se,Q)}).then(function(){N.step('account-widget','payment-complete-stripe')},Q)},Q)):void Q('invalid-args')},Q)},paypal:function(){N.step('account-widget','payment-initiated-paypal'),K('Waiting for the PayPal payment to be completed...'),H.find('form[data-mm-role~=payment-paypal]').submit(),T.pollForAccountInfo().then(se).then(function(){N.step('account-widget','payment-complete-paypal')})}},ye={stripe:function(){T.getGoldAccountDetails().then(function(be){const we=be&&be.subscription&&be.subscription.email,Ee=be&&be.license;return Ee?void(K('Waiting for card information...'),P.changeCard(we,{notify:function(Ce){'stripe-hidden'===Ce&&(K('Loading your subscription information...'),T.getGoldAccountDetails(!0).then(se,Q))}}).then(function(Ce){K('Waiting for the card change to be completed...'),D.stripeCardChange(Ee,Ce.token).then(function(){T.getGoldAccountDetails(!0).then(se,Q)},Q)},Q)):void Q('invalid-args')},Q)},paypal:function(){H.find('form[data-mm-role~=card-change-paypal]').submit(),H.addClass('hidden')}},ve=function(be){fe[be]()},xe=function(){H.find('[data-mm-role~=error]').addClass('hidden'),K('Loading your subscription information...'),T.getGoldAccountDetails(!0).then(se,function(be){M.filterPlans(),Q(be),J(M.getSelectedPlan())})};H.find('[data-mm-role~="plan-selector"]').goldPlanSelectorWidget(M),H.on('show',xe),H.on('hide',function(){T.cancelPolling()}),M.addEventListener('planSelected',J),R?(H.find('[data-mm-role~="no-email-required"]').addClass('hidden'),H.find('[data-mm-role~="email-required"]').removeClass('hidden')):(H.find('[data-mm-role~="email-required"]').addClass('hidden'),H.find('[data-mm-role~="no-email-required"]').removeClass('hidden')),H.find('[data-mm-role~="card-change"]').click(function(){const be=C(this).data('mm-payment');ye[be]()}),H.find('[data-mm-role~="subscribe"]').click(function(){const be=C(this).data('mm-payment');ve(be)}),H.find('[data-mm-role~="cancelSubscription"]').click(function(){K('Cancelling subscription renewal for MindMup Gold'),T.cancelSubscription().then(xe,Q)}),H.find('[data-mm-role~="register"]').click(function(){const be=C(this),we=be.data('mm-plan-type')||'personal';ge(we).then(function(Ee){const ke=Ee&&Ee.type,Ce='domain'===ke&&Ee&&Ee.license&&Ee.license.account,Se=Ce?'BuyDomainSubscription':'BuySubscription';N.step('account-widget','registration-complete'),Ee&&Ee.license&&(H.setLicense(Ee.license),ie(Ee.license.account)),M.filterPlans(Ce,[Se]),H.showSection('subscription-not-purchased')},function(Ee){const ke=H.find('[data-mm-section~="not-registered"]');N.step('account-widget','registration-failed'),Y(ke,Ee),H.showSection('not-registered')})}),H.find('[data-mm-role~="confirm-remove-linked-email"]').click(function(){const be=C(this).data('mm-email-to-remove');be&&te(be)}),H.find('[data-mm-role~="confirm-add-linked-email"]').click(function(){const be=H.find('[data-mm-section~="add-linked-email"]'),we=be&&be.find('input[name=linked-email-address]'),Ee=we&&we.val();return Y(be),we.parents('div.control-block').removeClass('error'),Ee&&/^[^@]+@[^@]+$/.test(Ee)?void(K('Adding linked email: '+Ee),T.addLinkedEmail(Ee).then(function(ke){we.val(''),Z(ke),H.backupSections(2)},function(ke){we.parents('div.control-block').removeClass('error'),'email-already-linked'===ke?(H.backupSections(),Y(be,ke)):Q(ke)})):(we.parents('div.control-block').addClass('error'),void Y(be,'invalid-inputs'))})})}},function(u,h,E){const C=E(1),I=E(0);E(4),C.fn.goldAuthenticationWidget=function(T){'use strict';const L=13;return this.each(function(){const N=C(this).sectionHandlerWidget(),R=N.find('input[name=gold-account-identifier]'),P=N.find('input[name=gold-account-one-time-code]'),D=function(H){I.contains(['notAuthenticated','network-error','invalid-args'],H)?N.showSection('error-'+H):N.showSection('error')},M=function(H){N.find('[data-mm-role~="progress-message"]').text(H),N.showSection('progress')},W=function(){const H=P.val().trim();return H?void(M('Signing in, please wait...'),T.authenticateIdentity(H).then(function(){N.addClass('hidden')},D)):void P.addClass('validation-error')},O=function(){const H=R.val().trim();return H?void(M('Signing in, please wait...'),T.setIdentifier(H).then(function(){N.showSection('enter-one-time-code')},D)):void R.addClass('validation-error')};R.on('keydown',function(H){H.keyCode===L&&H.target===this&&O()}),P.on('keydown',function(H){H.keyCode===L&&H.target===this&&W()}),N.on('show',function(){P.val(''),N.showSection('not-authenticated')}),N.find('[data-mm-role~="send-email"]').click(O),N.find('[data-mm-role~="confirm-one-time-code"]').click(W)})}},,function(u,h,E){const C=E(0),I=E(1),T=E(25).calculateLayout,L={svgPixel:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="1" height="1"></svg>',nodeCacheMark:function(N,R){'use strict';return{title:N.title,width:N.attr&&N.attr.style&&N.attr.style.width,theme:L.theme&&L.theme.name,icon:N.attr&&N.attr.icon&&C.pick(N.attr.icon,'width','height','position'),collapsed:N.attr&&N.attr.collapsed,note:!!(N.attr&&N.attr.note),styles:L.theme&&L.theme.nodeStyles(N.level||R,N.attr),level:N.level||R}},dummyTextBox:I('<div>').addClass('mapjs-node').css({position:'absolute',visibility:'hidden'}),dimensionProvider:function(N,R){'use strict';let D=!1,M=I(document).nodeWithId(N.id);return M&&0<M.length&&C.isEqual(M.data('nodeCacheMark'),L.nodeCacheMark(N,R))?C.pick(M.data(),'width','height'):(M=L.dummyTextBox,M.appendTo('body').updateNodeContent(N,function(){return L.svgPixel},R),D={width:M.outerWidth(!0),height:M.outerHeight(!0)},M.detach(),D)},layoutCalculator:function(N){'use strict';return T(N,L.dimensionProvider,{theme:L.theme})},fixedLayout:!1};u.exports=L},function(u){u.exports=function(C,I){'use strict';const T={email:I.email,name:I.name,authToken:C,userId:I.id,description:I.email};return I.hd&&(T.domain=I.hd),T}},,function(u){u.exports=function(C,I,T){'use strict';const L=this;L.ajax=function(N,R){const P=function(D){R&&R.notify&&(D.lengthComputable?R.notify(Math.round(100*D.loaded/D.total,2)+'%'):R.notify())};return!N.xhr&&R&&R.notify&&(N.xhr=function(){const D=I.buildXMLHttpRequest();return D.upload.addEventListener('progress',P),D.addEventListener('progress',P),D}),new Promise(function(D,M){C.ajax(N).then(D,function(W){const O=R&&R.errorTransformer||T,H=O&&O(W)||W&&W.responseText;M(H)})})}}},function(u,h,E){const C=E(0);u.exports=function(T,L,N,R,P){'use strict';let D;const M=this,W=function(H){return{license:H,description:H.account}},O=['modalAuthenticate','changeAccount'];C.functions(T).forEach(function(H){M[H]=function(U){let z;const V=C.contains(O,H);return P.ensureScripts(V).then(function(){return T[H](U)}).then(function(X){return z=X.email,N.setSuggestedEmail(X.email),L.restoreLicenseWithGoogle(X.authToken)}).then(function(X){return D=X,{license:X,email:z}})}}),M.confirm=function(){return!!R.storeLicense(D)&&(N.authenticatedProfile(W(D)),!0)}}},function(u,h,E){const C=E(2).observable;u.exports=function(T,L,N,R){'use strict';const P=C(this),D=function(M){return{license:M,description:M.account}};P.backgroundAuthenticate=function(){const M=T.getLicense();return M?(N.authenticatedProfile(D(M)),Promise.resolve(D(M))):(N.authenticationFailed(),Promise.reject('notAuthenticated'))},P.setIdentifier=function(M){return L.requestCode(M)},P.authenticateIdentity=function(M){return new Promise(function(W,O){const H=function(U){O(U),N.authenticationFailed()};L.restoreLicenseWithCode(M).then(function(U){T.storeLicense(U)?(N.authenticatedProfile(D(U)),W(D(U))):H('invalid-license')},H)})},N.addEventListener('notAuthenticated',function(){T.removeLicense()}),R.addEventListener('accountRegistered',function(M){T.storeLicense(M)&&N.authenticatedProfile(D(M))})}},,function(u,h,E){const C=E(0);u.exports=function(T){'use strict';const L=this;L.setItem=function(N,R){return T.setItem(N,JSON.stringify(R))},L.getItem=function(N){const R=T.getItem(N);try{return JSON.parse(R)}catch(P){}},L.remove=function(N){T.removeItem(N)},L.removeKeysWithPrefix=function(N){return C.isEmpty(N)?0:function(P){const D=Object.keys(T),M=C.filter(D,function(W){return 0===W.indexOf(P)});return C.each(M,function(W){T.removeItem(W)}),M.length}(N)}}},function(u,h,E){const C=E(2).observable,I=E(0);u.exports=function(L,N,R,P){'use strict';let D;const M=C(this),W=function(Y){return!!(Y&&I.contains(['active','cancelled'],Y.status))},O=function(Y){return Y&&'delinquent'===Y.status},H=function(Y){const G=Y&&Y.expiry,K=new Date(1e3*G);return K&&K.toDateString()||''},U=function(Y){return I.extend({},D,{subscription:Y,active:W(Y),description:function(){return Y?O(Y)&&Y.period&&Y.price?'Payment failed for '+Y.period+'ly renewal of '+Y.price+' on '+H(Y):W(Y)?Y.expiry?Y.period?'MindMup Gold is active, '+Y.period+'ly renewal of '+Y.price+' next due on '+H(Y):'MindMup Gold is active until '+H(Y)+'. It will not automatically renew':'MindMup Gold is active. It will not automatically renew':'MindMup Gold is not active':'MindMup Gold is not active'}()})},z=function(){return D&&D.license?Promise.resolve(D.license):Promise.reject('not-registered')},V=function(){const Y=D&&D.license&&D.license.account&&R.getItem('subscription:'+D.license.account);return Y&&!W(Y)?Y:Y&&Y.expiry&&1e3*Y.expiry>Date.now()&&Y},X=function(Y){D&&D.license&&D.license.account&&R.setItem('subscription:'+D.license.account,Y)};L.addEventListener('authenticated',function(Y){Y&&Y.license&&(D=Y,M.dispatchEvent('retrievingSubscription'),M.getGoldAccountDetails().catch(function(G){'not-authenticated'===G&&L.signOut&&L.signOut()}))}),L.addEventListener('notAuthenticated',function(){R.removeKeysWithPrefix('subscription:')}),['notAuthenticated','authenticating'].forEach(function(Y){L.addEventListener(Y,function(){D=void 0,M.dispatchEvent(Y)})}),M.register=function(Y,G){return N.register(Y,G).then(function(K){let Q;return K.license&&(Q='string'==typeof K.license?JSON.parse(K.license):K.license,M.dispatchEvent('accountRegistered',Q)),I.extend({},K,{license:Q})})},M.getProfileAuthenticatedEmail=function(){return D&&D.license&&D.license.email},M.generateExportConfiguration=function(Y){return z().then(function(G){return N.generateExportConfiguration(G,Y)},function(G){if('not-registered'===G)return N.generateExportConfiguration(void 0,Y);throw G})},['getSubscription','cancelSubscription','addLinkedEmail','removeLinkedEmail'].forEach(function(Y){M[Y]=function(){const G=Array.prototype.slice.call(arguments);return z().then(function(K){const Q=[K].concat(G);return N[Y].apply(N,Q)})}}),M.getGoldAccountDetails=function(Y){let G;const K=V(),Q=function(J){return X(J),J?(G=U(J),G.active?M.dispatchEvent('subscribed',G):M.dispatchEvent('expiredSubscription',G),Promise.resolve(G)):(M.dispatchEvent('notRegistered',U(),'not-registered'),Promise.reject('not-registered'))};return!Y&&K?Q(K):M.getSubscription().then(Q)},M.getAccountInfoForLicense=function(Y){return N.getSubscription(Y).then(function(G){const K=G&&U(G);return X(G),K})},M.isActiveAccountInfo=function(Y){return Y&&Y.subscription&&'active'===Y.subscription.status},M.pollForAccountInfo=function(){return z().then(function(Y){return P.poll(function(){return M.getAccountInfoForLicense(Y)},M.isActiveAccountInfo)}).then(function(Y){return M.dispatchEvent('subscribed',Y),Y})},M.cancelPolling=function(){P.cancelPolling()}}},function(u,h,E){const C=E(1);E(4),C.fn.gapiAuthenticationWidget=function(I){'use strict';return this.each(function(){const T=C(this).sectionHandlerWidget(),L=function(P){0<T.find('[data-mm-section="error-'+P+'"]').length?T.showSection('error-'+P):T.showSection('error')},N=function(P){T.find('[data-mm-role~=email]').text(P.email),P.license?T.showSection('confirm'):T.showSection('not-registered')},R=function(P){T.showSection('progress'),I[P]().then(N,L)};T.on('show',function(){R('backgroundAuthenticate')}),T.find('[data-mm-role~=modalAuthenticate]').click(function(){R('modalAuthenticate')}),T.find('[data-mm-role~=changeAccount]').click(function(){R('changeAccount')}),T.find('[data-mm-role~=confirm]').click(function(){I.confirm()?T.addClass('hidden'):L('storage')})})}},,function(u,h,E){const C=E(1);C.fn.inputValidationWidget=function(){'use strict';const I={number:function(T){return!isNaN(parseFloat(T))},nonBlank:function(T){return T&&0<T.trim().length},positive:function(T){return 0<parseFloat(T)}};return C(this).on('input',function(){const T=this.getAttribute('data-mm-validate-input');I[T](this.value)?this.classList.remove('validation-error'):this.classList.add('validation-error')})}},,function(u,h,E){const C=E(0),I=new RegExp(/^rgba?\(([^,\s]+)[,\s]*([^,\s]+)[,\s]*([^,\s\()]+).*$/),T=function(N){'use strict';let R;if(I.test(N)&&(R=N.match(I),4===R.length))return C.map(R.slice(1),function(P){return parseInt(P)})},L=function(N){'use strict';const R=N.toString(16).match(/[a-f0-9]{6}/i);let P,D,M,W;if(R)return P=parseInt(R[0],16),D=255&P>>16,M=255&P>>8,W=255&P,[D,M,W]};u.exports=function(R){'use strict';return T(R)||L(R)||[0,0,0]}},function(u,h,E){const C=E(0),I=E(110);u.exports=function(L){'use strict';const N=this,R=C.extend({},L),P=function(M,W){let O=W.slice(0),H=M;for(;0<O.length;){if(H=H[O[0]],void 0===H)return;O=O.slice(1)}return H},D=function(M,W,O){const H=P(M,W);return void 0===H?O:H};N.getFontForStyles=function(M){const W=N.attributeValue(['node'],M,['text','font','weight'],'semibold'),O=N.attributeValue(['node'],M,['text','font','size'],12),H=N.attributeValue(['node'],M,['text','font','lineSpacing'],3.5);return{size:O,weight:W,lineGap:H}},N.getNodeMargin=function(M){return N.attributeValue(['node'],M,['text','margin'],5)},N.name=L&&L.name,N.attributeValue=function(M,W,O,H){const U=P(R,M);let z={};return U?(W&&W.length?W.slice(0).reverse().forEach(function(V){z=C.extend(z,U[V])}):z=C.extend({},U),D(z,O,H)):H},N.nodeStyles=function(M,W){const O=['level_'+M,'default'];return W&&W.group&&(O.unshift('attr_group'),('string'==typeof W.group||'number'==typeof W.group)&&O.unshift('attr_group_'+W.group)),O},N.nodeTheme=function(M){let W={};const H=P(R,['node']),U={margin:5,font:{size:12,weight:'semibold',linespacing:3.5},maxWidth:146,backgroundColor:'#E0E0E0',borderType:'surround',cornerRadius:5,lineColor:'#707070',text:{color:'#4F4F4F',lightColor:'#EEEEEE',darkColor:'#000000'}};return H?(M.slice(0).reverse().forEach(function(z){W=C.extend(W,H[z])}),U.margin=P(W,['text','margin'])||U.margin,U.font=C.extend(U.font,P(W,['text','font'])),U.text=C.extend(U.text,P(W,['text'])),U.borderType=P(W,['border','type'])||U.borderType,U.backgroundColor=function(){const z=P(W,['background']);return z?I(z):P(W,['backgroundColor'])}()||U.backgroundColor,U.cornerRadius=P(W,['cornerRadius'])||U.cornerRadius,U.lineColor=P(W,['border','line','color'])||U.lineColor,U):U},N.connectorControlPoint=function(M,W){const O='horizontal'===M?1:1.75,U=W&&P(R,['connector',W,'controlPoint',M]);return U&&C.extend({},U)||{width:0,height:O}},N.connectorTheme=function(M,W,O){const U=N.attributeValue(['node'],W,['connections','style'],'default'),z=O&&N.attributeValue(['node'],O,['connections','childstyle'],!1),V=P(R,['connector',U]),X=z&&P(R,['connector',z]),Y=z&&z+'.'+U,G=Y&&P(R,['connector',Y]),Q=N.connectorControlPoint(M||'horizontal',G&&Y||X&&z||U||'default'),J={type:'quadratic',line:{color:'#707070',width:1}},Z=C.extend({},G||X||V||J);return Z.controlPoint=Q,Z.line=Z.line||J.line,Z},R&&R.node&&R.node.forEach&&(R.nodeArray=R.node,R.node={},R.nodeArray.forEach(function(M){R.node[M.name]=M}),delete R.nodeArray)}},,function(u,h,E){const C=E(1);C.fn.colorPickerWidget=function(I){'use strict';return C.each(this,function(){const T=C(this),L=T.find('[data-mm-swatch-template]'),N=T.find('swatches');L.detach(),L.removeProp('data-mm-swatch-template'),I.getColors().forEach(function(R){const P=L.clone(),D='#'+R;P.css('background-color',D),P.click(function(){I.colorPicked(D)}),N.append(P)})})}},function(u,h,E){const C=E(1);C.fn.iconEditorWidget=function(I,T){'use strict';return C(this).each(function(){const L=C(this),N=L.find('[data-mm-role~=download]'),R=L.find('[data-mm-role~=icon-height]'),P=L.find('[data-mm-role~=icon-position]'),D=L.find('[data-mm-role~=icon-width]'),M=L.find('[data-mm-role~=icon-img]'),W=L.find('[data-mm-role~=icon-upload-img]'),O=L.find('[data-mm-role~=dimensions-ratio]'),H=L.find('[data-mm-role~="submit"]'),U=function(){const z=I.getCurrentIcon()||{};let V=z.url;T&&(V=T(z.url)),M.attr('src',V),N.attr('href',z.url),R.val(z.height),D.val(z.width),P.val(z.position)};L.on('show',U),I.addEventListener('reload',U),I.addEventListener('stage',function(z,V){'confirm'===z?U():'uploading'==z&&W.attr('src',V)}),H.on('click',function(){const z=L.find('input.validation-error');z.length?z.first().focus():(I.setDimensions(D.val(),R.val()),I.setPosition(P.val()),I.save())}),D.on('change',function(){const z=parseFloat(D.val());return isNaN(z)||isNaN(D.val())?!1:void(O[0].checked&&R.val(Math.round(M.height()*z/M.width())),H.removeClass('hidden'))}),R.on('change',function(){const z=parseFloat(R.val());return isNaN(R.val())||isNaN(z)?!1:void(O[0].checked&&D.val(Math.round(M.width()*z/M.height())),H.removeClass('hidden'))}),P.on('change',function(){H.removeClass('hidden')})})}},function(u,h,E){const C=E(1),I=E(272);E(4),C.fn.measuresExportWidget=function(T,L){'use strict';return C(this).each(function(){const N=C(this).sectionHandlerWidget(),P=N.find('[data-mm-role~="measures-export-type"]'),D=N.find('[data-mm-role~="export-measures"]'),M=N.find('[data-mm-role~="send-to-drive-url"]'),W=function(U,z){return /^data:[a-z]*\/[a-z]*/.test(U)?L.toObjectUrl(L.dataUriToBlob(U)):L.toObjectUrl(U,z)},O=function(){const U=!('measures-all'!==P.val()),z=I(T.getRawData(U)),V=W(z,'text/tab-separated-values');D.attr('download',T.getTitle()).attr('href',V).removeClass('disabled'),M.val(V)},H=function(){D.addClass('disabled'),O()};N.on('show',function(){N.showSection('initial'),H(),P.focus()}),P.on('change',H)})}},function(u){'use strict';u.exports=function(T,L,N){var R=T*L,P=I*T,M=P-(P-T),W=T-M,O=I*L,U=O-(O-L),z=L-U,G=W*z-(R-M*U-W*U-M*z);return N?(N[0]=G,N[1]=R,N):[G,R]};var I=+(Math.pow(2,27)+1)},function(u,h,E){const C=E(103);u.exports=function(T){'use strict';return T.color&&0!==T.opacity?T.opacity?'rgba('+C(T.color).join(',')+','+T.opacity+')':T.color:'transparent'}},function(u,h,E){const C=E(0);u.exports=function(T){'use strict';return T.attr&&T.attr.group&&C.isEmpty(T.ideas)}},function(u){u.exports=function(C){'use strict';return!!C&&{left:C.x,top:C.y,width:C.width,height:C.height,level:C.level,styles:C.styles||['default']}}},function(u){u.exports=function(){'use strict';const C=this,I=function(L){return L?JSON.parse(JSON.stringify(L)):void 0};let T;C.get=function(){return I(T)},C.put=function(L){T=I(L)}}},function(u,h,E){const C=E(1),I=E(215),T=function(N){'use strict';C(this).trigger(C.Event('mm:start-dragging',{relatedTarget:this,gesture:N.gesture})),N.stopPropagation(),N.preventDefault(),N.gesture&&(N.gesture.stopPropagation(),N.gesture.preventDefault())},L=function(N){'use strict';C(this).trigger(C.Event('mm:start-dragging-shadow',{relatedTarget:this,gesture:N.gesture})),N.stopPropagation(),N.preventDefault(),N.gesture&&(N.gesture.stopPropagation(),N.gesture.preventDefault())};C.fn.simpleDraggableContainer=function(){'use strict';let N,R;const P=this,D=function(W){if(N&&W.gesture){const O={top:Math.round(parseInt(R.top,10)+W.gesture.deltaY),left:Math.round(parseInt(R.left,10)+W.gesture.deltaX)};return N.css(O).trigger(C.Event('mm:drag',{currentPosition:O,gesture:W.gesture})),W.gesture&&W.gesture.preventDefault(),!1}},M=function(W){const O=N;'shadow'===O.attr('mapjs-drag-role')?O.trigger(C.Event('mm:cancel-dragging',{gesture:W.gesture})):O.animate(R,{complete:function(){O.trigger(C.Event('mm:cancel-dragging',{gesture:W.gesture}))},progress:function(){O.trigger('mm:drag')}})};return I(this,{drag_min_distance:2}),this.on('mm:start-dragging',function(W){N||(N=C(W.relatedTarget),R={top:N.css('top'),left:N.css('left')},C(this).on('drag',D))}).on('mm:start-dragging-shadow',function(W){const O=C(W.relatedTarget);N||(N=function(){const U=O.clone().addClass('drag-shadow').appendTo(P).offset(O.offset()).data(O.data()).attr('mapjs-drag-role','shadow'),z=O.parent().data('scale')||1;return 0!==z&&U.css({transform:'scale('+z+')','transform-origin':'top left'}),U}(),R={top:N.css('top'),left:N.css('left')},N.on('mm:stop-dragging mm:cancel-dragging',function(U){this.remove(),U.stopPropagation(),U.stopImmediatePropagation();const z=C.Event(U.type,{gesture:U.gesture,finalPosition:U.finalPosition});O.trigger(z)}).on('mm:drag',function(U){O.trigger(U)}),C(this).on('drag',D))}).on('dragend',function(W){if(C(this).off('drag',D),N){const O=C.Event('mm:stop-dragging',{gesture:W.gesture,finalPosition:N.offset()});N.trigger(O),!1===O.result&&M(W),N=void 0}}).on('mouseleave',function(W){N&&(C(this).off('drag',D),M(W),N=void 0)}).attr('data-drag-role','container')},C.fn.simpleDraggable=function(N){'use strict';return N&&N.disable?C(this).off('dragstart',T):C(this).on('dragstart',T)},C.fn.shadowDraggable=function(N){'use strict';return N&&N.disable?C(this).off('dragstart',L):C(this).on('dragstart',L)}},function(u,h,E){const C=E(0),I=E(1);I.fn.typeahead=function(T,L,N){'use strict';const R=40,D=13,M=9,W='-1';return I(this).each(function(){const O=I(this),H=O.find('[data-mm-role=value-editor]'),U=O.find('[data-mm-role=value-selector]'),z=O.find('[data-mm-role=template]'),V=function(Z){return Z.preventDefault(),Z.stopPropagation(),Z.stopImmediatePropagation(),!0},X=function(){U.children().first().focus()},Y=function(Z){const ee=Z.prev();ee.length?ee.focus():(H.focus(),H[0].setSelectionRange(H.val().length,H.val().length))},G=function(Z){const ee=Z.next();ee.length&&ee.focus()},K=function(Z){Z.on('keydown',function(ee){switch(ee.which){case R:return V(ee)&&G(Z);case M:return V(ee)&&(ee.shiftKey?Y(Z):G(Z));case 38:return V(ee)&&Y(Z);case D:return V(ee)&&L(Z.data('value'));}}).on('click',function(ee){return V(ee)&&L(Z.data('value'))})},Q=function(){return U.children().first().data('value')};z.detach(),H.on('input',function(){const Z=H.val(),ee=Z&&T(Z);U.empty(),C.isEmpty(ee)?U.addClass('hidden'):(U.removeClass('hidden'),ee.forEach(function(te){const ae=z.clone().appendTo(U).attr('tabindex',W).data('value',te);K(ae),N?N(ae,te,Z):ae.text(te)}))}).on('keydown',function(Z){switch(Z.which){case R:case M:return V(Z)&&X();case D:return V(Z)&&L(Q()||this.value);}}),O.on('show',function(){H.val(''),U.empty().addClass('hidden')}),H.attr('tabindex',W)})}},,function(u,h,E){E(260),E(252),E(258),E(256),E(254),u.exports={MemoryClipboard:E(113),MapModel:E(257),ImageInsertController:E(255),DOMRender:E(90),version:2}},function(u,h,E){u.exports={'default':E(264),simple:E(266),simplestraight:E(265),straightlines:E(267),topdownSimple:E(268),topdownStandard:E(269),argMappingSimple:E(263)}},,function(u,h,E){const C=E(2).observable;u.exports=function(){'use strict';const T=C(this);T.show=function(L,N,R){T.showAlert(N,R)},T.showAlert=function(L,N){L&&(N=N||'info',T.dispatchEvent(N,L,N))},T.listenTo=function(L){const N={alertForEvent:function(R,P){return L.addEventListener(R,function(){'function'==typeof P&&(P=P.apply(void 0,arguments)),'string'==typeof P&&T.showAlert(P),P&&P.message&&T.showAlert(P.message,P.type)}),N}};return N}}},function(u,h,E){const C=E(0);u.exports=function(T,L){'use strict';const N=function(P){const D=P&&P.export&&L&&L.getActiveContent();D&&D.id&&D.updateAttr(D.id,'previous-atlas-export',P.export)};return[function(P){return P.atlasUrl&&(N(P),P['index-html']=P['index-html']||P.atlasUrl+'/index.html',P['archive-zip']=P['archive-zip']||P.atlasUrl+'/archive.zip',P['thumb-png']=P['thumb-png']||P.atlasUrl+'/thumb.png'),P}].concat(C.values(T))}},function(u,h,E){const C=E(2).observable,I=E(0);u.exports=function(L,N,R,P){'use strict';let D,M;const W=C(this),H=function(K){D&&(L.setAttachment('attachment-editor',D,K),W.dispatchEvent('complete'))},U=function(){W.dispatchEvent('picker'),N.pickAttachment().then(H,function(K){'cancel'===K?W.dispatchEvent('cancel'):'not-subscribed'===K?(W.dispatchEvent('cancel'),W.dispatchEvent('not-subscribed')):W.dispatchEvent('error',K)})},z=function(K){return /^image\//.test(K)||/^text\//.test(K)||'application/pdf'===K},V=function(){return P&&P.canImportFromAttachment(D)},X=function(K){let Q;return!!K&&(Q='application/vnd.google.drive.attachment'===K.contentType?I.clone(K.content):I.clone(K),M=!1,Q.dataUriEncoded?M=R.toObjectUrl(R.dataURLToBlob(Q.content)):Q.content&&(!Q.embedUrl||!Q.url)&&(M=R.toObjectUrl(Q.content,Q.contentType)),M&&(Q.downloadUrl=M,z(Q.contentType)&&(Q.embedUrl=M)),Q)},Y=function(K){return K?{open:!!K.url,'no-preview':!K.embedUrl,download:!!K.content,convertToNotes:V()}:{}};L.addEventListener('attachmentOpened',function(K,Q){const J=X(Q);D=K,Q?W.dispatchEvent('view',J,Y(J)):U()}),W.removeAttachment=function(){H()},W.changeAttachment=function(){U()},W.convertToNotes=function(){D&&(P.importFromAttachment(D)?(W.dispatchEvent('complete'),P.editNoteForNodeId(D)):W.dispatchEvent('error','attachment-conversion'))},W.cleanup=function(){M&&(R.revokeObjectUrl(M),M=!1)}}},function(u){u.exports=function(C,I){'use strict';return function(T){return C(T).then(function(L){return I.forEach(function(N){N(L)}),L})}}},function(u,h,E){const C=E(2).observable,I=E(2).content;u.exports=function(L){'use strict';let N,R;const P=C(this),D=function(M,W,O){P.dispatchEvent('mm-active-content-changed',N,!1,M,W),O!==R&&(O||R)||P.dispatchEvent('localContentEvent',{cmd:M,args:W})};P.triggerRemoteContentEvent=function(M,W){N.execCommand(M.cmd,M.args,W)},P.getLocalSessionId=function(){return R},P.initializeSession=function(M,W,O){const H='string'==typeof W?JSON.parse(W):W;N&&N.removeEventListener('changed',D),R=M,N=I(H,R),L&&L(N),O.forEach(function(U){const z=U.collaborator&&U.collaborator.sessionId||'loading';N.execCommand(U.cmd,U.args,z)}),P.dispatchEvent('newSession',N),P.dispatchEvent('mm-active-content-changed',N,!0),N.addEventListener('changed',D)},P.error=function(M,W){P.dispatchEvent('error',M,W)},P.getActiveContent=function(){return N},P.addListener=function(M){N&&M(N,!1),P.addEventListener('mm-active-content-changed',M)}}},function(u,h,E){const C=E(2).observable;u.exports=function(T){'use strict';const L=C(this),N=function(R,P,D){L.dispatchEvent('hideColors'),R===void 0?D():P(R)};L.getColors=function(){return T.slice(0)},L.colorPicked=function(){},L.pickColor=function(){return L.dispatchEvent('showColors'),new Promise(function(R,P){L.colorPicked=function(D){N(D,R,P)}})},L.colorPickCancelled=function(){L.colorPicked()},L.colorPickedDefault=function(){L.colorPicked('')}}},function(u,h,E){const C=E(2).observable;u.exports=function(T,L,N,R){'use strict';const P=C(this);let D;P.start=function(){P.dispatchEvent('stage','start')},P.copyTo=function(M){M&&0<M.trim().length?(P.dispatchEvent('stage','progress'),L.createFile(M,!1,JSON.stringify(N.getActiveContent())).then(function(W){D=W,P.dispatchEvent('stage','done')},function(W){'overwriting-file'===W?P.dispatchEvent('stage','error-overwriting-file'):P.dispatchEvent('stage','error')})):P.dispatchEvent('stage','error')},P.editCopy=function(){R.editFileId(D)}}},function(u){u.exports={formatVersion:3,id:'root',ideas:{1:{title:'Press Space or double-click to edit',id:1}}}},function(u,h,E){const C=E(0);u.exports=function(T){'use strict';const L=this;L.load=function(N){return T.ajax({url:N['output-url'],dataType:'json'}).then(function(R){return C.extend({},N,R)},function(){throw'generation-error'})}}},function(u){u.exports=function(C){'use strict';const I=this;I.convertToRequestedFormat=function(T){return T.export&&'png'===T.export.imageFormat?C.convertToPng(T['output-url']).then(function(L){return T['output-url']=C.toObjectUrl(C.dataURLToBlob(L)),T}):Promise.resolve(T)}}},function(u){u.exports={},u.exports.twitterIntentResultDecorator=function(E){'use strict';E['twitter-url']='https://twitter.com/intent/tweet?text='+encodeURIComponent(E.export.title)+'&url='+encodeURIComponent(E['index-html'])+'&source=mindmup.com&related=mindmup&via=mindmup'},u.exports.facebookResultDecorator=function(E){'use strict';E['facebook-url']='https://www.facebook.com/dialog/share_open_graph?app_id=621299297886954&display=popup&action_type=og.likes&action_properties=%7B%22object%22%3A%22'+encodeURIComponent(E['index-html'])+'%22%7D&redirect_uri='+encodeURIComponent('http://www.mindmup.com/fb')},u.exports.googlePlusResultDecorator=function(E){'use strict';E['google-plus-url']='https://plus.google.com/share?url='+encodeURIComponent(E['index-html'])},u.exports.linkedinResultDecorator=function(E){'use strict';E['linkedin-url']='http://www.linkedin.com/shareArticle?mini=true&url='+encodeURIComponent(E['index-html'])+'&title='+encodeURIComponent(E.export.title)+'&summary='+encodeURIComponent(E.export.description)+'&source=MindMup'},u.exports.tumblrResultDecorator=function(E){'use strict';E['tumblr-url']='http://www.tumblr.com/share/link?url='+encodeURIComponent(E['index-html'])+'&name='+encodeURIComponent(E.export.title)+'&description='+encodeURIComponent(E.export.description)},u.exports.pinterestResultDecorator=function(E){'use strict';E['pinterest-url']='https://pinterest.com/pin/create/button/?media='+encodeURIComponent(E['thumb-png'])+'&url='+encodeURIComponent(E['index-html'])+'&is_video=false&description='+encodeURIComponent(E.export.description)},u.exports.embedResultDecorator=function(E){'use strict';E['embed-markup']='<iframe src="'+E['index-html']+'"></iframe>'},u.exports.gmailResultDecorator=function(E){'use strict';E['gmail-index-html']='https://mail.google.com/mail/u/0/?view=cm&ui=2&cmid=0&fs=1&tf=1&body='+encodeURIComponent(E.export.title+'\n\n')+encodeURIComponent(E['index-html'])},u.exports.emailResultDecorator=function(E){'use strict';E['email-index-html']='mailto:?subject='+encodeURIComponent(E.export.title)+'&body='+encodeURIComponent(E.export.description+':\r\n\r\n')+encodeURIComponent(E['index-html'])},u.exports.gmailZipResultDecorator=function(E){'use strict';E['gmail-archive-zip']='https://mail.google.com/mail/u/0/?view=cm&ui=2&cmid=0&fs=1&tf=1&body='+encodeURIComponent(E.export.title+'\n\n')+encodeURIComponent(E['archive-zip'])},u.exports.emailZipResultDecorator=function(E){'use strict';E['email-archive-zip']='mailto:?subject='+encodeURIComponent(E.export.title)+'&body='+encodeURIComponent(E.export.description+':\r\n\r\n')+encodeURIComponent(E['archive-zip'])}},function(u){u.exports=[function(I){'use strict';I['email-output-url']='mailto:?&body='+encodeURIComponent(I['output-url']+'\n\nThe link will be valid for 24 hours')},function(I){'use strict';I['gmail-output-url']='https://mail.google.com/mail/u/0/?view=cm&ui=2&cmid=0&fs=1&tf=1&body='+encodeURIComponent(I['output-url']+'\n\n the link will be valid for 24 hours')}]},function(u,h,E){const C=E(2).content;u.exports=function(T,L){'use strict';const N=this,R=function(P){let D;return P.traverse(function(M){M.attr&&M.attr.icon&&M.attr.icon.url&&(L&&M.attr.icon.metaData&&M.attr.icon.metaData.remoteUrl?M.attr.icon.url=M.attr.icon.metaData.remoteUrl:/^internal/.test(M.attr.icon.url)&&(D=M.attr.icon.url.replace(/^[^:]*:/,''),M.attr.icon.url=P.resources[D]))}),delete P.resources,P};N.fromMup=function(P){const D='string'==typeof P?JSON.parse(P):P;return R(C(D))},N.fromMM=function(P){return C(T(P))}}},function(u,h,E){const C=E(0);u.exports=function(T){'use strict';const L=function(N){const R=escape(N.title).replace(/%([0-9A-F][0-9A-F])/g,'&#x$1;').replace(/%u([0-9A-F][0-9A-F][0-9A-F][0-9A-F])/g,'&#x$1;');return'<node ID="'+N.id+'" TEXT="'+R+'">'+(0<C.size(N.ideas)?C.map(C.sortBy(N.ideas,function(P,D){return parseFloat(D)}),L).join(''):'')+'</node>'};return 1===C.size(T.ideas)?'<map version="0.7.1">'+L(C.values(T.ideas)[0])+'</map>':'<map version="0.7.1">'+L(T)+'</map>'}},,,function(u,h,E){const C=E(2).observable,I=E(0);u.exports=function(L,N,R,P){'use strict';let D=!1,M=!1;const W=C(this),O=function(V){R(V.url).then(function(X){const Y=D&&D.position;D=I.extend({},V,{width:X.width,height:X.height,position:Y||'left'}),M?W.dispatchEvent('stage','confirm'):W.save()},function(){W.dispatchEvent('stage','image-error')})},H=function(V){'cancel'===V?W.dispatchEvent('cancel'):W.dispatchEvent('stage','image-error')},U=function(V,X){W.dispatchEvent('stage',V,X)},z=function(V){W.dispatchEvent('pickerActive'),N.pickImage(V,{notify:U}).then(O,H)};L.addEventListener('nodeIconEditRequested',function(){W.editIconForSelectedNode()}),L.addEventListener('progressIconEditRequested',function(){W.editIconProgressIcon()}),W.save=function(){M?D?L.setIcon('icon-editor',D.url,D.width,D.height,D.position,void 0,D.metaData):L.setIcon(!1):D&&L.dropImage(D.url,D.width,D.height,void 0,void 0,D.metaData),W.dispatchEvent('complete')},W.addPictureNode=function(){M=!1,W.pickImage()},W.editIconProgressIcon=function(){M=!0,D=I.clone(L.getIcon()),D?(W.dispatchEvent('reload'),W.dispatchEvent('stage','view')):W.pickImage()},W.editIconForSelectedNode=function(){M=!0,D=I.clone(L.getIcon()),D?W.dispatchEvent('stage','view'):W.pickImage()},W.getCurrentIcon=function(){return D},W.removeIcon=function(){D=!1,W.save()},W.setDimensions=function(V,X){D&&(D.width=parseFloat(V),D.height=parseFloat(X))},W.setPosition=function(V){D&&(D.position=V)},W.pickImage=function(){P?P.backgroundAuthenticate().then(z,function(){W.dispatchEvent('stage','auth')}):z()},W.authorise=function(){P.modalAuthenticate().then(z,function(){W.dispatchEvent('stage','auth-fail')})}}},function(u){u.exports=function(C,I){'use strict';const T=this,L=function(N){let R=N.url;return I&&(R=I(R)),C.convertToPng(R)};T.localiseIcons=function(N,R){const P=R(N);return P&&0<P.length?Promise.all(P.map(L)).then(function(M){for(let W=0;W<M.length;W++)P[W].url=M[W];return N}):Promise.resolve(N)}}},function(u,h,E){const C=E(2).observable;u.exports=function(T,L,N){'use strict';let R;const P=C(this),D=function(M,W,O,H){P.cleanup(),R=T.toObjectUrl(M,W),P.dispatchEvent('result',H,(O||'Exported-Mind-Mup')+'.'+H,R),P.dispatchEvent('stage','exported')};P.cleanup=function(){R&&(T.revokeObjectUrl(R),R=void 0)},P.exportToMM=function(){return L.makeExportable().then(function(M){D(N(M),'application/x-freemind',M.title,'mm')},function(){P.dispatchEvent('stage','error')})},P.exportToMMXml=function(){L.makeExportable().then(function(M){D(N(M),'text/xml',M.title,'mm')},function(){P.dispatchEvent('stage','error')})},P.exportToMup=function(){return P.dispatchEvent('stage','progress'),L.makeExportable().then(function(M){D(JSON.stringify(M,null,2),'application/json',M.title,'mup')},function(){P.dispatchEvent('stage','error')})}}},function(u){u.exports=function(C,I,T,L){'use strict';const N=this,R=function(D){return JSON.parse(JSON.stringify(D))},P=function(D,M){return D?Array.isArray(D)?function(H){return H.map(function(U){return P(U,M)})}(D):function(H){const U=R(H);return H.attr&&H.attr.icon&&H.attr.icon.url&&(U.attr.icon.url=M(H.attr.icon.url)),H.ideas&&(U.ideas={},Object.keys(H.ideas).forEach(function(z){const V=H.ideas[z];U.ideas[z]=P(V,M)})),U}(D):D};N.get=function(D){return D?C.getItem(I):P(C.getItem(I),L.storeResource)},N.put=function(D){try{C.setItem(I,P(D,L.getResource))}catch(M){T.show('Clipboard error','Insufficient space to copy object - saving the map might help up free up space','error')}}}},function(u,h,E){const C=E(2).content;u.exports=function(T,L,N,R){'use strict';const P=this,D=function(H){const U=[];return H.traverse(function(z){z.attr&&z.attr.icon&&z.attr.icon.url&&U.push(z.attr.icon)}),U},M=function(H){const U=L.getActiveContent();return H&&H.export&&H.export.startFromSelected?U.findSubIdeaById(N.getSelectedNodeId())||L.getActiveContent():U},W=function(){const H=L.getActiveContent();return H.title||H.findSubIdeaById(H.getDefaultRootId()).title},O=function(H){return H&&H.resources&&(H.resources=void 0),H};P.makeExportable=function(H){const U=M(H),z=L.getActiveContent().getAttr('theme'),V=R&&z&&R[z],X=U.title||W(),Y=C(JSON.parse(JSON.stringify(U)));return Y.title=X,V&&(Y.theme=V),T.localiseIcons(Y,D).then(O)}}},function(u,h,E){const C=E(2).observable;u.exports=function(T,L){'use strict';let N,R,P,D,M;const W=C(this),O=function(){return R?M||P?M>T.delayWarning?'delayed':'active':'passive':'offline'},H=function(){const z=O();N!==z&&(N=z),W.dispatchEvent('statusChanged',N)},U=function(z){R=z,H()};W.notifySavingChanged=function(z){P=z,D=D||z,H()},W.notifySaveDelay=function(z){M=z,(D||z)&&H()},W.notifyDocumentClosed=function(){U(!1)},L.addEventListener('network-status',U),R=L.isOnline()}},function(u,h,E){const C=E(2).observable;u.exports=function(){'use strict';const T=C(this);let L,N;T.editProgressIcon=function(R){return N=R,new Promise(function(P){L=P,T.dispatchEvent('progressIconEditRequested')})},T.cancelEditProgressIcon=function(){L&&L(N)},T.setIcon=function(R,P,D,M,W,O,H){P?(N={url:P,width:D,height:M,position:W},H&&(N.metaData=H)):N=!1,L&&L(N)},T.dropImage=function(){},T.getIcon=function(){return N}}},function(u,h,E){const C=E(0);u.exports=function(T,L,N,R,P){'use strict';const D=this,M='Map',W=function(z){return z?z.toUpperCase()+' Export':'Export'},O=function(z){return T[z].exporter||T[z]},H=function(z,V,X){const Y={'output-url':V};return T[z].processor?T[z].processor(C.extend(Y,X)):Promise.resolve(Y)},U=function(z){const V={notify:z};return V.promise=new Promise(function(X,Y){V.resolve=X,V.reject=Y}),V};D.startExport=function(z,V,X){let Y=!1;const G=U(X&&X.notify),K=W(z),Q=function(){return Y},J=function(){Y=!0},Z=function(ie,oe){'file-too-large'===ie&&P.step('layout-export','file-too-large'),R.log(M,K+' failed',ie),oe?G.reject({reason:ie,fileId:oe}):G.reject(ie)},ee=function(ie){G.notify('Uploading '+(ie||''))},te=O(z);return te||Z('no exporter found'),R.log(M,K+' started'),P&&P.setFunnelId('export-'+z),G.promise.then(J,J),G.notify&&G.notify('Setting up the export'),te(V).then(function(ie){let oe='';return C.isEmpty(ie)?void Z('empty'):void(oe=C.extend({},ie,V),L.generateExportConfiguration(z).then(function(re){const de=re.s3UploadIdentifier;N.save(JSON.stringify(oe),re,{isPrivate:!0,notify:ee}).then(function(){const se=R.timer(M,K+':polling-completed'),le=R.timer(M,K+':polling-timeout'),ce=R.timer(M,K+':polling-error');G.notify&&G.notify('Processing your export'),N.poll(re.signedErrorListUrl,{stoppedSemaphore:Q,sleepPeriod:15000}).then(function(){ce.end(),Z('generation-error',de)}),N.poll(re.signedOutputListUrl,{stoppedSemaphore:Q,sleepPeriod:2500}).then(function(){se.end(),R.log(M,K+' completed'),H(z,re.signedOutputUrl,V).then(function(ue){G.resolve(ue,de)},function(ue){Z(ue,de)})},function(ue){le.end(),Z(ue,de)})},function(se){Z(se,de)})},Z))},Z),G.promise}}},function(u,h,E){const C=E(0);u.exports=function(T,L,N){'use strict';const R=this;this.save=function(P,D,M){const W=T.buildFormData(),O=M&&M.isPrivate?'bucket-owner-read':'public-read';return['key','AWSAccessKeyId','policy','signature'].forEach(function(U){W.append(U,D[U])}),W.append('acl',O),W.append('Content-Type',D['Content-Type']||'text/plain'),W.append('file',P),L.ajax({url:'https://'+D.s3BucketName+'.s3.amazonaws.com/',type:'POST',processData:!1,contentType:!1,data:W},{notify:M&&M.notify,errorTransformer:function(U){let V,X;if(403===U.status)return'failed-authentication';try{V=T.buildAjaxXMLResponse(U),X=V.valueOf('Error Code')}catch(Y){}return X?{EntityTooLarge:'file-too-large'}[X]:'network-error'}})},R.poll=function(P,D){const M=Date.now(),W=function(){return D.stoppedSemaphore&&D.stoppedSemaphore()},H=function(){return M+D.timeoutPeriod<Date.now()};return D=C.extend({sleepPeriod:1e3,timeoutPeriod:1.2e5},D),N.poll(function(){return L.ajax({url:P,timeout:D.sleepPeriod,method:'GET'}).then(function(V){return T.buildAjaxXMLResponse(V).valueOf('Contents Key')})},z=>z,{pollingInterval:D.sleepPeriod,pollingFailurePredicate:function(){return H()||W()}})},R.loadUrl=function(P){return L.ajax({url:P,cache:!1,method:'GET'},{errorTransformer:function(D){return 404===D.status||403===D.status?'map-not-found':'network-error'}})}}},function(u){u.exports=function(C,I){'use strict';C.addEventListener('log',function(T,L,N,R){I.ga('send','event',T,L,N,R)}),C.addEventListener('timer',function(T,L,N){I.ga('send','timing',T,L,N)}),C.addEventListener('error',function(T){I.ga('send','exception',{exDescription:T,exFatal:!1})})}},function(u,h,E){const C=E(2).observable;u.exports=function(){'use strict';const T=C(this);let L;T.register=function(N,R){if(T['toggle'+N])throw'Cannot re-register '+N;T['toggle'+N]=function(){L===N?T.hide():(L=N,T.dispatchEvent('show',N,R))},T['show'+N]=function(){L!==N&&(L=N,T.dispatchEvent('show',N,R))},T.dispatchEvent('registered',N)},T.hide=function(){L=!1,T.dispatchEvent('hide')}}},function(u,h,E){const C=E(2).observable,I=E(0);u.exports=function(L){'use strict';let N;const R=C(this),P=function(H){return 0===I.size(H.storyboards)},D=function(H,U,z){const V={storyboards:{}};return V.storyboards[H]=U,z&&(V.type=z),V},M=function(H,U,z,V){const X=L.getScenesForNodeId(U),Y=D(H,z,V);X.push(Y),L.setScenesForNodeId(U,X)},W=function(){const H=L.getScenes(),U=N&&H&&H.length&&H.indexOfScene(N);return H?{hasScenes:0<H.length,notFirst:0<U,notLast:U&&-1<U&&U<H.length-1,isEnabled:L.getInputEnabled(),selectedScene:N}:{isEnabled:L.getInputEnabled()}},O=function(){R.dispatchEvent('storyboardContext',W())};R.addScene=function(H,U,z){let V=L.getActiveStoryboardName(),X=1;V||(V=L.createStoryboard()),X=U?L.insertionIndexBefore(U):L.nextSceneIndex(),X?M(V,H,X,z):L.rebalanceAndApply([U],function(Y){M(V,H,L.insertionIndexBefore(Y[0]),z)})},R.moveSceneAfter=function(H,U){if(!H)return!1;if(U&&U.ideaId===H.ideaId&&U.index===H.index)return!1;let z,V;const X=L.getActiveStoryboardName(),Y=L.getScenes(),G=Y&&I.indexOf(Y,I.find(Y,function(K){return K.ideaId===H.ideaId&&K.index===H.index}));if(!Y||!Y.length)return!1;if(-1===G)return!1;if(U){if(0<G&&(V=I.indexOf(Y,I.find(Y,function(K){return K.ideaId===U.ideaId&&K.index===U.index})),G===V+1))return!1;z=L.insertionIndexAfter(U)}else{if(0===G)return!1;z=L.insertionIndexAfter()}return z?L.updateSceneIndex(H,z,X):L.rebalanceAndApply([H,U],function(K){L.updateSceneIndex(K[0],L.insertionIndexAfter(K[1]),X)}),!0},R.moveSelectedSceneLeft=function(){const H=L.getScenes(),U=N&&H.indexOfScene(N);0===U||(1===U?R.moveSceneAfter(N):R.moveSceneAfter(N,H[U-2]))},R.moveSelectedSceneRight=function(){const H=L.getScenes(),U=N&&H.indexOfScene(N);U===H.length-1||R.moveSceneAfter(N,H[U+1])},R.removeScenesForIdeaId=function(H){const U=L.getActiveStoryboardName(),z=U&&L.getScenesForNodeId(H);let V;return!!U&&(I.each(z,function(X){X.storyboards&&X.storyboards[U]&&(delete X.storyboards[U],V=!0)}),!!V)&&(L.setScenesForNodeId(H,I.reject(z,P)),!0)},R.removeScene=function(H){if(!H||!H.ideaId||!H.index)if(N)H=N;else return!1;const U=L.getActiveStoryboardName(),z=U&&L.getScenesForNodeId(H.ideaId);return!!U&&void(I.each(z,function(V){V.storyboards&&V.storyboards[U]&&V.storyboards[U]===H.index&&delete V.storyboards[U]}),L.setScenesForNodeId(H.ideaId,I.reject(z,P)))},R.setSelectedScene=function(H){N&&N.matchesScene(H)||(N=H,O())},R.getSelectedScene=function(){return N},L.addEventListener('inputEnabled storyboardChangeComplete',O),L.addEventListener('storyboardSceneMoved',function(H){H.from.matchesScene(N)&&R.setSelectedScene(H.to)}),L.addEventListener('storyboardSceneRemoved',function(H){const U=L.getScenes();let z;I.isEmpty(U)&&R.setSelectedScene(!1),H.matchesScene(N)&&(z=I.find(U,function(V){return V.index>N.index}),!z&&(z=U[U.length-1]),R.setSelectedScene(z))})}},function(u,h,E){const C=E(1),I=E(0);u.exports=function(L){'use strict';const N=this,R=C('<div>').attr('data-mm-role','storyboard-sizer').addClass('storyboard-scene-title').css({'z-index':'-99',visibility:'hidden'}),P=function(M,W,O){const H={fontSize:0.5*O};R.css({'max-width':W}).appendTo('body').text(M);do H.fontSize=Math.floor(H.fontSize*0.9),H.lineHeight=Math.floor(1.3*H.fontSize),R.css('font-size',H.fontSize+'px'),R.css('line-height',H.lineHeight+'px');while((R.height()>O||R[0].scrollWidth>W)&&H.fontSize>O/30);return H.textWidth=R.width(),R.detach(),H},D=function(M){const W=/\n-/.test(M);return W};N.getDimensionsForScene=function(M,W,O){const H=W/16,U={text:{height:O-2*H,width:W-2*H,'padding-top':H,'padding-bottom':H,'padding-left':H,'padding-right':H,toCss:function(){return I.extend({'font-size':U.text.fontSize+'px','line-height':U.text.lineHeight+'px'},I.omit(U.text,'fontSize','lineHeight'))}},image:{toCss:function(){return{'background-image':'','background-repeat':'','background-size':'','background-position':''}}}};let z=1,V=O,X=W,Y=0,G=0;return M.image&&('top'===M.image.position||'bottom'===M.image.position?(V=O/2-H,U.text['padding-'+M.image.position]=O/2,U.text.height=O/2-H):('left'===M.image.position||'right'===M.image.position)&&(X=W/2-H,U.text['padding-'+M.image.position]=W/2,U.text.width=W/2-H),z=X/M.image.width,z>V/M.image.height&&(z=V/M.image.height),U.image={url:M.image.url,height:z*M.image.height,width:z*M.image.width},'top'===M.image.position?(U.image.top=0.25*O-0.5*U.image.height,U.image.left=(W-U.image.width)/2):'bottom'===M.image.position?(U.image.top=0.75*O-0.5*U.image.height,U.image.left=(W-U.image.width)/2):'left'===M.image.position?(U.image.top=(O-U.image.height)/2,U.image.left=(W/2-U.image.width)/2):'right'===M.image.position?(U.image.top=(O-U.image.height)/2,U.image.left=0.75*W-0.5*U.image.width):(U.image.top=(O-U.image.height)/2,U.image.left=(W-U.image.width)/2),U.image.toCss=function(){return{'background-image':'url("'+L.getResource(M.image.url)+'")','background-repeat':'no-repeat','background-size':z*M.image.width+'px '+z*M.image.height+'px','background-position':U.image.left+'px '+U.image.top+'px'}}),D(M.title)&&(U.text['text-align']='left'),Y=P(M.title,U.text.width,U.text.height),U.text.fontSize=Y.fontSize,U.text.lineHeight=Y.lineHeight,G=(U.text.width-Y.textWidth)/2,0<G&&(U.text.width=Y.textWidth,U.text['padding-left']+=G,U.text['padding-right']+=G),U}}},function(u,h,E){const C=E(0);u.exports=function(T,L,N){'use strict';const R=this,P=function(D){const M=[];return C.each(D.storyboard,function(W){W.image&&W.image.url&&M.push(W.image)}),M};R.makeExportable=function(){const D=L.getScenes(),M=D&&{storyboard:C.map(D,function(W){return C.extend({title:W.title},N.getDimensionsForScene(W,800,600))})};return C.isEmpty(D)?Promise.reject('empty'):T.localiseIcons(M,P)}}},function(u,h,E){const C=E(2).observable;u.exports=function(T,L){'use strict';const N=C(this);N.createScenesFromSelectedNodes=function(){T.applyToActivated(function(R){L.addScene(R)})},N.createScenesFromSelectedNodesWithChildren=function(){T.applyToActivated(function(R){L.addScene(R,!1,'with-children')})},N.editNode=function(R){T.focusAndSelect(R),T.editNode(R)}}},function(u,h,E){const C=E(0),I=E(277),T=E(2).observable;u.exports=function(N,R,P){'use strict';let D,M;const W=T(this),O=function(){const Y=W.getActiveStoryboardName(),G=[],K=function(Q,J){let Z=Q.title;return'with-children'===J&&C.each(Q.sortedSubIdeas(),function(ee){Z=Z+'\n- '+ee.title}),Z};return Y?void(N.getActiveContent().traverse(function(Q){const J=Q.getAttr(P);J&&C.each(J,function(Z){const ee=parseFloat(Z.storyboards[Y]);let te,ae;ee&&(te={ideaId:Q.id,title:K(Q,Z.type),index:ee},ae=Q.getAttr('icon'),ae&&(te.image=ae),G.push(te))})}),M=I(C.sortBy(G,'index'))):void(M=I(G))},H=function(Y,G){return 1e-4>Math.abs(Y-G)},U=function(Y){let G;return Y?(G=Y.length,C.each(Y,function(K){const Q=K.match(/^Storyboard ([1-9]+)/),J=Q&&1<Q.length&&parseFloat(Q[1])||0;J>G&&(G=J)}),G):0},z=function(Y,G){const K={removed:[],added:[],contentUpdated:[]};return I(Y),I(G),C.each(Y,function(Q){const J=G&&G.findScene(Q);J?(J.title!==Q.title||!C.isEqual(J.image,Q.image))&&K.contentUpdated.push(J):K.removed.push(Q)}),C.each(G,function(Q){const J=Y&&Y.findScene(Q);J||K.added.push(Q)}),1===K.added.length&&1===K.removed.length&&0===K.contentUpdated.length&&K.added[0].ideaId===K.removed[0].ideaId?{moved:{from:K.removed[0],to:K.added[0]}}:K},V=function(Y){const G=z(Y,M);C.each(G.removed,function(K){W.dispatchEvent('storyboardSceneRemoved',K)}),C.each(G.added,function(K){W.dispatchEvent('storyboardSceneAdded',K)}),C.each(G.contentUpdated,function(K){W.dispatchEvent('storyboardSceneContentUpdated',K)}),G.moved&&W.dispatchEvent('storyboardSceneMoved',G.moved),C.isEmpty(G.moved)&&C.isEmpty(G.removed)&&C.isEmpty(G.added)||W.dispatchEvent('storyboardChanged')},X=function(){const Y=M;D&&(O(),V(Y))};W.setInputEnabled=function(Y){D=Y,Y&&X(),W.dispatchEvent('inputEnabled',Y)},W.getInputEnabled=function(){return D},W.getActiveStoryboardName=function(){const Y=N&&N.getActiveContent(),G=Y&&Y.getAttr(R);if(G&&0<G.length)return G[0]},W.createStoryboard=function(){const Y=N&&N.getActiveContent(),G=Y&&Y.getAttr(R)||[],K=U(G),Q='Storyboard '+(K+1);if(Y)return G.push(Q),Y.updateAttr(Y.id,R,G),Q},W.nextSceneIndex=function(){return M&&M.nextSceneIndex()},W.updateSceneIndex=function(Y,G,K){const Q=W.getScenesForNodeId(Y.ideaId);return C.each(Q,function(J){J.storyboards&&J.storyboards[K]&&J.storyboards[K]===Y.index&&(J.storyboards[K]=G)}),W.setScenesForNodeId(Y.ideaId,Q),C.extend({},Y,{index:G})},W.getScenesForNodeId=function(Y){const G=N.getActiveContent().getAttrById(Y,P)||[];return JSON.parse(JSON.stringify(G))},W.setScenesForNodeId=function(Y,G){N.getActiveContent().updateAttr(Y,P,G)},W.scenesMatch=function(Y,G){return Y&&G&&!(Y.ideaId!==G.ideaId)&&!(Y.index!==G.index)},W.rebalance=function(Y){const G=[],K=W.getActiveStoryboardName();let Q=1;return C.each(M,function(J){const Z=C.find(Y,function(ae){return W.scenesMatch(J,ae)}),ee=void 0===Z?-1:C.indexOf(Y,Z),te=W.updateSceneIndex(J,Q,K);Q++,0<=ee&&(G[ee]=te)}),G},W.rebalanceAndApply=function(Y,G){const K=N.getActiveContent();K.batch(function(){const Q=W.rebalance(Y);X(),G(Q)})},W.insertionIndexAfter=function(Y){const K=function(J){const Z=M[J+1].index,ee=(Y.index+Z)/2;return H(ee,Z)||H(ee,Y.index)?!1:ee};return Y?function(){const J=C.indexOf(M,C.find(M,function(Z){return Z.ideaId===Y.ideaId&&Z.index===Y.index}));return!(0>J)&&(J===M.length-1?Y.index+1:K(J))}():function(){let J;return 0!==M.length&&(J=M[0].index/2,!H(J,M[0].index)&&J)}()},W.insertionIndexBefore=function(Y){const K=Y&&M.indexOfScene(Y);return!!Y&&!(0>K)&&function(Q){const J=0===Q?0:M[Q-1].index,Z=(Y.index+J)/2;return H(Z,J)||H(Z,Y.index)?!1:Z}(K)},W.getScenes=function(){return D||O(),M},N.addListener(X)}},,function(u,h,E){const C=E(2).observable,I=E(0);u.exports=function(L,N,R){'use strict';let P={},D=!1,M={};const W=C(this),O=function(K){return P[K]},H=function(K){const Q=L.getActiveContent();return Q.id===K?Q:Q.findSubIdeaById(K)},U=function(K){const Q=H(K);return Q&&Q.title},z=function(K){return K&&(W.setActiveNodeId(K.nodeId),W.dispatchEvent('noteEditRequested',K)),!!K},V=function(){W.dispatchEvent('writerContext',{isEnabled:D,hasSelection:!!M[N.getSelectedNodeId()]})},X=function(K){W.dispatchEvent('activeNodeChanged',K),V()},Y=function(K){return K&&K.replace(/\n+/g,' ').replace(/<\/p><p>/gi,'\n\n').replace(/<\/?p>/gi,'\n\n').replace(/<\/div><div>/gi,'\n\n').replace(/<\/?div>/gi,'\n\n').replace(/<br\/?>/gi,'\n\n').replace(/<\/li><\/[uo]l>/gi,'\n\n').replace(/<\/?[uo]l>/gi,'\n\n').replace(/<\/li>/gi,'\n\n').replace(/<li>/gi,'* ').replace(/<\/?i>/gi,'_').replace(/<\/?b>/gi,'**').replace(/<\/h[0-9]>/gi,'\n\n').replace(/<h1>/gi,'\n\n# ').replace(/<h2>/gi,'\n\n## ').replace(/<h3>/gi,'\n\n### ').replace(/<h4>/gi,'\n\n#### ').replace(/<h[0-9]>/gi,'\n\n').replace(/<a[^>]*href="([^"]*)"[^>]*>([^<]*)<\/a>/gi,'[$2]($1)').replace(/<a[^>]*href='([^']*)'[^>]*>([^<]*)<\/a>/gi,'[$2]($1)').replace(/<a[^>]*href=([^"'][^ ]*) [^>]*>([^<]*)<\/a>/gi,'[$2]($1)').replace(/<[^>]*>/g,'').replace(/\n\n+/g,'\n\n').trim()},G=function(K){let Q=1;const J={};return P={},K.traverse(function(Z){P[Z.id]=Q++,Z.attr&&Z.attr[R]&&(J[Z.id]=I.extend({},Z.attr[R],{nodeId:Z.id,title:Z.title,index:O(Z.id)}))}),J};W.setText=function(K,Q){const J=M[K]&&M[K].isTemp;let Z,ee;Q?(Z=L.getActiveContent().getAttrById(K,R)||{index:O(K)},Z.text=Q):Z=!1,ee=!Z&&J,ee||L.getActiveContent().updateAttr(K,R,Z)||(ee=J),ee&&(delete M[K],W.dispatchEvent('noteRemoved',K))},W.editNoteForSelectedNode=function(){W.editNoteForNodeId(N.getSelectedNodeId())},W.editNoteForNodeId=function(K){return M[K]||(M[K]={index:O(K),nodeId:K,title:U(K),isTemp:!0}),z(M[K])},W.removeSelected=function(){W.setText(N.getSelectedNodeId())},W.removeNoteForNodeId=function(K){W.setText(K)},W.setActiveNodeId=function(K){N.centerOnNode(K)},L.addListener(function(K){const Q=I.keys(M),J=G(K),Z=I.keys(J);let ee=!1;I.difference(Q,Z).forEach(function(te){return M[te].isTemp?void(J[te]=M[te]):void(W.dispatchEvent('noteRemoved',te),ee=!0)}),I.difference(Z,Q).forEach(function(te){W.dispatchEvent('noteAdded',J[te]),ee=!0}),I.intersection(Z,Q).forEach(function(te){const ae=J[te];M[te].text?((M[te].text!==ae.text||M[te].title!==ae.title)&&W.dispatchEvent('noteChanged',ae),M[te].index!==ae.index&&(W.dispatchEvent('noteMoved',ae),ee=!0)):(W.dispatchEvent('noteAdded',ae),ee=!0)}),M=J,ee&&V()}),W.requestContextMenu=function(K,Q){return W.dispatchEvent('contextMenuRequested',N.getSelectedNodeId(),K,Q,!0),!0},W.setInputEnabled=function(K){D=K,V()},W.toggleActiveNoteFolded=function(){W.dispatchEvent('noteToggleFoldRequested',N.getSelectedNodeId())},W.foldInactiveNotes=function(){W.dispatchEvent('foldInactiveNotesRequested')},W.toggleNoteFolded=function(K){W.dispatchEvent('noteToggleFoldRequested',K)},W.canImportFromAttachment=function(K){const Q=L.getActiveContent().getAttrById(K,'attachment');return Q&&'text/html'===Q.contentType&&!Q.dataUriEncoded},W.importFromAttachment=function(K){const Q=L.getActiveContent().getAttrById(K,'attachment'),J=W.canImportFromAttachment(K)&&Y(Q.content);return!!J&&(L.getActiveContent().batch(function(){L.getActiveContent().updateAttr(K,'attachment',!1),L.getActiveContent().updateAttr(K,R,{text:J})}),!0)},N.addEventListener('nodeSelectionChanged',function(K,Q){const J=M[K];Q&&D&&(J?X(K):X(void 0))}),N.addEventListener('decorationActionRequested',function(K,Q){'note'===Q&&W.editNoteForNodeId(K)})}},,,function(u,h,E){const C=E(1);C.fn.addMeasureWidget=function(I){'use strict';return C(this).each(function(){const L=C(this),N=L.find('[data-mm-role~="measure-name"]'),R=L.find('[data-mm-role~="add-measure"]'),P=function(){const D=N.val();D&&I.addMeasure(D)?L.addClass('hidden'):(N.parents('div.control-block').addClass('error'),N.focus())};L.on('show',function(){N.val(''),N.parents('div.control-block').removeClass('error'),N.focus()}),N.on('keyup',function(D){D.keyCode===13&&P()}),R.click(P)})}},function(u,h,E){const C=E(1);C.fn.alertWidget=function(I){'use strict';return C.each(this,function(){const T=C(this),L=T.data('mm-alert-types');L&&(I.addEventListener(L,function(N,R){T.show(),T.prop('alert-type',R),T.find('[data-mm-role~="alertMessage"]').text(N)}),T.find('[data-mm-role~="alertDismiss"]').click(function(){T.hide()}))})}},function(u,h,E){const C=E(270),I=E(1);I.fn.atlasPrepopulationWidget=function(T,L,N,R,P){'use strict';const D=this,M=R||C.truncate,W=P||C.sanitize,O=function(){const H=T.getIdea(),U=H&&H.getAttr('previous-atlas-export'),z=U&&U.title||H&&(H.title||H.findSubIdeaById(H.getDefaultRootId()).title),V=M(z,L),X=U&&U.description||M('MindMup mind map: '+z,N),Y=U&&U.slug||M(z,L),G=W(Y);D.find('[data-mm-export-parameter=title]').attr('placeholder',V).val(V),D.find('[data-mm-export-parameter=description]').attr('placeholder',X).val(X),D.find('[data-mm-export-parameter=slug]').attr('placeholder',G).val(G).trigger('checkForExists')};return D.find('[data-mm-export-parameter=slug]').on('change',function(){const H=I(this),U=H.val();H.val(W(U)),H.trigger('checkForExists')}),D.on('show',function(){O()}),D}},function(u,h,E){const C=E(1);E(4),C.fn.atlasRepublishingWidget=function(I){'use strict';return C(this).each(function(){const T=C(this),L=T.find('[data-mm-export-parameter~="slug"]'),N=function(D){const M=T.find('[data-mm-atlas-publishing~="'+D+'"]');return T.find('[data-mm-atlas-publishing]').addClass('hidden'),M.removeClass('hidden'),M.length},R=function(D){N('error-'+D)||N('error'),T.trigger('errorShown')},P=function(){const D=L.val();N('checking'),I.exists(D).then(function(M){const W=M?'published':'not-published';N(W),T.trigger(C.Event('checkForExistsFinished'))},R)};L.on('checkForExists',P),T.on('publishResult',P),T.find('[data-mm-role~="unpublish-atlas"]').click(function(){const D=L.val();T.showSection('unpublishing'),I.delete(D).then(function(){N('not-published'),T.showSection('unpublished'),T.trigger(C.Event('unpublishFinished'))},R)})})}},function(u,h,E){const C=E(1);C.fn.attachmentEditorWidget=function(I){'use strict';return C(this).each(function(){const T=C(this),L=T.find('[data-mm-attachment-action]'),N=T.find('[data-mm-attachment-detail]');I.addEventListener('view',function(P,D){N.each(function(){const O=this,H=P[O.getAttribute('data-mm-attachment-detail')];H?(O.classList.remove('hidden'),'A'===O.tagName?O.setAttribute('href',H):'IFRAME'===O.tagName?O.setAttribute('src',H):O.innerHTML=H):O.classList.add('hidden')}),L.each(function(){const O=this;D[O.getAttribute('data-mm-attachment-action')]?O.classList.remove('hidden'):O.classList.add('hidden'),'download'===O.getAttribute('data-mm-attachment-action')&&O.setAttribute('download',P.name||'attachment.html')})}),T.on('hide',function(){I.cleanup(),T.find('iframe').attr('src','')})})}},function(u,h,E){const C=E(1);C.fn.blobDownloaderLinkWidget=function(I,T){'use strict';return(!T&&!I.isBlobDownloadSupported()||T&&I.isBlobDownloadSupported())&&C(this).remove(),C(this)}},function(u,h,E){E(280);const C=E(1);C.fn.contextDisablerWidget=function(I,T,L){'use strict';const N=C(this);return I.addEventListener(T,function(P){N.each(function(){const D=C(this).contextAttributeValue(L,P);D?this.classList.remove('disabled'):this.classList.add('disabled')})}),N}},function(u,h,E){const C=E(1);C.fn.contextMenuWidget=function(I,T,L){'use strict';return C.each(this,function(){let N=!1;const R=C(this),P=function(){N&&(N=!1,window.clearTimeout(N))},D=function(){P(),R.addClass('hidden'),R.off('mouseenter',M),R.off('mouseout',W),L.off('click touch keydown',D),T.off('scroll',D)},M=function(){L.off('click',D)},W=function(){L.on('click',D)},O=function(H,U,z){let V,X;P(),T.off('scroll',D),R.removeClass('top-arrow bottom-arrow left-arrow right-arrow small'),z&&R.addClass('small'),V=H-0.5*R.outerWidth(),X=U-R.outerHeight()-20,20>X?(X=U+20,R.addClass('top-arrow')):R.addClass('bottom-arrow'),0>V?(V=H-15,R.addClass('left-arrow')):V+R.outerWidth()>L.innerWidth()&&(V=H-R.outerWidth()+15,R.addClass('right-arrow')),R.css('left',V).css('top',X).removeClass('hidden'),z||L.on('click',D),R.on('mouseenter',M),R.on('mouseout',W),L.on('touch keydown',D),N=window.setTimeout(function(){T.on('scroll',D)},200)};I.addEventListener('mapMoveRequested mapScaleChanged nodeSelectionChanged nodeEditRequested mapViewResetRequested',D),I.addEventListener('contextMenuRequested',function(H,U,z,V){O(U,z,V)}),I.addEventListener('linkSelected',function(H,U){O(U.x,U.y,!0)}),R.on('contextmenu',function(H){return H.preventDefault(),H.stopPropagation(),!1})})}},function(u,h,E){const C=E(1);C.fn.copyFileWidget=function(I,T){'use strict';return C(this).each(function(){const L=C(this),N=L.find('[data-mm-role~="copied-name"]'),R=L.find('[data-mm-role~="submit"]'),P=L.find('[data-mm-role~="editCopy"]');let D;R.click(function(){const M=N.val();M&&M.trim().length?I.copyTo(M):(N.addClass('validation-error'),N.focus())}),T.addEventListener('fileLoaded renamed',function(M,W){D=W}),P.on('click',function(){I.editCopy()}),L.on('show',function(){N.val('Copy of '+D),N.removeClass('validation-error')})})}},function(u){u.exports=function(C){'use strict';const I=new Image;return new Promise(function(T,L){I.onload=function(){T({width:I.width,height:I.height})},I.onerror=function(){L()},I.src=C})}},,function(u,h,E){const C=E(1);C.fn.downloadLinkWidget=function(I){'use strict';return C(this).each(function(){I.isDownloadSupported()||this.setAttribute('target','_blank')})}},,,function(u,h,E){const C=E(1);C.fn.fileNameWidget=function(I,T){'use strict';const L=E(214);return C(this).each(function(){let P;const D=C(this),M=this,W=function(){const O=document.createEvent('HTMLEvents');O.initEvent('input',!0,!1),M.dispatchEvent(O)};L(this,{minWidth:!0}),I.addEventListener('fileLoaded',function(O,H){D.val(H).addClass('active'),W()}),I.addEventListener('renamed saveFileSuccess saveFileCancelled',function(O,H){D.val(H),W()}),T&&T.addEventListener('title',function(O){D.val(O),W()}),D.on('focus',function(){P=D.val()}).on('blur',function(){const O=D.val().trim();0===O.length?(D.val(P),W()):O!==P&&I.renameFile(O)}).on('keyup',function(O){O.keyCode===13?D.blur():O.keyCode===27&&(D.val(P),W(),D.blur())})})}},function(u,h,E){const C=E(1);C.fn.focusTransferWidget=function(I){'use strict';return C(this).on('show',function(){C(this).find('[data-mm-request-focus]:not(.hidden)').each(function(){const T=C(this);T.parents('.hidden').length||T.focus()})}).on('hide',function(){C(document.activeElement).parents('.hidden').length&&I.focus()})}},function(u,h,E){const C=E(1),I=E(0);u.exports=function(L){'use strict';const N=function(W){return C('<div>').append(W).html()},R=function(W,O){const H={},U=W.children('richcontent').find('body');return W.attr('BACKGROUND_COLOR')&&(H.style={background:W.attr('BACKGROUND_COLOR')}),(O&&O.collapsed||'true'===W.attr('FOLDED'))&&(H.collapsed='true'),0<U.length&&(H.attachment={contentType:'text/html',content:N(U.children())}),H},P=function(W,O){const H=C(W),U={title:H.attr('TEXT')||''},z=H.children('node'),V=R(H,O),X=I.map(z,function(K){return P(K,V)}),Y={};let G=1;return 0<I.size(V)&&(U.attr=V),0<X.length?(I.each(X,function(K){const Q='left'===C(z[G-1]).attr('POSITION')?-1:1;Y[Q*G]=K,G+=1}),U.ideas=Y):U.attr&&U.attr.collapsed&&delete U.attr.collapsed,U},D=C(C.parseXML(L)),M=P(D.find('map').children('node').first());return M.formatVersion=2,M}},function(u,h,E){const C=E(1);C.fn.fullScreenControlWidget=function(I){'use strict';return C(this).each(function(){const T=C(this);I.fullScreenEnabled()?T.on('click',function(){I.requestFullScreen(C(T.data('mm-target-selector'))[0])}):T.addClass('hidden')})}},function(u,h,E){const C=E(1);C.fn.inputFocusWidget=function(){'use strict';return C(this).on('click',function(){const I=C(this),T=I.data('mm-input-focus');C(T).focus().select()})}},function(u,h,E){const C=E(1),I=E(0);C.fn.installHotkeyWidget=function(){'use strict';const T={'ALT+':String.fromCharCode(8997),'SHIFT+':String.fromCharCode(8679),'CTRL+':'^','META+':String.fromCharCode(8984),UP:String.fromCharCode(8593),DOWN:String.fromCharCode(8595),BACKSPACE:String.fromCharCode(9003)},L=function(N){let R=N||'';return I.each(T,function(P,D){R=R.replace(P,D)}),R};return C(this).each(function(){const N=C(this),R=N.data('mm-install-hotkey'),P=L(N.data('mm-hotkey'));C(R).keydown(P,function(D){D.stopImmediatePropagation(),D.stopPropagation(),D.preventDefault(),N.trigger('click')})})}},function(u,h,E){const C=E(1);E(115),C.fn.keyboardColorWidget=function(I){'use strict';const T=C(this),L=function(O){let H=parseInt(O).toString(16);return 1===H.length&&(H='0'+H),H},N=function(O,H,U){return'#'+L(O)+L(H)+L(U)},R={aliceblue:N(240,248,255),antiquewhite:N(250,235,215),aqua:N(0,255,255),aquamarine:N(127,255,212),azure:N(240,255,255),beige:N(245,245,220),bisque:N(255,228,196),black:N(0,0,0),blanchedalmond:N(255,235,205),blue:N(0,0,255),blueviolet:N(138,43,226),brown:N(165,42,42),burlywood:N(222,184,135),cadetblue:N(95,158,160),chartreuse:N(127,255,0),chocolate:N(210,105,30),coral:N(255,127,80),cornflowerblue:N(100,149,237),cornsilk:N(255,248,220),crimson:N(220,20,60),cyan:N(0,255,255),darkblue:N(0,0,139),darkcyan:N(0,139,139),darkgoldenrod:N(184,134,11),darkgray:N(169,169,169),darkgreen:N(0,100,0),darkgrey:N(169,169,169),darkkhaki:N(189,183,107),darkmagenta:N(139,0,139),darkolivegreen:N(85,107,47),darkorange:N(255,140,0),darkorchid:N(153,50,204),darkred:N(139,0,0),darksalmon:N(233,150,122),darkseagreen:N(143,188,143),darkslateblue:N(72,61,139),darkslategray:N(47,79,79),darkslategrey:N(47,79,79),darkturquoise:N(0,206,209),darkviolet:N(148,0,211),deeppink:N(255,20,147),deepskyblue:N(0,191,255),dimgray:N(105,105,105),dimgrey:N(105,105,105),dodgerblue:N(30,144,255),firebrick:N(178,34,34),floralwhite:N(255,250,240),forestgreen:N(34,139,34),fuchsia:N(255,0,255),gainsboro:N(220,220,220),ghostwhite:N(248,248,255),gold:N(255,215,0),goldenrod:N(218,165,32),gray:N(128,128,128),grey:N(128,128,128),green:N(0,128,0),greenyellow:N(173,255,47),honeydew:N(240,255,240),hotpink:N(255,105,180),indianred:N(205,92,92),indigo:N(75,0,130),ivory:N(255,255,240),khaki:N(240,230,140),lavender:N(230,230,250),lavenderblush:N(255,240,245),lawngreen:N(124,252,0),lemonchiffon:N(255,250,205),lightblue:N(173,216,230),lightcoral:N(240,128,128),lightcyan:N(224,255,255),lightgoldenrodyellow:N(250,250,210),lightgray:N(211,211,211),lightgreen:N(144,238,144),lightgrey:N(211,211,211),lightpink:N(255,182,193),lightsalmon:N(255,160,122),lightseagreen:N(32,178,170),lightskyblue:N(135,206,250),lightslategray:N(119,136,153),lightslategrey:N(119,136,153),lightsteelblue:N(176,196,222),lightyellow:N(255,255,224),lime:N(0,255,0),limegreen:N(50,205,50),linen:N(250,240,230),magenta:N(255,0,255),maroon:N(128,0,0),mediumaquamarine:N(102,205,170),mediumblue:N(0,0,205),mediumorchid:N(186,85,211),mediumpurple:N(147,112,219),mediumseagreen:N(60,179,113),mediumslateblue:N(123,104,238),mediumspringgreen:N(0,250,154),mediumturquoise:N(72,209,204),mediumvioletred:N(199,21,133),midnightblue:N(25,25,112),mintcream:N(245,255,250),mistyrose:N(255,228,225),moccasin:N(255,228,181),navajowhite:N(255,222,173),navy:N(0,0,128),oldlace:N(253,245,230),olive:N(128,128,0),olivedrab:N(107,142,35),orange:N(255,165,0),orangered:N(255,69,0),orchid:N(218,112,214),palegoldenrod:N(238,232,170),palegreen:N(152,251,152),paleturquoise:N(175,238,238),palevioletred:N(219,112,147),papayawhip:N(255,239,213),peachpuff:N(255,218,185),peru:N(205,133,63),pink:N(255,192,203),plum:N(221,160,221),powderblue:N(176,224,230),purple:N(128,0,128),red:N(255,0,0),rosybrown:N(188,143,143),royalblue:N(65,105,225),saddlebrown:N(139,69,19),salmon:N(250,128,114),sandybrown:N(244,164,96),seagreen:N(46,139,87),seashell:N(255,245,238),sienna:N(160,82,45),silver:N(192,192,192),skyblue:N(135,206,235),slateblue:N(106,90,205),slategray:N(112,128,144),slategrey:N(112,128,144),snow:N(255,250,250),springgreen:N(0,255,127),steelblue:N(70,130,180),tan:N(210,180,140),teal:N(0,128,128),thistle:N(216,191,216),tomato:N(255,99,71),turquoise:N(64,224,208),violet:N(238,130,238),wheat:N(245,222,179),white:N(255,255,255),whitesmoke:N(245,245,245),yellow:N(255,255,0),yellowgreen:N(154,205,50),default:''},D=function(O){const H=O.toLowerCase(),U=R[H];return U?U:/^[a-z0-9][a-z0-9][a-z0-9][a-z0-9][a-z0-9][a-z0-9]$/.test(H)?'#'+H:!!/^#[a-z0-9][a-z0-9][a-z0-9][a-z0-9][a-z0-9][a-z0-9]$/.test(H)&&H};return C(this).typeahead(function(O){const H=O&&O.toLowerCase();return Object.keys(R).filter(function(U){return 0===U.indexOf(H)})},function(O){const H=O&&D(O.toLowerCase());(H||'default'===O)&&(I.updateStyle('cmdline','background',H),T.addClass('hidden'))},function(O,H){O.find('[data-mm-role=color]').css('background-color',H),O.find('[data-mm-role=content]').text(H)})}},function(u,h,E){const C=E(1);E(4),C.fn.localExportWidget=function(I){'use strict';return C(this).each(function(){const T=C(this).sectionHandlerWidget();I.addEventListener('result',function(L,N,R){T.find('[data-mm-role~=data-mm-export-result]').attr({download:N,href:R}),T.find('[data-mm-role~=output-url]').val(R),T.find('[data-mm-role~=output-title]').val(N)}),I.addEventListener('stage',function(L){T.removeClass('hidden'),T.showSection({progress:'inprogress',exported:'done',error:'error'}[L])}),T.on('hide',I.cleanup)})}},function(u,h,E){const C=E(1);C.fn.macifyHotkeys=function(I){'use strict';return I.isMac()?C(this).each(function(){const T=this.getAttribute('data-mm-hotkey');/\^/.test(T)&&this.setAttribute('data-mm-hotkey',T.replace('^',String.fromCharCode(8984)))}):C(this)}},function(u,h,E){E(279),E(284),E(287);const C=E(1),I=E(0);C.fn.measuresSheetWidget=function(T){'use strict';return C.each(this,function(){let L=!1;const N=C(this),R=N.find('[data-mm-role=measurements-table]'),P=N.find('[data-mm-role=no-measures]'),D=N.find('[data-mm-role=measurement-template]'),M=D.parent(),W=N.find('[data-mm-role=idea-template]'),O=W.find('[data-mm-role=value-template]').detach(),H=W.parent(),U=N.find('[data-mm-role=summary-template]'),z=U.parent(),V=function(re){return N.find('[data-mm-nodeid="'+re+'"]')},X=function(re){return I.map(M.children(),function(de){return C(de).find('[data-mm-role=measurement-name]').text()}).indexOf(re)},Y=function(re,de){const se=D.clone().addToRowAtIndex(M,de),le=function(){T.setSelectedMeasure(re)};se.find('[data-mm-role=measurement-name]').text(re).click(le),se.find('[data-mm-role=remove-measure]').click(function(){T.removeMeasure(re)}),U.clone().addToRowAtIndex(z,de).text('0').click(le),R.show(),P.hide()},G=function(re,de){re!==L&&(L=re,T.editingMeasure(re,de))},K=function(re,de,se,le,ce){const pe=re.children('[data-mm-role=value-template]').eq(ce),ue=O.clone();return ue.text(de||'0').on('change',function(he,ge){return T.setValue(se,le,ge)}).on('focus',function(){T.setSelectedMeasure(le),G(!0,se)}).on('blur',function(){G(!1,se)}).keydown('Esc',function(he){ue.blur(),he.preventDefault(),he.stopPropagation()}),pe.length?ue.insertBefore(pe):ue.appendTo(re),ue},Q=function(re){const de=re.selectedMeasure&&X(re.selectedMeasure),se=re.labelledMeasure&&X(re.labelledMeasure);re.hasMeasures?(R.show(),P.hide(),M.children().removeClass('mm-selected').removeClass('mm-labelled'),z.children().removeClass('mm-selected'),N.find('[data-mm-nodeid]').each(function(){const le=C(this);le.children().removeClass('mm-selected')}),de&&(M.children().eq(de).addClass('mm-selected'),z.children().eq(de).addClass('mm-selected'),N.find('[data-mm-nodeid]').each(function(){const le=C(this);le.children().eq(de).addClass('mm-selected')})),se&&M.children().eq(se).addClass('mm-labelled')):(R.hide(),P.show())},J=function(re,de,se){const le=V(re),ce=X(de);0<=ce&&(le.children().eq(ce).text(se),R.trigger(C.Event('change',{column:ce})))},Z=function(re,de){Y(re,de),I.each(H.children(),function(se){K(C(se),'0',C(se).data('mm-nodeid'),re,de)})},te=function(re){const de=X(re);0>de||(M.children().eq(de).remove(),z.children().eq(de).remove(),I.each(H.children(),function(se){C(se).children().eq(de).remove()}))},ae=function(re){H.children('[data-mm-role=idea-template]').remove(),I.each(T.getMeasurementValues(),function(de){const se=W.clone().appendTo(H).attr('data-mm-nodeid',de.id);se.find('[data-mm-role=idea-title]').text(function(){const le=C(this).data('mm-truncate');return le&&de.title.length>le?de.title.substring(0,le)+'...':de.title}),I.each(re,function(le){K(se,de.values[le],de.id,le)})}),N.find('[data-mm-role=measurements-table]').trigger('change')},ie=function(){M.children('[data-mm-role=measurement-template]').remove(),z.children('[data-mm-role=summary-template]').remove();const re=T.getMeasures();I.each(re,function(de){Y(de)}),ae(re)},oe=function(){ae(T.getMeasures())};D.detach(),U.detach(),W.detach(),R.editableTableWidget({editor:N.find('[data-mm-role=measures-editor]'),cloneProperties:C.fn.editableTableWidget.defaultOptions.cloneProperties.concat(['outline','box-shadow','-webkit-box-shadow','-moz-box-shadow'])}).on('validate',function(re,de){return T.editingMeasure(!0),T.validate(de)}).on('editStart',function(){}).numericTotaliser(),N.find('[data-mm-role=measures-editor]').on('focus',G.bind(N,!0,!1)).on('blur',G.bind(N,!1,!1)),N.on('show',function(){ie(),T.addEventListener('startFromScratch',ie),T.addEventListener('measureRowsChanged',oe),T.addEventListener('measureValueChanged',J),T.addEventListener('measureAdded',Z),T.addEventListener('measureRemoved',te),T.addEventListener('measuresContext',Q),T.setActive(!0)}),N.on('hide',function(){T.removeEventListener('startFromScratch',ie),T.removeEventListener('measureRowsChanged',oe),T.removeEventListener('measureValueChanged',J),T.removeEventListener('measureAdded',Z),T.removeEventListener('measureRemoved',te),T.removeEventListener('measuresContext',Q),T.setActive(!1),N.parent().siblings('[tabindex]').focus()}),T.addEventListener('measureLabelShown',function(re){M.children().removeClass('mm-active');const de=X(re);0<=de&&M.children().eq(de).addClass('mm-active')})})}},function(u,h,E){const C=E(1);C.fn.menuBarWidget=function(I){'use strict';return C(this).each(function(){const T=C(this);T.find('topmenu').attr('tabindex',1).on('blur',function(){C(this).find('.expanded').removeClass('expanded')}).on('mouseover',function(){0<C(this).siblings().filter(':focus').length&&C(this).focus()}),T.find('menusection > menuitem').click(function(){const L=C(this);T.find('.expanded').not(this).removeClass('expanded'),L.next().is('submenu')?L.toggleClass('expanded'):(L.attr('href')&&I.open(L.attr('href')),L.parents('topmenu').blur())}),T.find('topmenu > submenu > menusection > menuitem').on('mouseenter',function(){T.find('.expanded').not(this).removeClass('expanded'),C(this).next().is('submenu')&&C(this).addClass('expanded')}),T.find('menusection > menuitem').each(function(){const L=C(this);L.next().is('submenu')&&L.addClass('has-submenu')}),T.on('mouseleave',function(){T.find(':focus').blur()})})}},function(u,h,E){const C=E(1);C.fn.moveToFolderWidget=function(I,T,L,N){'use strict';let R;return I.addEventListener('fileLoaded',function(P){R=P}),C(this).on('click',function(){C(this).parents(':focus').blur(),T.getProfile().then(function(P){N.pickFolder(P.authToken,'Select a destination folder').then(function(D){L.moveToFolder(R,D)})})})}},function(u,h,E){const C=E(1);C.fn.newAwsMapWidget=function(I,T){'use strict';return C.each(this,function(){const L=C(this);L.click(function(){I.redirect(T.editorUrl+'/new')})})}},,function(u,h,E){const C=E(1);C.fn.nodeColorWidget=function(I,T){'use strict';return C.each(this,function(){const L=C(this);L.click(function(){T.pickColor().then(function(N){I.updateStyle('mouse','background',N)})})})}},function(u,h,E){const C=E(1);C.fn.nodeContextWidget=function(I){'use strict';const T=C(this),L=function(N){T.each(function(){N&&N[this.getAttribute('data-mm-node-context')]?this.classList.remove('disabled'):this.classList.add('disabled')})};return I.addEventListener('layoutChangeComplete',function(){const N=I.getSelectedNodeId();L(I.contextForNode(N))}),I.addEventListener('nodeSelectionChanged',function(N,R){R&&L(I.contextForNode(N))}),T}},function(u,h,E){const C=E(1);C.fn.nodeLinkColorWidget=function(I,T){'use strict';return C.each(this,function(){const L=C(this);let N;I.addEventListener('linkSelected',function(R){N=R}),L.click(function(){N&&T.pickColor().then(function(R){const D=N;N=void 0,I.updateLinkStyle('mouse',D.ideaIdFrom,D.ideaIdTo,'color',R||'red')},function(){N=void 0})})})}},function(u,h,E){const C=E(1);C.fn.nodeLinkRemovalWidget=function(I){'use strict';return C.each(this,function(){const T=C(this);let L;I.addEventListener('linkSelected',function(N){L=N}),T.click(function(){L&&(I.removeLink('mouse',L.ideaIdFrom,L.ideaIdTo),L=void 0)})})}},function(u,h,E){const C=E(1);C.fn.nodeLinkStyleWidget=function(I){'use strict';return C.each(this,function(){const T=C(this),L=T.data('mm-node-link-attr'),N=T.data('mm-node-link-value');let R;I.addEventListener('linkSelected',function(P,D,M){const W=M[L]||!1;N===W?(R=void 0,T.addClass('hidden')):(R=P,T.removeClass('hidden'))}),T.click(function(){R&&I.updateLinkStyle('mouse',R.ideaIdFrom,R.ideaIdTo,L,N)})})}},function(u,h,E){const C=E(1);C.fn.pageScrollKeyOverride=function(){'use strict';return C(this).on('keyup keydown',function(L){(L.which===34||L.which===33)&&(L.preventDefault(),L.stopPropagation())})}},,function(u,h,E){const C=E(1);C.fn.popupLinkWidget=function(I){'use strict';return C(this).click(function(){return I.popup(this.href),!1})}},function(u,h,E){const C=E(0),I=E(1);I.fn.progressCalcWidget=function(T){'use strict';return I.each(this,function(){const L=I(this),N=L.find('[data-mm-role~=calc-table]'),R=L.find('[data-mm-role~=row-template]').detach().data('mm-role','data-row'),P=L.find('[data-mm-role~=total]'),D=L.find('[data-mm-role~=empty]'),M=P.find('[data-mm-role~=total-value]'),W=R.find('[data-mm-role~=cell]').detach(),O=function(H){N.find('tbody').empty(),C.isEmpty(H)?(N.hide(),D.show(),P.hide()):(N.show(),D.hide(),H.total?(M.text(H.total().toLocaleString()),P.show()):P.hide(),C.each(H,function(U){const z=R.clone().appendTo(N);C.each(U,function(V,X){const Y=W.clone().addClass('cell'+X).appendTo(z);Y.find('[data-mm-role=value]').text(V.toLocaleString())})}))};T.addEventListener('progressContext',function(H){H.isActive?T.addEventListener('dataUpdated',O):T.removeEventListener('dataUpdated',O)})})}},function(u,h,E){E(4),E(107),E(289),E(106);const C=E(0),I=E(6),T=E(1);T.fn.progressConfigEditorWidget=function(L,N,R,P){'use strict';return T.each(this,function(){const D=T(this).sectionHandlerWidget(),M=D.find('[data-mm-role~="progress-configuration-table"]'),W=D.find('[data-mm-role~="progress-icon-editor"]').iconEditorWidget(P),O=D.find('[data-mm-role~="row-template"]').detach().data('mm-role',''),H=M.find('tbody'),U=function(X){const Y=O.clone().appendTo(H),G=X.style&&X.style.background||'transparent',K=Y.find('[data-mm-role~="status-icon"]'),Q=Y.find('[data-mm-role~="status-color"]'),J=function(Z){const ee=Z&&Z.url;K.data('icon',Z),ee?K.css('background-image','url('+ee+')'):K.css('background-image',''),D.showSection('initial'),D.find('[data-mm-event-arg]').addClass('hidden')};return Y.attr('data-mm-progress-key',X.key).attr('data-mm-role','progress-status'),''===X.key&&Y.attr('data-mm-progress-empty-key',!0),Y.find('[data-mm-editable]').tableCellInPlaceEditorWidget().removeAttr('data-mm-editable'),Y.find('[data-mm-role~="status-description"]').text(X.description),Q.css('background',G).val(G).click(function(){D.find('[data-mm-role~="selected-status-description"]').text(X.description),N.pickColor(!0).then(function(Z){Q.css('background',Z).val(Z)},function(){Q.css('background','').val(!1)})}),J(X.icon),K.click(function(){const Z=K.data('icon');R.editProgressIcon(Z).then(function(ee){J(ee)})}),Y.find('[data-mm-role~="status-priority"]').text(X.priority),Y.find('[data-mm-role~="status-delete"]').click(function(){Y.remove()}),Y},z=function(X){H.empty(),C.each(X,U)},V=function(){const X=L.getContentStatusUpdater(),Y=X&&X.getStatusConfig(),G=Y&&I.Progress.sortConfig(Y);D.find('[data-mm-event-arg]').addClass('hidden'),z(G),D.showSection('initial')};D.find('[data-mm-role~="save"]').click(function(){const X={},Y=M.find('[data-mm-role=progress-status]'),G=C.reject(C.unique(C.map(Y,function(Q){return parseInt(T(Q).attr('data-mm-progress-key'),10)})),function(Q){return isNaN(Q)});let K=1;0<G.length&&(K=1+C.max(G)),Y.each(function(){const Q=T(this),J={description:Q.find('[data-mm-role~=status-description]').text()},Z=Q.find('[data-mm-role=status-color]').val(),ee=Q.find('[data-mm-role=status-icon]').data('icon'),te=Q.attr('data-mm-progress-empty-key');let ae=Q.attr('data-mm-progress-key'),ie=parseInt(Q.find('[data-mm-role=status-priority]').text());J.style=Z&&'transparent'!==Z&&'false'!==Z?{background:Z}:{background:!1},ee&&(J.icon=ee),ae||(ae=te?'':K++),isNaN(ie)&&(ie=0),ie&&(J.priority=ie),X[ae]=J}),L.setStatusConfig(X),D.addClass('hidden')}),D.find('[data-mm-role~="progress-color-picker"]').colorPickerWidget(N),N.addEventListener('showColors',function(){D.showSection('colors')}),N.addEventListener('hideColors',function(){D.showSection('initial')}),D.find('[data-mm-role~="no-color"]').click(N.colorPickedDefault),P.addEventListener('stage',function(){D.showSection('icon-editor')}),P.addEventListener('complete pickerActive cancel',function(){D.showSection('initial')}),D.find('[data-mm-role~="use-icon"]').click(function(){const X=W.find('input.validation-error'),Y=W.find('[data-mm-role~=icon-height]'),G=W.find('[data-mm-role~=icon-position]'),K=W.find('[data-mm-role~=icon-width]');X.length?X.first().focus():(P.setDimensions(K.val(),Y.val()),P.setPosition(G.val()),P.save())}),D.find('[data-mm-role=append]').click(function(){const X=U({});X.find('[data-mm-default-edit]').click()}),D.on('show',V),L.addEventListener('configChanged',function(X){X?V():D.addClass('hidden')}),D.on('hide',function(){z()})})}},function(u,h,E){const C=E(274),I=E(1),T=E(0),L=E(6);I.fn.progressConfigSelectorWidget=function(N){'use strict';return I.each(this,function(){const P=I(this),D=P.find('[data-mm-role~="selector-template"]').detach();P.empty(),T.each(C,function(M,W){const O=D.clone().prependTo(P);O.attr('data-mm-progress-config',W),O.find('[data-mm-role~="config-title"]').text(M.title),O.click(function(){const H=L.Progress.buildConfig.apply(L.Progress.buildConfig,M.args);N.setStatusConfig(H)})})})}},function(u,h,E){const C=E(1);C.fn.progressFilterPropertyToggleWidget=function(I){'use strict';return C.each(this,function(){const T=C(this),L=function(N,R){let P=!1;R&&R[T.val()]&&(P=!0),T.prop('checked',P)};T.on('click',function(){I.toggleFilterProperty(T.val())}),I.addEventListener('progressContext',function(N){N.isActive?I.addEventListener('dataUpdated',L):I.removeEventListener('dataUpdated',L)})})}},function(u,h,E){const C=E(0),I=E(1);I.fn.progressProjectionsWidget=function(T){'use strict';return I.each(this,function(){const L=I(this),N=L.find('[data-mm-role=projection-template]').detach().data('mm-role','');T.addEventListener('projectionsChanged',function(P){L.empty(),C.each(P,function(D){const M=N.clone().appendTo(L);M.text(D).val(D)})}),L.on('change',function(){T.setActiveProjection(L.val())})})}},function(u,h,E){const C=E(6),I=E(0),T=E(1);T.fn.progressStatusMenuWidget=function(L){'use strict';const N=function(R,P,D){P?R.addClass('status-icon-image').css('background-image','url('+P.url+')'):R.removeClass('status-icon-image').css('background-image',''),R.css('backgroundColor',D)};return T.each(this,function(){const R=T(this),P=R.find('[data-mm-role~="status-template"]').detach(),D=function(M){if(R.empty(),!!M){const W=C.Progress.sortConfig(M);I.each(W,function(O){const H=P.clone().appendTo(R);H.attr('data-mm-progress-status',O.key),N(H.find('[data-mm-role~="status-icon"]'),O.icon,O.style&&O.style.background),H.find('[data-mm-role~="status-name"]').text(O.description),H.find('[data-mm-role~="status-selector"]').click(function(){L.updateActivatedStatus(O.key)}),H.find('[data-mm-role~="status-checkbox"]').prop('checked',!0).val(O.key),H.find('[data-mm-role~="status-checkbox"]').click(function(){L.setFilterStatus(O.key,T(this).prop('checked'))}),L.addEventListener('dataUpdated',function(U,z){let V=!1;z&&z.statuses?I.contains(z.statuses,O.key)&&(V=!0):V=!0,H.find('[data-mm-role~="status-checkbox"]').prop('checked',V)})})}};L.addEventListener('configChanged',D),L.addEventListener('progressContext',function(M){M.isActive&&M.currentStatusConfig?D(M.currentStatusConfig):D()})})}},function(u,h,E){const C=E(1);C.fn.progressToolsWidget=function(I){'use strict';return C.each(this,function(){const T=C(this);T.on('show',function(){I.setActive(!0)}),T.on('hide',function(){I.setActive(!1)})})}},,function(u,h,E){const C=E(1),I=E(0);E(4),C.fn.remoteExportWidget=function(T,L){'use strict';return this.each(function(){const N=C(this).sectionHandlerWidget(),R=function(){return N.data('mm-format')||N.find('[data-mm-role~=format-selector]').val()},P=N.find('[data-mm-role~="publish-progress-message"]').text(),D=N.find('[data-mm-role~="start-export"]'),M=function(V){I.each(V,function(X,Y){N.find('[data-mm-role~='+Y+']').each(function(){const G=C(this);'A'===G.prop('tagName')?G.attr('href',X):'INPUT'===G.prop('tagName')||'TEXTAREA'===G.prop('tagName')?G.val(X).attr('data-mm-val',X):'DIV'===G.prop('tagName')&&(I.contains(G.attr('data-mm-role').split(' '),X)?G.removeClass('hidden'):G.addClass('hidden'))})}),N.trigger('publishResult'),N.showSection('done')},W=function(V){N.find('[data-mm-role~="publish-progress-message"]').text(V)},O=function(){const V={};return N.find('[data-mm-export-parameter]').each(function(){let X;X='checkbox'===this.getAttribute('type')?this.checked:C(this).val()||C(this).attr('placeholder'),V[C(this).data('mm-export-parameter')]=X}),V},H=function(V){const X=N.find('[data-mm-error~="'+V+'"]');N.find('[data-mm-error]').addClass('hidden'),0<X.length?X.removeClass('hidden'):N.find('[data-mm-error~="default"]').html(V).removeClass('hidden'),N.showSection('error')},U=function(V){let X=V&&V.reason||V,Y=V&&V.fileId;'empty'===X||Y||(X='network-error',Y='NO-FILE-ID'),N.find('[data-mm-role~="file-id"]').html(Y),H(X)},z=function(){W(P),N.showSection('inprogress'),T.startExport(R(),{'export':O()},{notify:W}).then(M,U)};D.click(z).keydown('space',z),N.on('show',function(){N.hasSection('initial')?(N.showSection('initial'),N.trigger('shown')):(W('Retrieving your account details...'),N.showSection('inprogress'),L.getGoldAccountDetails().then(function(V){V&&(V.active||V.subscription&&'active'===V.subscription.status)?N.showSection('initial-gold'):N.showSection('initial-free')},function(V){'not-registered'===V?N.showSection('initial-free'):H(V)}).then(function(){N.trigger('shown')}))})})}},function(u,h,E){E(115);const C=E(1);C.fn.searchWidget=function(I){'use strict';const T=C(this);return C(this).typeahead(function(P){return I.search(P)},function(P){T.addClass('hidden'),I.centerOnNode(P.id)},function(P,D,M){const W=D.title,O=W.replace(/\n/g,' '),H=O.toLowerCase().indexOf(M.toLowerCase());let U=O;15<H&&(U=U.substring(0,15)+'...'+U.substring(H)),30<U.length&&(U=U.substring(0,30)+'...'),P.text(U)})}},function(u,h,E){const C=E(1);C.fn.selectableReadOnlyInputWidget=function(){'use strict';return this.css('cursor','pointer').on('input change',function(){const I=C(this);I.val(I.attr('data-mm-val'))}).click(function(){this.setSelectionRange?this.setSelectionRange(0,this.value.length):this.select&&this.select()})}},function(u,h,E){const C=E(1);C.fn.setThemeWidget=function(I){'use strict';return C(this).click(function(){I.setTheme(C(this).data('mm-set-theme'))})}},function(u,h,E){const C=E(1);C.fn.showHotkeyWidget=function(I){'use strict';return C(this).each(function(){const T=C(this);I.keydown(T.data('mm-show-hotkey'),function(L){T.hasClass('hidden')&&(L.stopPropagation(),L.preventDefault(),T.removeClass('hidden'))})})}},function(u,h,E){E(15);const C=E(1);C.fn.sidebarWidget=function(I){'use strict';return this.each(function(){const T=C(this).addClass('hidden').visibilityObserver(),L=T.data('mm-sidebar-name'),N=T.data('mm-sidebar-size'),R=function(){T.removeClass('hidden')},P=function(){T.addClass('hidden')};I.register(L,N),I.addEventListener('show',function(D){D===L?R():P()}),I.addEventListener('hide',P)})}},function(u,h,E){const C=E(1);C.fn.splittableWidget=function(I,T){'use strict';const L='sidebar',N='sidebar-size',D=function(M){M.preventDefault(),M.stopImmediatePropagation(),M.stopPropagation()};return T.addEventListener('mapViewResetRequested',function(){I.hide()}),C(this).each(function(){const M=C(this);I.addEventListener('hide',function(){M.removeAttr(L).removeAttr(N),T.centerOnNode(T.getSelectedNodeId()),M.find('[data-mm-role~="primary"]').focus()}),I.addEventListener('show',function(W,O){O?M.attr(N,O):M.removeAttr(N),M.attr(L,W),T.centerOnNode(T.getSelectedNodeId())}),M.keydown('T',function(){const W=C(document.activeElement).parents('sidebar').length;W?M.find('[data-mm-role~="primary"]').focus():M.find('sidebar').children().not('.hidden').first().focus()}),M.find('sidebar').on('keydown',function(W){(W.which===9||W.which===27)&&(M.find('[data-mm-role~="primary"]').focus(),D(W))})})}},function(u,h,E){const C=E(1);C.fn.storyboardKeyHandlerWidget=function(I,T,L,N){'use strict';const R=this,P=function(D){const M=D.charCode||D.keyCode,W=String.fromCharCode(M);W===N&&L.getInputEnabled()&&L.applyToActivated(function(O){I.addScene(O)})};return T.addEventListener('inputEnabled',function(D){D?R.on('keypress',P):R.off('keypress',P)}),R}},function(u,h,E){E(282),E(283),E(290),E(288);const C=E(1),I=E(0);C.fn.storyboardWidget=function(T,L,N,R,P){'use strict';return C.each(this,function(){const D=C(this),M=D.find('[data-mm-role=scene-template]'),W=D.find('[data-mm-role=no-scenes]').detach(),O=M.parent(),H=function(te){if(!te.gesture||!te.gesture.center)return!1;const ae=D.offset(),ie=te.gesture.center.pageX-ae.left,oe=te.gesture.center.pageY-ae.top;return 0<ie&&ie<D.width()&&0<oe&&oe<D.height()},U=function(te,ae){const ie=ae?O.find('[data-mm-role=scene]').not('.drag-shadow'):O.find('[data-mm-role=scene]').not('.activated-scene').not('.drag-shadow'),oe=I.filter(ie,function(ce){const pe=C(ce),ue=te.top-pe.offset().top,he=pe.outerHeight(!0);return 0<ue&&ue<he}),re=C(I.last(oe)),de=ie.last(),se=I.filter(oe,function(ce){const pe=C(ce),ue=te.left-pe.offset().left,he=pe.outerWidth(!0);return-40<ue&&ue<he/3});let le=I.filter(oe,function(ce){const pe=C(ce),ue=te.left-pe.offset().left,he=pe.outerWidth(!0);return ue>2*he/3&&ue<he+40});return 0===le.length&&0===se.length&&(0<re.length&&te.left>re.offset().left+re.width()?le=re:0<de.length&&te.top>de.offset().top&&(le=de)),{left:I.first(le),right:I.first(se)}},z=function(te){const ae=I.reject(O.children(),function(ie){return!C(ie).data('scene')||te<C(ie).data('scene').index});return I.last(ae)},V=function(te,ae){const ie=M.clone().data('scene',te).attr({'data-mm-role':'scene','data-mm-idea-id':te.ideaId,'data-mm-index':te.index}).on('tap',function(){T.setSelectedScene(te)}).on('doubletap',function(){R.editNode(te.ideaId)}).shadowDraggable().on('mm:cancel-dragging',function(){C(this).siblings().removeClass('potential-drop-left potential-drop-right')}).on('mm:stop-dragging',function(){const re=C(this),de=re.parent().find('.potential-drop-right');let se=re.parent().find('.potential-drop-left');se&&se[0]?T.moveSceneAfter(re.data('scene'),se.data('scene')):de&&de[0]&&(se=de.prev(),se&&se[0]?T.moveSceneAfter(re.data('scene'),se.data('scene')):T.moveSceneAfter(re.data('scene'))),C(this).siblings().removeClass('potential-drop-left potential-drop-right')}).on('mm:drag',function(re){let de,se,le,ce;re&&re.gesture&&re.gesture.center&&(de=U({left:re.gesture.center.pageX,top:re.gesture.center.pageY}),se=C(this),de.left?(le=C(de.left).not(se).not(se.prev()),ce=le.next()):de.right&&(ce=C(de.right).not(se).not(se.next()),le=ce.prev()),se.siblings().not(le).removeClass('potential-drop-left'),se.siblings().not(ce).removeClass('potential-drop-right'),ce&&ce.addClass('potential-drop-right'),le&&le.addClass('potential-drop-left'))}),oe=!ae&&z(te.index);W.detach(),ie.hide(),O.find('[data-mm-role=scene].activated-scene').length||(ie.addClass('activated-scene'),T.setSelectedScene(te)),oe?ie.insertAfter(oe):ae?ie.appendTo(O):ie.prependTo(O),ie.updateScene(te,N),ae?ie.show():(ie.finish(),ie.fadeIn({duration:100,complete:function(){T.setSelectedScene(te),ie.scrollSceneIntoFocus()}}))},X=function(){const te=L.getScenes();O.empty(),te&&te.length?I.each(te,function(ae){V(ae,!0)}):W.appendTo(O).show()},Y=function(te){return O.find('[data-mm-role=scene][data-mm-index="'+te.index+'"][data-mm-idea-id="'+te.ideaId+'"]')},G=function(te){const ae=Y(te);document.activeElement===ae[0]&&D.focus(),ae.finish(),ae.fadeOut({duration:100,complete:function(){ae.remove(),O.children().length||W.appendTo(O).show()}})},K=function(te){Y(te).updateScene(te,N)},Q=function(te){const ae=Y(te.from);ae.finish(),ae.fadeOut({duration:100,complete:function(){ae.remove(),V(te.to,!1)}})},J=function(){L.setInputEnabled(!0),X(),L.addEventListener('storyboardSceneAdded',V),L.addEventListener('storyboardSceneMoved',Q),L.addEventListener('storyboardSceneRemoved',G),L.addEventListener('storyboardSceneContentUpdated',K)},Z=function(){L.setInputEnabled(!1),L.removeEventListener('storyboardSceneAdded',V),L.removeEventListener('storyboardSceneMoved',Q),L.removeEventListener('storyboardSceneRemoved',G),L.removeEventListener('storyboardSceneContentUpdated',K)},ee=function(te){0<te.length&&te.data('scene')&&T.setSelectedScene(te.data('scene'))};M.detach(),P.addEventListener('show',function(te){'Storyboard'===te?J():Z()}),P.addEventListener('hide',Z),T.addEventListener('storyboardContext',function(te){let ae;te.selectedScene&&(ae=Y(te.selectedScene),O.find('[data-mm-role=scene]').not(ae).removeClass('activated-scene'),ae.addClass('activated-scene'))}),D.parents('[data-drag-role=container]').on('mm:drag',function(te){let ae,ie,oe,re;return H(te)?void('node'===C(te.target).attr('data-mapjs-role')&&(ae=U({left:te.gesture.center.pageX,top:te.gesture.center.pageY},!0),ie=O.find('[data-mm-role=scene]'),ae.left?(oe=C(ae.left),re=oe.next()):ae.right&&(re=C(ae.right),oe=re.prev()),ie.not(oe).removeClass('potential-drop-left'),ie.not(re).removeClass('potential-drop-right'),re&&re.addClass('potential-drop-right'),oe&&oe.addClass('potential-drop-left'))):void O.find('[data-mm-role=scene]').removeClass('potential-drop-left potential-drop-right')}).on('mm:stop-dragging',function(te){const ae=C(te.target);let ie;'node'===ae.attr('data-mapjs-role')&&H(te)&&(ie=O.find('.potential-drop-right'),T.addScene(ae.data('nodeId'),ie&&ie.data('scene'))),O.children().removeClass('potential-drop-left potential-drop-right')}).on('mm:cancel-dragging',function(){O.children().removeClass('potential-drop-left potential-drop-right')}),D.keydown('del backspace',function(te){T.removeScene(),te.preventDefault(),te.stopPropagation()}).keydown('alt+right',function(te){T.moveSelectedSceneRight(),te.preventDefault(),te.stopPropagation()}).keydown('alt+left',function(te){T.moveSelectedSceneLeft(),te.stopPropagation(),te.preventDefault()}).keydown('right',function(te){ee(C('.activated-scene').next()),te.stopPropagation(),te.preventDefault()}).keydown('left',function(te){ee(C('.activated-scene').prev()),te.stopPropagation(),te.preventDefault()}).keydown('up',function(te){ee(C('.activated-scene').gridUp()),te.stopPropagation(),te.preventDefault()}).keydown('down',function(te){ee(C('.activated-scene').gridDown()),te.stopPropagation(),te.preventDefault()})})}},,function(u,h,E){const C=E(1);C.fn.suggestedEmailWidget=function(I){'use strict';return this.each(function(){const T=C(this);I.addEventListener('suggestedEmail',function(L){T.val(L)})})}},function(u,h,E){const C=E(1);C.fn.tabbedSectionWidget=function(){'use strict';return this.each(function(){const I=C(this),T=I.find('[data-mm-tab-default]').data('mm-tab'),L=function(R){I.find('tabbedsectiontitle').removeClass('active'),I.find('tabbedsectiontitle[data-mm-tab='+R+']').addClass('active'),I.find('tabbedSectioncontent').addClass('hidden'),I.find('tabbedSectioncontent[data-mm-tab='+R+']').removeClass('hidden')},N=function(){L(T)};N(),I.find('tabbedsectiontitle').on('click focus',function(){const R=C(this),P=R.data('mm-tab');L(P)}),I.on('reset',N)})}},function(u,h,E){const C=E(1);C.fn.trackingWidget=function(I){'use strict';return this.each(function(){const T=C(this),L=T.data('category'),N=T.data('event-type')||'',R=T.data('label')||'';T.click(function(){I.log(L,N,R)})})}},function(u,h,E){const C=E(1);E(286),C.fn.writerWidget=function(I,T){'use strict';return C(this).each(function(){const L=C(this),N=L.find('[data-mm-role=note-template]').detach(),R=function(G){return L.find('[data-mm-role=note][data-mm-node-id="'+G+'"]')},P=function(G){G&&I.setActiveNodeId(G)},D=function(){return L.find('[data-mm-role=note].active')},M=function(G,K){const Q=document.createEvent('Event');Q.initEvent(K,!0,!0),G.dispatchEvent(Q)},W=function(G,K){const Q=parseFloat(K),J=L.find('[data-mm-role=note]').not(G).filter(function(){return parseFloat(C(this).data('index'))<Q}),Z=G.find('[data-mm-role=viewer]')[0],ee=document.activeElement===Z;ee&&(G.data('moving',!0),M(Z,'blur')),J.length?G.insertAfter(J.last()):G.prependTo(L),G.data('index',K).data('moving',!1),ee&&G.find('[data-mm-role=viewer]').focus()},O=function(G,K){const Q=N.clone().attr('data-mm-role','note').attr('data-mm-node-id',G.nodeId);return W(Q,G.index),Q.noteWidget(I,G,K),L.find('[data-mm-role~="no-notes"]').addClass('hidden'),Q},H=function(G){const K=G&&R(G),Q=L.find('[data-mm-role=note].active');T.showWriter(),Q.removeClass('active'),G&&K&&K.length&&(K.addClass('active'),K.mmScrollIntoView())};I.addEventListener('activeNodeChanged',H),I.addEventListener('noteEditRequested',function(G){let K;G&&G.nodeId&&(K=R(G.nodeId),T.showWriter(),0===K.length&&(K=O(G,!0)),H(G.nodeId))}),I.addEventListener('noteAdded',function(G){let K=R(G.nodeId);return K.length?void(K.data('index')!==G.index&&W(K,G.index)):void(K=O(G,!1))}),I.addEventListener('noteRemoved',function(G){const K=R(G),Q=K&&K[0].contains(document.activeElement);K&&(K.remove(),0===L.find('[data-mm-role~=note]').length?L.find('[data-mm-role~="no-notes"]').removeClass('hidden'):L.find('[data-mm-role~="no-notes"]').addClass('hidden'),Q&&L.focus())}),I.addEventListener('noteMoved',function(G){let K=R(G.nodeId);K.length?W(K,G.index):K=O(G,!1)}),I.addEventListener('foldInactiveNotesRequested',function(){L.find('[data-mm-role~=note]:not(.active)').addClass('folded'),L.find('[data-mm-role~=note].active').removeClass('folded').mmScrollIntoView()}),L.on('show',function(){I.setInputEnabled(!0)}),L.on('hide',function(){I.setInputEnabled(!1)}),L.on('keydown',function(G){const te=function(){G.preventDefault(),G.stopImmediatePropagation(),G.stopPropagation()};G.which===38&&G.target===this&&(te(),P(D().prev().attr('data-mm-node-id'))),G.which===40&&G.target===this&&(te(),P(D().next().attr('data-mm-node-id'))),(G.which===32||G.which===13)&&G.target===this&&(te(),I.editNoteForNodeId(D().attr('data-mm-node-id'))),G.which===27&&L.focus()})})}},function(u){(function(){'use strict';function C(P){return P.replace(T,'&nbsp;').replace(L,'&lt;').replace(N,'&gt;')}function I(P,D){function M(U){U=U||P.value||P.getAttribute('placeholder')||'',R.style.cssText+=O,R.innerHTML=C(U);var z=window.getComputedStyle(R).width;return P.style.width=z,z}P.style.boxSizing='content-box';var W=window.getComputedStyle(P),O='font-family:'+W.fontFamily+';font-size:'+W.fontSize;P.addEventListener('input',function(){M()});var H=M();return D&&D.minWidth&&'0px'!==H&&(P.style.minWidth=H),M}var T=/\s/g,L=/>/g,N=/</g,R=document.createElement('div');R.style.cssText='box-sizing:content-box;display:inline-block;height:0;overflow:hidden;position:absolute;top:0;visibility:hidden;white-space:nowrap;',document.body.appendChild(R),u.exports=I})()},function(u,h,E){var C,I;(function(T,L){'use strict';function N(){P.READY||(Z.determineEventTypes(),J.each(P.gestures,function(ae){te.register(ae)}),Z.onTouch(P.DOCUMENT,Y,te.detect),Z.onTouch(P.DOCUMENT,G,te.detect),P.READY=!0)}function R(ae,ie){Date.now||(Date.now=function(){return new Date().getTime()}),ae.utils.each(['on','off'],function(oe){ae.utils[oe]=function(re,de,se){ie(re)[oe](de,function(le){var ce=ie.extend({},le.originalEvent,le);ce.button===L&&(ce.button=le.which-1),se.call(this,ce)})}}),ae.Instance.prototype.trigger=function(oe,re){var de=ie(this.element);return de.has(re.target).length&&(de=ie(re.target)),de.trigger({type:oe,gesture:re})},ie.fn.hammer=function(oe){return this.each(function(){var re=ie(this),de=re.data('hammer');de?de&&oe&&ae.utils.extend(de.options,oe):re.data('hammer',new ae(this,oe||{}))})}}var P=function ae(ie,oe){return new ae.Instance(ie,oe||{})};P.VERSION='1.1.3',P.defaults={behavior:{userSelect:'none',touchAction:'pan-y',touchCallout:'none',contentZooming:'none',userDrag:'none',tapHighlightColor:'rgba(0,0,0,0)'}},P.DOCUMENT=document,P.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,P.HAS_TOUCHEVENTS='ontouchstart'in T,P.IS_MOBILE=/mobile|tablet|ip(ad|hone|od)|android|silk/i.test(navigator.userAgent),P.NO_MOUSEEVENTS=P.HAS_TOUCHEVENTS&&P.IS_MOBILE||P.HAS_POINTEREVENTS,P.CALCULATE_INTERVAL=25;var D={},M=P.DIRECTION_DOWN='down',W=P.DIRECTION_LEFT='left',O=P.DIRECTION_UP='up',H=P.DIRECTION_RIGHT='right',U=P.POINTER_MOUSE='mouse',z=P.POINTER_TOUCH='touch',V=P.POINTER_PEN='pen',X=P.EVENT_START='start',Y=P.EVENT_MOVE='move',G=P.EVENT_END='end',K=P.EVENT_RELEASE='release',Q=P.EVENT_TOUCH='touch';P.READY=!1,P.plugins=P.plugins||{},P.gestures=P.gestures||{};var J=P.utils={extend:function(ie,oe,re){for(var de in oe)oe.hasOwnProperty(de)&&(ie[de]===L||!re)&&(ie[de]=oe[de]);return ie},on:function(ie,oe,re){ie.addEventListener(oe,re,!1)},off:function(ie,oe,re){ie.removeEventListener(oe,re,!1)},each:function(ie,oe,re){var de,se;if('forEach'in ie)ie.forEach(oe,re);else if(ie.length!==L){for(de=0,se=ie.length;de<se;de++)if(!1===oe.call(re,ie[de],de,ie))return;}else for(de in ie)if(ie.hasOwnProperty(de)&&!1===oe.call(re,ie[de],de,ie))return},inStr:function(ie,oe){return-1<ie.indexOf(oe)},inArray:function(ie,oe){if(ie.indexOf){var re=ie.indexOf(oe);return-1!==re&&re}for(var de=0,se=ie.length;de<se;de++)if(ie[de]===oe)return de;return!1},toArray:function(ie){return Array.prototype.slice.call(ie,0)},hasParent:function(ie,oe){for(;ie;){if(ie==oe)return!0;ie=ie.parentNode}return!1},getCenter:function(ie){var oe=[],re=[],de=[],se=[],le=Math.min,ce=Math.max;return 1===ie.length?{pageX:ie[0].pageX,pageY:ie[0].pageY,clientX:ie[0].clientX,clientY:ie[0].clientY}:(J.each(ie,function(pe){oe.push(pe.pageX),re.push(pe.pageY),de.push(pe.clientX),se.push(pe.clientY)}),{pageX:(le.apply(Math,oe)+ce.apply(Math,oe))/2,pageY:(le.apply(Math,re)+ce.apply(Math,re))/2,clientX:(le.apply(Math,de)+ce.apply(Math,de))/2,clientY:(le.apply(Math,se)+ce.apply(Math,se))/2})},getVelocity:function(ie,oe,re){return{x:Math.abs(oe/ie)||0,y:Math.abs(re/ie)||0}},getAngle:function(ie,oe){var re=oe.clientX-ie.clientX,de=oe.clientY-ie.clientY;return 180*Math.atan2(de,re)/Math.PI},getDirection:function(ie,oe){var re=Math.abs(ie.clientX-oe.clientX),de=Math.abs(ie.clientY-oe.clientY);return re>=de?0<ie.clientX-oe.clientX?W:H:0<ie.clientY-oe.clientY?O:M},getDistance:function(ie,oe){var re=oe.clientX-ie.clientX,de=oe.clientY-ie.clientY;return Math.sqrt(re*re+de*de)},getScale:function(ie,oe){return 2<=ie.length&&2<=oe.length?this.getDistance(oe[0],oe[1])/this.getDistance(ie[0],ie[1]):1},getRotation:function(ie,oe){return 2<=ie.length&&2<=oe.length?this.getAngle(oe[1],oe[0])-this.getAngle(ie[1],ie[0]):0},isVertical:function(ie){return ie==O||ie==M},setPrefixedCss:function(ie,oe,re,de){var se=['','Webkit','Moz','O','ms'];oe=J.toCamelCase(oe);for(var le=0,ce;le<se.length;le++)if(ce=oe,se[le]&&(ce=se[le]+ce.slice(0,1).toUpperCase()+ce.slice(1)),ce in ie.style){ie.style[ce]=(null==de||de)&&re||'';break}},toggleBehavior:function(ie,oe,re){if(oe&&ie&&ie.style){J.each(oe,function(se,le){J.setPrefixedCss(ie,le,se,re)});var de=re&&function(){return!1};'none'==oe.userSelect&&(ie.onselectstart=de),'none'==oe.userDrag&&(ie.ondragstart=de)}},toCamelCase:function(ie){return ie.replace(/[_-]([a-z])/g,function(oe){return oe[1].toUpperCase()})}};P.Instance=function(ae,ie){var oe=this;N(),this.element=ae,this.enabled=!0,J.each(ie,function(re,de){delete ie[de],ie[J.toCamelCase(de)]=re}),this.options=J.extend(J.extend({},P.defaults),ie||{}),this.options.behavior&&J.toggleBehavior(this.element,this.options.behavior,!0),this.eventStartHandler=Z.onTouch(ae,X,function(re){oe.enabled&&re.eventType==X?te.startDetect(oe,re):re.eventType==Q&&te.detect(re)}),this.eventHandlers=[]},P.Instance.prototype={on:function(ie,oe){var re=this;return Z.on(re.element,ie,oe,function(de){re.eventHandlers.push({gesture:de,handler:oe})}),re},off:function(ie,oe){var re=this;return Z.off(re.element,ie,oe,function(de){var se=J.inArray({gesture:de,handler:oe});!1!==se&&re.eventHandlers.splice(se,1)}),re},trigger:function(ie,oe){oe||(oe={});var re=P.DOCUMENT.createEvent('Event');re.initEvent(ie,!0,!0),re.gesture=oe;var de=this.element;return J.hasParent(oe.target,de)&&(de=oe.target),de.dispatchEvent(re),this},enable:function(ie){return this.enabled=ie,this},dispose:function(){var ie,oe;for(J.toggleBehavior(this.element,this.options.behavior,!1),ie=-1;oe=this.eventHandlers[++ie];)J.off(this.element,oe.gesture,oe.handler);return this.eventHandlers=[],Z.off(this.element,D[X],this.eventStartHandler),null}};var Z=P.event={preventMouseEvents:!1,started:!1,shouldDetect:!1,on:function(ie,oe,re,de){var se=oe.split(' ');J.each(se,function(le){J.on(ie,le,re),de&&de(le)})},off:function(ie,oe,re,de){var se=oe.split(' ');J.each(se,function(le){J.off(ie,le,re),de&&de(le)})},onTouch:function(ie,oe,re){var de=this,se=function(ce){var pe=ce.type.toLowerCase(),ue=P.HAS_POINTEREVENTS,he=J.inStr(pe,'mouse'),ge;he&&de.preventMouseEvents||(he&&oe==X&&0===ce.button?(de.preventMouseEvents=!1,de.shouldDetect=!0):ue&&oe==X?de.shouldDetect=1===ce.buttons||ee.matchType(z,ce):he||oe!=X||(de.preventMouseEvents=!0,de.shouldDetect=!0),ue&&oe!=G&&ee.updatePointer(oe,ce),de.shouldDetect&&(ge=de.doDetect.call(de,ce,oe,ie,re)),ge==G&&(de.preventMouseEvents=!1,de.shouldDetect=!1,ee.reset()),ue&&oe==G&&ee.updatePointer(oe,ce))};return this.on(ie,D[oe],se),se},doDetect:function(ie,oe,re,de){var se=this.getTouchList(ie,oe),le=se.length,ce=oe,pe=se.trigger,ue=le;oe==X?pe=Q:oe==G&&(pe=K,ue=se.length-(ie.changedTouches?ie.changedTouches.length:1)),0<ue&&this.started&&(ce=Y),this.started=!0;var he=this.collectEventData(re,ce,se,ie);return oe!=G&&de.call(te,he),pe&&(he.changedLength=ue,he.eventType=pe,de.call(te,he),he.eventType=ce,delete he.changedLength),ce==G&&(de.call(te,he),this.started=!1),ce},determineEventTypes:function(){var ie;return ie=P.HAS_POINTEREVENTS?T.PointerEvent?['pointerdown','pointermove','pointerup pointercancel lostpointercapture']:['MSPointerDown','MSPointerMove','MSPointerUp MSPointerCancel MSLostPointerCapture']:P.NO_MOUSEEVENTS?['touchstart','touchmove','touchend touchcancel']:['touchstart mousedown','touchmove mousemove','touchend touchcancel mouseup'],D[X]=ie[0],D[Y]=ie[1],D[G]=ie[2],D},getTouchList:function(ie,oe){if(P.HAS_POINTEREVENTS)return ee.getTouchList();if(ie.touches){if(oe==Y)return ie.touches;var re=[],de=[].concat(J.toArray(ie.touches),J.toArray(ie.changedTouches)),se=[];return J.each(de,function(le){!1===J.inArray(re,le.identifier)&&se.push(le),re.push(le.identifier)}),se}return ie.identifier=1,[ie]},collectEventData:function(ie,oe,re,de){var se=z;return J.inStr(de.type,'mouse')||ee.matchType(U,de)?se=U:ee.matchType(V,de)&&(se=V),{center:J.getCenter(re),timeStamp:Date.now(),target:de.target,touches:re,eventType:oe,pointerType:se,srcEvent:de,preventDefault:function(){var le=this.srcEvent;le.preventManipulation&&le.preventManipulation(),le.preventDefault&&le.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return te.stopDetect()}}}},ee=P.PointerEvent={pointers:{},getTouchList:function(){var ie=[];return J.each(this.pointers,function(oe){ie.push(oe)}),ie},updatePointer:function(ie,oe){ie==G||ie!=G&&1!==oe.buttons?delete this.pointers[oe.pointerId]:(oe.identifier=oe.pointerId,this.pointers[oe.pointerId]=oe)},matchType:function(ie,oe){if(!oe.pointerType)return!1;var re=oe.pointerType,de={};return de[U]=re===(oe.MSPOINTER_TYPE_MOUSE||U),de[z]=re===(oe.MSPOINTER_TYPE_TOUCH||z),de[V]=re===(oe.MSPOINTER_TYPE_PEN||V),de[ie]},reset:function(){this.pointers={}}},te=P.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(ie,oe){this.current||(this.stopped=!1,this.current={inst:ie,startEvent:J.extend({},oe),lastEvent:!1,lastCalcEvent:!1,futureCalcEvent:!1,lastCalcData:{},name:''},this.detect(oe))},detect:function(ie){if(this.current&&!this.stopped){ie=this.extendEventData(ie);var oe=this.current.inst,re=oe.options;return J.each(this.gestures,function(se){!this.stopped&&oe.enabled&&re[se.name]&&se.handler.call(se,ie,oe)},this),this.current&&(this.current.lastEvent=ie),ie.eventType==G&&this.stopDetect(),ie}},stopDetect:function(){this.previous=J.extend({},this.current),this.current=null,this.stopped=!0},getCalculatedData:function(ie,oe,re,de,se){var le=this.current,ce=!1,pe=le.lastCalcEvent,ue=le.lastCalcData;pe&&ie.timeStamp-pe.timeStamp>P.CALCULATE_INTERVAL&&(oe=pe.center,re=ie.timeStamp-pe.timeStamp,de=ie.center.clientX-pe.center.clientX,se=ie.center.clientY-pe.center.clientY,ce=!0),(ie.eventType==Q||ie.eventType==K)&&(le.futureCalcEvent=ie),(!le.lastCalcEvent||ce)&&(ue.velocity=J.getVelocity(re,de,se),ue.angle=J.getAngle(oe,ie.center),ue.direction=J.getDirection(oe,ie.center),le.lastCalcEvent=le.futureCalcEvent||ie,le.futureCalcEvent=ie),ie.velocityX=ue.velocity.x,ie.velocityY=ue.velocity.y,ie.interimAngle=ue.angle,ie.interimDirection=ue.direction},extendEventData:function(ie){var oe=this.current,re=oe.startEvent,de=oe.lastEvent||re;(ie.eventType==Q||ie.eventType==K)&&(re.touches=[],J.each(ie.touches,function(pe){re.touches.push({clientX:pe.clientX,clientY:pe.clientY})}));var se=ie.timeStamp-re.timeStamp,le=ie.center.clientX-re.center.clientX,ce=ie.center.clientY-re.center.clientY;return this.getCalculatedData(ie,de.center,se,le,ce),J.extend(ie,{startEvent:re,deltaTime:se,deltaX:le,deltaY:ce,distance:J.getDistance(re.center,ie.center),angle:J.getAngle(re.center,ie.center),direction:J.getDirection(re.center,ie.center),scale:J.getScale(re.touches,ie.touches),rotation:J.getRotation(re.touches,ie.touches)}),ie},register:function(ie){var oe=ie.defaults||{};return oe[ie.name]===L&&(oe[ie.name]=!0),J.extend(P.defaults,oe,!0),ie.index=ie.index||1e3,this.gestures.push(ie),this.gestures.sort(function(re,de){return re.index<de.index?-1:re.index>de.index?1:0}),this.gestures}};(function(ae){var oe=!1;P.gestures.Drag={name:ae,index:50,handler:function(re,de){var se=te.current;if(!(0<de.options.dragMaxTouches&&re.touches.length>de.options.dragMaxTouches))switch(re.eventType){case X:oe=!1;break;case Y:if(re.distance<de.options.dragMinDistance&&se.name!=ae)return;var le=se.startEvent.center;if(se.name!=ae&&(se.name=ae,de.options.dragDistanceCorrection&&0<re.distance)){var ce=Math.abs(de.options.dragMinDistance/re.distance);le.pageX+=re.deltaX*ce,le.pageY+=re.deltaY*ce,le.clientX+=re.deltaX*ce,le.clientY+=re.deltaY*ce,re=te.extendEventData(re)}(se.lastEvent.dragLockToAxis||de.options.dragLockToAxis&&de.options.dragLockMinDistance<=re.distance)&&(re.dragLockToAxis=!0);var pe=se.lastEvent.direction;re.dragLockToAxis&&pe!==re.direction&&(J.isVertical(pe)?re.direction=0>re.deltaY?O:M:re.direction=0>re.deltaX?W:H),oe||(de.trigger(ae+'start',re),oe=!0),de.trigger(ae,re),de.trigger(ae+re.direction,re);var ue=J.isVertical(re.direction);(de.options.dragBlockVertical&&ue||de.options.dragBlockHorizontal&&!ue)&&re.preventDefault();break;case K:oe&&re.changedLength<=de.options.dragMaxTouches&&(de.trigger(ae+'end',re),oe=!1);break;case G:oe=!1;}},defaults:{dragMinDistance:10,dragDistanceCorrection:!0,dragMaxTouches:1,dragBlockHorizontal:!1,dragBlockVertical:!1,dragLockToAxis:!1,dragLockMinDistance:25}}})('drag'),P.gestures.Gesture={name:'gesture',index:1337,handler:function(ie,oe){oe.trigger(this.name,ie)}},function(ae){var oe;P.gestures.Hold={name:ae,index:10,defaults:{holdTimeout:500,holdThreshold:2},handler:function(re,de){var se=de.options,le=te.current;switch(re.eventType){case X:clearTimeout(oe),le.name=ae,oe=setTimeout(function(){le&&le.name==ae&&de.trigger(ae,re)},se.holdTimeout);break;case Y:re.distance>se.holdThreshold&&clearTimeout(oe);break;case K:clearTimeout(oe);}}}}('hold'),P.gestures.Release={name:'release',index:Infinity,handler:function(ie,oe){ie.eventType==K&&oe.trigger(this.name,ie)}},P.gestures.Swipe={name:'swipe',index:40,defaults:{swipeMinTouches:1,swipeMaxTouches:1,swipeVelocityX:0.6,swipeVelocityY:0.6},handler:function(ie,oe){if(ie.eventType==K){var re=ie.touches.length,de=oe.options;if(re<de.swipeMinTouches||re>de.swipeMaxTouches)return;(ie.velocityX>de.swipeVelocityX||ie.velocityY>de.swipeVelocityY)&&(oe.trigger(this.name,ie),oe.trigger(this.name+ie.direction,ie))}}},function(ae){var oe=!1;P.gestures.Tap={name:ae,index:100,handler:function(re,de){var se=de.options,le=te.current,ce=te.previous,pe,ue;switch(re.eventType){case X:oe=!1;break;case Y:oe=oe||re.distance>se.tapMaxDistance;break;case G:J.inStr(re.srcEvent.type,'cancel')||!(re.deltaTime<se.tapMaxTime)||oe||(pe=ce&&ce.lastEvent&&re.timeStamp-ce.lastEvent.timeStamp,ue=!1,ce&&ce.name==ae&&pe&&pe<se.doubleTapInterval&&re.distance<se.doubleTapDistance&&(de.trigger('doubletap',re),ue=!0),(!ue||se.tapAlways)&&(le.name=ae,de.trigger(le.name,re)));}},defaults:{tapMaxTime:250,tapMaxDistance:10,tapAlways:!0,doubleTapDistance:20,doubleTapInterval:300}}}('tap'),P.gestures.Touch={name:'touch',index:-Infinity,defaults:{preventDefault:!1,preventMouse:!1},handler:function(ie,oe){return oe.options.preventMouse&&ie.pointerType==U?void ie.stopDetect():void(oe.options.preventDefault&&ie.preventDefault(),ie.eventType==Q&&oe.trigger('touch',ie))}},function(ae){var oe=!1;P.gestures.Transform={name:ae,index:45,defaults:{transformMinScale:0.01,transformMinRotation:1},handler:function(re,de){switch(re.eventType){case X:oe=!1;break;case Y:if(2>re.touches.length)return;var se=Math.abs(1-re.scale),le=Math.abs(re.rotation);if(se<de.options.transformMinScale&&le<de.options.transformMinRotation)return;te.current.name=ae,oe||(de.trigger(ae+'start',re),oe=!0),de.trigger(ae,re),le>de.options.transformMinRotation&&de.trigger('rotate',re),se>de.options.transformMinScale&&(de.trigger('pinch',re),de.trigger('pinch'+(1>re.scale?'in':'out'),re));break;case K:oe&&2>re.changedLength&&(de.trigger(ae+'end',re),oe=!1);}}}}('transform'),T.Hammer=P,'undefined'!=typeof u&&u.exports&&(u.exports=P),(C=[E(1)],I=function(ae){return R(T.Hammer,ae)}.apply(h,C),!(I!==L&&(u.exports=I)))})(window),u.exports=Hammer},function(u,h,E){var C=E(1);(function(I){function T(L){if('string'==typeof L.data&&(L.data={keys:L.data}),L.data&&L.data.keys&&'string'==typeof L.data.keys){var N=L.handler,R=L.data.keys.toLowerCase().split(' ');L.handler=function(P){if(!(this!==P.target&&(I.hotkeys.options.filterInputAcceptingElements&&I.hotkeys.textInputTypes.test(P.target.nodeName)||I.hotkeys.options.filterContentEditable&&I(P.target).attr('contenteditable')||I.hotkeys.options.filterTextInputs&&-1<I.inArray(P.target.type,I.hotkeys.textAcceptingInputTypes)))){var D='keypress'!==P.type&&I.hotkeys.specialKeys[P.which],M=String.fromCharCode(P.which).toLowerCase(),W='',O={};I.each(['alt','ctrl','shift'],function(z,V){P[V+'Key']&&D!==V&&(W+=V+'+')}),P.metaKey&&!P.ctrlKey&&'meta'!==D&&(W+='meta+'),P.metaKey&&'meta'!==D&&-1<W.indexOf('alt+ctrl+shift+')&&(W=W.replace('alt+ctrl+shift+','hyper+')),D?O[W+D]=!0:(O[W+M]=!0,O[W+I.hotkeys.shiftNums[M]]=!0,'shift+'==W&&(O[I.hotkeys.shiftNums[M]]=!0));for(var H=0,U=R.length;H<U;H++)if(O[R[H]])return N.apply(this,arguments)}}}}I.hotkeys={version:'0.2.0',specialKeys:{8:'backspace',9:'tab',10:'return',13:'return',16:'shift',17:'ctrl',18:'alt',19:'pause',20:'capslock',27:'esc',32:'space',33:'pageup',34:'pagedown',35:'end',36:'home',37:'left',38:'up',39:'right',40:'down',45:'insert',46:'del',59:';',61:'=',96:'0',97:'1',98:'2',99:'3',100:'4',101:'5',102:'6',103:'7',104:'8',105:'9',106:'*',107:'+',109:'-',110:'.',111:'/',112:'f1',113:'f2',114:'f3',115:'f4',116:'f5',117:'f6',118:'f7',119:'f8',120:'f9',121:'f10',122:'f11',123:'f12',144:'numlock',145:'scroll',173:'-',186:';',187:'=',188:',',189:'-',190:'.',191:'/',192:'`',219:'[',220:'\\',221:']',222:'\''},shiftNums:{0:')',1:'!',2:'@',3:'#',4:'$',5:'%',6:'^',7:'&',8:'*',9:'(','`':'~','-':'_','=':'+',';':': ','\'':'"',',':'<','.':'>','/':'?','\\':'|'},textAcceptingInputTypes:['text','password','number','email','url','range','date','month','week','time','datetime','datetime-local','search','color','tel'],textInputTypes:/textarea|input|select/i,options:{filterInputAcceptingElements:!0,filterTextInputs:!0,filterContentEditable:!0}},I.each(['keydown','keyup','keypress'],function(){I.event.special[this]={add:T}})})(C||this.jQuery||window.jQuery)},function(u,h,E){'use strict';u.exports=function(T){var L=T.length;if(3>L){for(var N=Array(L),R=0;R<L;++R)N[R]=R;return 2===L&&T[0][0]===T[1][0]&&T[0][1]===T[1][1]?[0]:N}for(var P=Array(L),R=0;R<L;++R)P[R]=R;P.sort(function(X,Y){var G=T[X][0]-T[Y][0];return G?G:T[X][1]-T[Y][1]});for(var D=[P[0],P[1]],M=[P[0],P[1]],R=2;R<L;++R){for(var W=P[R],O=T[W],H=D.length;1<H&&0>=I(T[D[H-2]],T[D[H-1]],O);)H-=1,D.pop();for(D.push(W),H=M.length;1<H&&0<=I(T[M[H-2]],T[M[H-1]],O);)H-=1,M.pop();M.push(W)}for(var N=Array(M.length+D.length-2),U=0,R=0,z=D.length;R<z;++R)N[U++]=D[R];for(var V=M.length-2;0<V;--V)N[U++]=M[V];return N};var I=E(222)[3]},function(u){'use strict';u.exports=function(I,T,L){var N=I+T,R=N-I,D=T-R,M=I-(N-R);return L?(L[0]=M+D,L[1]=N,L):[M+D,N]}},function(u,h,E){'use strict';var I=E(109),T=E(218);u.exports=function(L,N){var R=L.length;if(1===R){var P=I(L[0],N);return P[0]?P:[P[1]]}var D=Array(2*R),M=[0.1,0.1],W=[0.1,0.1],O=0;I(L[0],N,M),M[0]&&(D[O++]=M[0]);for(var H=1;H<R;++H){I(L[H],N,W);var U=M[1];T(U,W[0],M),M[0]&&(D[O++]=M[0]);var z=W[1],V=M[1],X=z+V,G=V-(X-z);M[1]=X,G&&(D[O++]=G)}return M[1]&&(D[O++]=M[1]),0==O&&(D[O++]=0),D.length=O,D}},function(u){'use strict';function C(T,L){var N=T+L,R=N-T,W=T-(N-R)+(L-R);return W?[W,N]:[N]}u.exports=function(T,L){var N=0|T.length,R=0|L.length;if(1==N&&1==R)return C(T[0],-L[0]);var D=Array(N+R),M=0,W=0,O=0,H=Math.abs,U=T[W],z=H(U),V=-L[O],X=H(V),Y,G;z<X?(G=U,W+=1,W<N&&(U=T[W],z=H(U))):(G=V,O+=1,O<R&&(V=-L[O],X=H(V))),W<N&&z<X||O>=R?(Y=U,W+=1,W<N&&(U=T[W],z=H(U))):(Y=V,O+=1,O<R&&(V=-L[O],X=H(V)));for(var K=Y+G,Q=K-Y,J=G-Q,Z=J,ee=K,te,ae,ie,oe,re;W<N&&O<R;)z<X?(Y=U,W+=1,W<N&&(U=T[W],z=H(U))):(Y=V,O+=1,O<R&&(V=-L[O],X=H(V))),G=Z,K=Y+G,Q=K-Y,J=G-Q,J&&(D[M++]=J),te=ee+K,ae=te-ee,ie=te-ae,oe=K-ae,re=ee-ie,Z=re+oe,ee=te;for(;W<N;)Y=U,G=Z,K=Y+G,Q=K-Y,J=G-Q,J&&(D[M++]=J),te=ee+K,ae=te-ee,ie=te-ae,oe=K-ae,re=ee-ie,Z=re+oe,ee=te,W+=1,W<N&&(U=T[W]);for(;O<R;)Y=V,G=Z,K=Y+G,Q=K-Y,J=G-Q,J&&(D[M++]=J),te=ee+K,ae=te-ee,ie=te-ae,oe=K-ae,re=ee-ie,Z=re+oe,ee=te,O+=1,O<R&&(V=-L[O]);return Z&&(D[M++]=Z),ee&&(D[M++]=ee),M||(D[M++]=0),D.length=M,D}},function(u){'use strict';function C(T,L){var N=T+L,R=N-T,W=T-(N-R)+(L-R);return W?[W,N]:[N]}u.exports=function(T,L){var N=0|T.length,R=0|L.length;if(1==N&&1==R)return C(T[0],L[0]);var D=Array(N+R),M=0,W=0,O=0,H=Math.abs,U=T[W],z=H(U),V=L[O],X=H(V),Y,G;z<X?(G=U,W+=1,W<N&&(U=T[W],z=H(U))):(G=V,O+=1,O<R&&(V=L[O],X=H(V))),W<N&&z<X||O>=R?(Y=U,W+=1,W<N&&(U=T[W],z=H(U))):(Y=V,O+=1,O<R&&(V=L[O],X=H(V)));for(var K=Y+G,Q=K-Y,J=G-Q,Z=J,ee=K,te,ae,ie,oe,re;W<N&&O<R;)z<X?(Y=U,W+=1,W<N&&(U=T[W],z=H(U))):(Y=V,O+=1,O<R&&(V=L[O],X=H(V))),G=Z,K=Y+G,Q=K-Y,J=G-Q,J&&(D[M++]=J),te=ee+K,ae=te-ee,ie=te-ae,oe=K-ae,re=ee-ie,Z=re+oe,ee=te;for(;W<N;)Y=U,G=Z,K=Y+G,Q=K-Y,J=G-Q,J&&(D[M++]=J),te=ee+K,ae=te-ee,ie=te-ae,oe=K-ae,re=ee-ie,Z=re+oe,ee=te,W+=1,W<N&&(U=T[W]);for(;O<R;)Y=V,G=Z,K=Y+G,Q=K-Y,J=G-Q,J&&(D[M++]=J),te=ee+K,ae=te-ee,ie=te-ae,oe=K-ae,re=ee-ie,Z=re+oe,ee=te,O+=1,O<R&&(V=L[O]);return Z&&(D[M++]=Z),ee&&(D[M++]=ee),M||(D[M++]=0),D.length=M,D}},function(u,h,E){'use strict';function C(Q,J){for(var Z=Array(Q.length-1),ee=1,te;ee<Q.length;++ee){te=Z[ee-1]=Array(Q.length-1);for(var ae=0,ie=0;ae<Q.length;++ae)ae!==J&&(te[ie++]=Q[ee][ae])}return Z}function I(Q){for(var J=Array(Q),Z=0;Z<Q;++Z){J[Z]=Array(Q);for(var ee=0;ee<Q;++ee)J[Z][ee]=['m',ee,'[',Q-Z-1,']'].join('')}return J}function T(Q){return 1&Q?'-':''}function L(Q){if(1===Q.length)return Q[0];if(2===Q.length)return['sum(',Q[0],',',Q[1],')'].join('');var J=Q.length>>1;return['sum(',L(Q.slice(0,J)),',',L(Q.slice(J)),')'].join('')}function N(Q){if(2===Q.length)return[['sum(prod(',Q[0][0],',',Q[1][1],'),prod(-',Q[0][1],',',Q[1][0],'))'].join('')];for(var J=[],Z=0;Z<Q.length;++Z)J.push(['scale(',L(N(C(Q,Z))),',',T(Z),Q[0][Z],')'].join(''));return J}function R(Q){for(var J=[],Z=[],ee=I(Q),te=[],ae=0;ae<Q;++ae)0==(1&ae)?J.push.apply(J,N(C(ee,ae))):Z.push.apply(Z,N(C(ee,ae))),te.push('m'+ae);var ie=L(J),oe=L(Z),re='orientation'+Q+'Exact',de=['function ',re,'(',te.join(),'){var p=',ie,',n=',oe,',d=sub(p,n);return d[d.length-1];};return ',re].join(''),se=new Function('sum','prod','scale','sub',de);return se(W,M,O,H)}function P(Q){var J=K[Q.length];return J||(J=K[Q.length]=R(Q.length)),J.apply(void 0,Q)}var M=E(109),W=E(221),O=E(219),H=E(220),U=5,z=1.1102230246251565e-16,Y=R(3),G=R(4),K=[function(){return 0},function(){return 0},function(J,Z){return Z[0]-J[0]},function(J,Z,ee){var te=(J[1]-ee[1])*(Z[0]-ee[0]),ae=(J[0]-ee[0])*(Z[1]-ee[1]),ie=te-ae,oe;if(0<te){if(0>=ae)return ie;oe=te+ae}else if(0>te){if(0<=ae)return ie;oe=-(te+ae)}else return ie;var re=(3+16*z)*z*oe;return ie>=re||ie<=-re?ie:Y(J,Z,ee)},function(J,Z,ee,te){var ae=J[0]-te[0],ie=Z[0]-te[0],oe=ee[0]-te[0],re=J[1]-te[1],de=Z[1]-te[1],se=ee[1]-te[1],le=J[2]-te[2],ce=Z[2]-te[2],pe=ee[2]-te[2],ue=ie*se,he=oe*de,ge=oe*re,me=ae*se,fe=ae*de,ye=ie*re,ve=le*(ue-he)+ce*(ge-me)+pe*(fe-ye),xe=(Math.abs(ue)+Math.abs(he))*Math.abs(le)+(Math.abs(ge)+Math.abs(me))*Math.abs(ce)+(Math.abs(fe)+Math.abs(ye))*Math.abs(pe),be=(7+56*z)*z*xe;return ve>be||-ve>be?ve:G(J,Z,ee,te)}];(function(){for(;K.length<=U;)K.push(R(K.length));for(var Q=[],J=['slow'],Z=0;Z<=U;++Z)Q.push('a'+Z),J.push('o'+Z);for(var ee=['function getOrientation(',Q.join(),'){switch(arguments.length){case 0:case 1:return 0;'],Z=2;Z<=U;++Z)ee.push('case ',Z,':return o',Z,'(',Q.slice(0,Z).join(),');');ee.push('}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation'),J.push(ee.join(''));var te=Function.apply(void 0,J);u.exports=te.apply(void 0,[P].concat(K));for(var Z=0;Z<=U;++Z)u.exports[Z]=K[Z]})()},function(u,h,E){function C(W,O,H){var U=M.segments(W),z=M.segments(O),V=M.combine(U,z),X=H(V);return M.polygon(X)}/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */var I=E(224),T=E(225),L=E(226),N=E(228),R=E(229),P=!1,D=T(),M={buildLog:function(W){return!0===W?P=I():!1==W&&(P=!1),!1!==P&&P.list},epsilon:function(W){return D.epsilon(W)},segments:function(W){var O=L(!0,D,P);return W.regions.forEach(O.addRegion),{segments:O.calculate(W.inverted),inverted:W.inverted}},combine:function(W,O){var H=L(!1,D,P);return{combined:H.calculate(W.segments,W.inverted,O.segments,O.inverted),inverted1:W.inverted,inverted2:O.inverted}},selectUnion:function(W){return{segments:R.union(W.combined,P),inverted:W.inverted1||W.inverted2}},selectIntersect:function(W){return{segments:R.intersect(W.combined,P),inverted:W.inverted1&&W.inverted2}},selectDifference:function(W){return{segments:R.difference(W.combined,P),inverted:W.inverted1&&!W.inverted2}},selectDifferenceRev:function(W){return{segments:R.differenceRev(W.combined,P),inverted:!W.inverted1&&W.inverted2}},selectXor:function(W){return{segments:R.xor(W.combined,P),inverted:W.inverted1!==W.inverted2}},polygon:function(W){return{regions:N(W.segments,D,P),inverted:W.inverted}},union:function(W,O){return C(W,O,M.selectUnion)},intersect:function(W,O){return C(W,O,M.selectIntersect)},difference:function(W,O){return C(W,O,M.selectDifference)},differenceRev:function(W,O){return C(W,O,M.selectDifferenceRev)},xor:function(W,O){return C(W,O,M.selectXor)}};'object'==typeof window&&(window.PolyBool=M),u.exports=M},function(u){u.exports=function(){function C(N,R){return I.list.push({type:N,data:R?JSON.parse(JSON.stringify(R)):void 0}),I}var T=0,L=!1,I;return I={list:[],segmentId:function(){return T++},checkIntersection:function(N,R){return C('check',{seg1:N,seg2:R})},segmentChop:function(N,R){return C('div_seg',{seg:N,pt:R}),C('chop',{seg:N,pt:R})},statusRemove:function(N){return C('pop_seg',{seg:N})},segmentUpdate:function(N){return C('seg_update',{seg:N})},segmentNew:function(N,R){return C('new_seg',{seg:N,primary:R})},segmentRemove:function(N){return C('rem_seg',{seg:N})},tempStatus:function(N,R,P){return C('temp_status',{seg:N,above:R,below:P})},rewind:function(N){return C('rewind',{seg:N})},status:function(N,R,P){return C('status',{seg:N,above:R,below:P})},vert:function(N){return N===L?I:(L=N,C('vert',{x:N}))},log:function(N){return'string'!=typeof N&&(N=JSON.stringify(N,!1,'  ')),C('log',{txt:N})},reset:function(){return C('reset')},selected:function(N){return C('selected',{segs:N})},chainStart:function(N){return C('chain_start',{seg:N})},chainRemoveHead:function(N,R){return C('chain_rem_head',{index:N,pt:R})},chainRemoveTail:function(N,R){return C('chain_rem_tail',{index:N,pt:R})},chainNew:function(N,R){return C('chain_new',{pt1:N,pt2:R})},chainMatch:function(N){return C('chain_match',{index:N})},chainClose:function(N){return C('chain_close',{index:N})},chainAddHead:function(N,R){return C('chain_add_head',{index:N,pt:R})},chainAddTail:function(N,R){return C('chain_add_tail',{index:N,pt:R})},chainConnect:function(N,R){return C('chain_con',{index1:N,index2:R})},chainReverse:function(N){return C('chain_rev',{index:N})},chainJoin:function(N,R){return C('chain_join',{index1:N,index2:R})},done:function(){return C('done')}},I}},function(u){u.exports=function(C){'number'!=typeof C&&(C=1e-10);var I={epsilon:function(T){return'number'==typeof T&&(C=T),C},pointAboveOrOnLine:function(T,L,N){var R=L[0],P=L[1],D=N[0],M=N[1],W=T[0],O=T[1];return(D-R)*(O-P)-(M-P)*(W-R)>=-C},pointBetween:function(T,L,N){var R=T[1]-L[1],P=N[0]-L[0],D=T[0]-L[0],M=N[1]-L[1],W=D*P+R*M;if(W<C)return!1;return!(W-(P*P+M*M)>-C)},pointsSameX:function(T,L){return Math.abs(T[0]-L[0])<C},pointsSameY:function(T,L){return Math.abs(T[1]-L[1])<C},pointsSame:function(T,L){return I.pointsSameX(T,L)&&I.pointsSameY(T,L)},pointsCompare:function(T,L){return I.pointsSameX(T,L)?I.pointsSameY(T,L)?0:T[1]<L[1]?-1:1:T[0]<L[0]?-1:1},pointsCollinear:function(T,L,N){var R=T[0]-L[0],P=T[1]-L[1],D=L[0]-N[0],M=L[1]-N[1];return Math.abs(R*M-D*P)<C},linesIntersect:function(T,L,N,R){var P=L[0]-T[0],D=L[1]-T[1],M=R[0]-N[0],W=R[1]-N[1],O=P*W-D*M;if(Math.abs(O)<C)return!1;var H=T[0]-N[0],U=T[1]-N[1],z=(M*U-W*H)/O,V=(P*U-D*H)/O,X={alongA:0,alongB:0,pt:[T[0]+z*P,T[1]+z*D]};return X.alongA=z<=-C?-2:z<C?-1:z-1<=-C?0:z-1<C?1:2,X.alongB=V<=-C?-2:V<C?-1:V-1<=-C?0:V-1<C?1:2,X}};return I}},function(u,h,E){var I=E(227);u.exports=function(T,L,N){function R(Y,G){return{id:N?N.segmentId():-1,start:Y,end:G,myFill:{above:null,below:null},otherFill:null}}function P(Y,G,K){return{id:N?N.segmentId():-1,start:Y,end:G,myFill:{above:K.myFill.above,below:K.myFill.below},otherFill:null}}function D(Y,G,K,Q,J,Z){var ee=L.pointsCompare(G,J);return 0===ee?L.pointsSame(K,Z)?0:Y===Q?L.pointAboveOrOnLine(K,Q?J:Z,Q?Z:J)?1:-1:Y?1:-1:ee}function M(Y,G){X.insertBefore(Y,function(K){var Q=D(Y.isStart,Y.pt,G,K.isStart,K.pt,K.other.pt);return 0>Q})}function W(Y,G){var K=I.node({isStart:!0,pt:Y.start,seg:Y,primary:G,other:null,status:null});return M(K,Y.end),K}function O(Y,G,K){var Q=I.node({isStart:!1,pt:G.end,seg:G,primary:K,other:Y,status:null});Y.other=Q,M(Q,Y.pt)}function H(Y,G){var K=W(Y,G);return O(K,Y,G),K}function U(Y,G){N&&N.segmentChop(Y.seg,G),Y.other.remove(),Y.seg.end=G,Y.other.pt=G,M(Y.other,Y.pt)}function z(Y,G){var K=P(G,Y.seg.end,Y.seg);return U(Y,G),H(K,Y.primary)}function V(Y,G){function K(pe,ue){var he=pe.seg.start,ge=pe.seg.end,me=ue.seg.start,fe=ue.seg.end;return L.pointsCollinear(he,me,fe)?L.pointsCollinear(ge,me,fe)?1:L.pointAboveOrOnLine(ge,me,fe)?1:-1:L.pointAboveOrOnLine(he,me,fe)?1:-1}function Q(pe){return Z.findTransition(function(ue){var he=K(pe,ue.ev);return 0<he})}function J(pe,ue){var he=pe.seg,ge=ue.seg,me=he.start,fe=he.end,ye=ge.start,ve=ge.end;N&&N.checkIntersection(he,ge);var xe=L.linesIntersect(me,fe,ye,ve);if(!1===xe){if(!L.pointsCollinear(me,fe,ye))return!1;if(L.pointsSame(me,ve)||L.pointsSame(fe,ye))return!1;var be=L.pointsSame(me,ye),we=L.pointsSame(fe,ve);if(be&&we)return ue;var Ee=!be&&L.pointBetween(me,ye,ve),ke=!we&&L.pointBetween(fe,ye,ve);if(be)return ke?z(ue,fe):z(pe,ve),ue;Ee&&(we||(ke?z(ue,fe):z(pe,ve)),z(ue,me))}else 0===xe.alongA&&(-1===xe.alongB?z(pe,ye):0===xe.alongB?z(pe,xe.pt):1===xe.alongB&&z(pe,ve)),0===xe.alongB&&(-1===xe.alongA?z(ue,me):0===xe.alongA?z(ue,xe.pt):1===xe.alongA&&z(ue,fe));return!1}for(var Z=I.create(),ee=[],te;!X.isEmpty();){if(te=X.getHead(),N&&N.vert(te.pt[0]),te.isStart){N&&N.segmentNew(te.seg,te.primary);var ae=Q(te),ie=ae.before?ae.before.ev:null,oe=ae.after?ae.after.ev:null;N&&N.tempStatus(te.seg,!!ie&&ie.seg,!!oe&&oe.seg);var re=function(){if(ie){var ue=J(te,ie);if(ue)return ue}return!!oe&&J(te,oe)}();if(re){if(T){var de;de=null===te.seg.myFill.below||te.seg.myFill.above!==te.seg.myFill.below,de&&(re.seg.myFill.above=!re.seg.myFill.above)}else re.seg.otherFill=te.seg.myFill;N&&N.segmentUpdate(re.seg),te.other.remove(),te.remove()}if(X.getHead()!==te){N&&N.rewind(te.seg);continue}if(T){var de;de=null===te.seg.myFill.below||te.seg.myFill.above!==te.seg.myFill.below,te.seg.myFill.below=oe?oe.seg.myFill.above:Y,te.seg.myFill.above=de?!te.seg.myFill.below:te.seg.myFill.below}else if(null===te.seg.otherFill){var se;se=oe?te.primary===oe.primary?oe.seg.otherFill.above:oe.seg.myFill.above:te.primary?G:Y,te.seg.otherFill={above:se,below:se}}N&&N.status(te.seg,!!ie&&ie.seg,!!oe&&oe.seg),te.other.status=ae.insert(I.node({ev:te}))}else{var le=te.status;if(null===le)throw new Error('PolyBool: Zero-length segment detected; your epsilon is probably too small or too large');if(Z.exists(le.prev)&&Z.exists(le.next)&&J(le.prev.ev,le.next.ev),N&&N.statusRemove(le.ev.seg),le.remove(),!te.primary){var ce=te.seg.myFill;te.seg.myFill=te.seg.otherFill,te.seg.otherFill=ce}ee.push(te.seg)}X.getHead().remove()}return N&&N.done(),ee}var X=I.create();return T?{addRegion:function(Y){for(var K=Y[Y.length-1],Q=0,G;Q<Y.length;Q++){G=K,K=Y[Q];var J=L.pointsCompare(G,K);0===J||H(R(0>J?G:K,0>J?K:G),!0)}},calculate:function(Y){return V(Y,!1)}}:{calculate:function(Y,G,K,Q){return Y.forEach(function(J){H(J,!0)}),K.forEach(function(J){H(J,!1)}),V(G,Q)}}}},function(u){u.exports={create:function(){var C={root:{root:!0,next:null},exists:function(I){return null===I||I===C.root?!1:!0},isEmpty:function(){return null===C.root.next},getHead:function(){return C.root.next},insertBefore:function(I,T){for(var L=C.root,N=C.root.next;null!==N;){if(T(N))return I.prev=N.prev,I.next=N,N.prev.next=I,void(N.prev=I);L=N,N=N.next}L.next=I,I.prev=L,I.next=null},findTransition:function(I){for(var T=C.root,L=C.root.next;null!==L&&!I(L);)T=L,L=L.next;return{before:T===C.root?null:T,after:L,insert:function(N){return N.prev=T,N.next=L,T.next=N,null!==L&&(L.prev=N),N}}}};return C},node:function(C){return C.prev=null,C.next=null,C.remove=function(){C.prev.next=C.next,C.next&&(C.next.prev=C.prev),C.prev=null,C.next=null},C}}},function(u){u.exports=function(C,I,T){var L=[],N=[];return C.forEach(function(R){function P(le,ce,pe){return(z.index=le,z.matches_head=ce,z.matches_pt1=pe,z===H)?(z=U,!1):(z=null,!0)}function D(le){T&&T.chainReverse(le),L[le].reverse()}function M(le,ce){var pe=L[le],ue=L[ce],he=pe[pe.length-1],ge=pe[pe.length-2],me=ue[0],fe=ue[1];I.pointsCollinear(ge,he,me)&&(T&&T.chainRemoveTail(le,he),pe.pop(),he=ge),I.pointsCollinear(he,me,fe)&&(T&&T.chainRemoveHead(ce,me),ue.shift()),T&&T.chainJoin(le,ce),L[le]=pe.concat(ue),L.splice(ce,1)}var W=R.start,O=R.end;T&&T.chainStart(R);for(var H={index:0,matches_head:!1,matches_pt1:!1},U={index:0,matches_head:!1,matches_pt1:!1},z=H,V=0;V<L.length;V++){var X=L[V],Y=X[0],G=X[1],K=X[X.length-1],Q=X[X.length-2];if(I.pointsSame(Y,W)){if(P(V,!0,!0))break;}else if(I.pointsSame(Y,O)){if(P(V,!0,!1))break;}else if(I.pointsSame(K,W)){if(P(V,!1,!0))break;}else if(I.pointsSame(K,O)&&P(V,!1,!1))break}if(z===H)return L.push([W,O]),void(T&&T.chainNew(W,O));if(z===U){T&&T.chainMatch(H.index);var J=H.index,Z=H.matches_pt1?O:W,ee=H.matches_head,X=L[J],te=ee?X[0]:X[X.length-1],ae=ee?X[1]:X[X.length-2],ie=ee?X[X.length-1]:X[0],oe=ee?X[X.length-2]:X[1];return(I.pointsCollinear(ae,te,Z)&&(ee?(T&&T.chainRemoveHead(H.index,Z),X.shift()):(T&&T.chainRemoveTail(H.index,Z),X.pop()),te=ae),I.pointsSame(ie,Z))?(L.splice(J,1),I.pointsCollinear(oe,ie,te)&&(ee?(T&&T.chainRemoveTail(H.index,te),X.pop()):(T&&T.chainRemoveHead(H.index,te),X.shift())),T&&T.chainClose(H.index),void N.push(X)):void(ee?(T&&T.chainAddHead(H.index,Z),X.unshift(Z)):(T&&T.chainAddTail(H.index,Z),X.push(Z)))}var re=H.index,de=U.index;T&&T.chainConnect(re,de);var se=L[re].length<L[de].length;H.matches_head?U.matches_head?se?(D(re),M(re,de)):(D(de),M(de,re)):M(de,re):U.matches_head?M(re,de):se?(D(re),M(de,re)):(D(de),M(re,de))}),N}},function(u){function E(I,T,L){var N=[];return I.forEach(function(R){var P=(R.myFill.above?8:0)+(R.myFill.below?4:0)+(R.otherFill&&R.otherFill.above?2:0)+(R.otherFill&&R.otherFill.below?1:0);0!==T[P]&&N.push({id:L?L.segmentId():-1,start:R.start,end:R.end,myFill:{above:1===T[P],below:2===T[P]},otherFill:null})}),L&&L.selected(N),N}u.exports={union:function(I,T){return E(I,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],T)},intersect:function(I,T){return E(I,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],T)},difference:function(I,T){return E(I,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],T)},differenceRev:function(I,T){return E(I,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],T)},xor:function(I,T){return E(I,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],T)}}},function(u,h,E){const C=E(2).contentUpgrade,I=E(104),T=E(239),L=E(240),N=E(245),R={standard:E(242),'top-down':E(243)},P=function(M,W){'use strict';return Object.keys(M).forEach(function(O){const H=M[O];H.styles=W.nodeStyles(H.level,H.attr)}),M},D=function(M,W,O,H){'use strict';return{orientation:H,nodes:P(M,O),connectors:T(W,M),links:L(W,M),theme:W.attr&&W.attr.theme}};u.exports=function(W,O,H){'use strict';const U=H&&H.layouts||R,z=H&&H.theme||new I({}),V=new N,X=z.attributeValue(['layout'],[],['spacing'],{h:20,v:20}),Y=z.attributeValue(['layout'],[],['orientation'],'standard'),G=U[Y]||U.standard;return W=C(W),Object.keys(W.ideas).forEach(function(K){const Q=W.ideas[K],J=G(Q,O,{h:X.h||X,v:X.v||X});V.appendRootNodeLayout(J,Q)}),D(V.getCombinedLayout(10),W,z,Y)}},function(u){u.exports={quadratic:function(E,C,I,T){'use strict';const L=1.2*Math.min(T.height,I.height),N=E.connectorTheme.controlPoint.height*(E.from.y-E.to.y),R=Math.max(-L,Math.min(L,N));return{d:'M'+Math.round(E.from.x-C.left)+','+Math.round(E.from.y-C.top)+'Q'+Math.round(E.from.x-C.left)+','+Math.round(E.to.y-R-C.top)+' '+Math.round(E.to.x-C.left)+','+Math.round(E.to.y-C.top),position:C}},'s-curve':function(E,C){'use strict';const I=10,T=Math.round(E.to.x-E.from.x),L=Math.round(E.to.y-E.from.y),N=I<Math.abs(0.5*T)?I*Math.sign(T):Math.round(0.5*T),R=I<Math.abs(0.5*L)?I*Math.sign(L):Math.round(0.5*L);return{d:'M'+(E.from.x-C.left)+','+(E.from.y-C.top)+'q'+N+',0 '+N+','+R+'c0,'+(L-2*R)+' '+Math.round(T/2-N)+','+(L-R)+' '+(T-N)+','+(L-R),position:C}},'top-down-s-curve':function(E,C){'use strict';const I=Math.round(E.to.x-E.from.x),T=Math.round(E.to.y-E.from.y),L=15,N=L*Math.sign(I),R=L*Math.sign(T),P=Math.round(0.5*T)-R;return L>Math.abs(I/2)?function(){const M=P+Math.round(0.5*R);return{d:'M'+(E.from.x-C.left)+','+(E.from.y-C.top)+'v'+M+'l'+I+','+(T-M),position:C,initialRadius:5}}():{d:'M'+(E.from.x-C.left)+','+(E.from.y-C.top)+'v'+P+'q0,'+R+' '+N+','+R+'h'+(I-2*N)+'q'+N+',0 '+N+','+R+'v'+P,position:C,initialRadius:5}},'compact-s-curve':function(E,C){'use strict';const I=10,T=Math.round(E.to.x-E.from.x),L=Math.round(E.to.y-E.from.y),N=I*Math.sign(T),R=I*Math.sign(L);return I>Math.abs(0.5*T)||I>Math.abs(0.5*L)?function(){const D=Math.round(T/2);return{d:'M'+(E.from.x-C.left)+','+(E.from.y-C.top)+'l'+D+',0 l'+(T-D)+','+L,position:C}}():{d:'M'+(E.from.x-C.left)+','+(E.from.y-C.top)+'q'+N+',0 '+N+','+R+'v'+(L-2*R)+'q0,'+R+' '+N+','+R+'h'+(T-2*N),position:C}},'vertical-quadratic-s-curve':function(E,C){'use strict';const I=Math.round(E.to.x-E.from.x),T=Math.round(E.to.y-E.from.y),L=I/2,N=T/2;return 20>Math.abs(I)?{d:'M'+(E.from.x-C.left)+','+(E.from.y-C.top)+'l'+I+','+T,initialRadius:10,position:C}:{d:'M'+(E.from.x-C.left)+','+(E.from.y-C.top)+'q0,'+Math.round(N/2)+' '+L+','+N+'q'+L+','+Math.round(N/2)+' '+L+','+N,initialRadius:10,position:C}},'vertical-s-curve':function(E,C){'use strict';const I=10,T=Math.round(E.to.x-E.from.x),L=Math.round(E.to.y-E.from.y),N=I*Math.sign(T),R=I*Math.sign(L);return I>Math.abs(0.5*T)||I>Math.abs(0.5*L)?{d:'M'+(E.from.x-C.left)+','+(E.from.y-C.top)+'l'+T+','+L,position:C}:{d:'M'+(E.from.x-C.left)+','+(E.from.y-C.top)+'q0,'+R+' '+N+','+R+'h'+(T-2*N)+'q'+N+',0 '+N+','+R+'v'+(L-2*R),position:C}},straight:function(E,C){'use strict';return{d:'M'+Math.round(E.from.x-C.left)+','+Math.round(E.from.y-C.top)+'L'+Math.round(E.to.x-C.left)+','+Math.round(E.to.y-C.top),position:C}},'no-connector':function(E,C){'use strict';return{d:'M'+Math.round(E.to.x-C.left)+','+Math.round(E.to.y-C.top),position:C}}}},function(u,h,E){const C=E(104),I=E(0),T=E(241),L=function(H,U,z){'use strict';return U.nodeUnderline&&(H.d+='M'+(U.nodeUnderline.from.x-z.left)+','+(U.nodeUnderline.from.y-z.top)+' H'+(U.nodeUnderline.to.x-z.left)),H},N=function(H,U){'use strict';const z=H.initialRadius||0,V=U.nodeOverline&&Math.floor(0.5*Math.abs(U.nodeOverline.to.x-U.nodeOverline.from.x))-1;return U.nodeOverline&&(H.d+='m'+-1*V+','+z+'q0,'+-1*z+' '+z+','+-1*z+' h'+2*(V-z)+'q'+z+',0 '+z+','+z),H},R=function(H,U,z){'use strict';return N(L(H,U,z),U)},P={center:function(H){'use strict';return Math.round(H.top+0.5*H.height)},base:function(H){'use strict';return H.top+H.height+1},'base-inset':function(H,U){'use strict';return H.top+H.height+1-U},top:function(H){'use strict';return H.top}},D=E(231),M=function(H,U,z){'use strict';const X=function(){const se=U.top+0.5*U.height,le=H.top+0.5*H.height;return Math.abs(le-se)+10<Math.max(U.height,0.75*H.height)?'horizontal':se<le?'above':'below'}(),Y=H.styles,G=U.styles,K=z.attributeValue(['node'],Y,['connections','default'],{h:'center',v:'center'}),Q=z.attributeValue(['node'],G,['connections','default'],{h:'nearest-inset',v:'center'}),J=I.extend({},K,z.attributeValue(['node'],Y,['connections','from',X],{})),Z=I.extend({},Q,z.attributeValue(['node'],G,['connections','to'],{})),ee=z.connectorTheme(X,G,Y),te=z.attributeValue(['node'],Y,['cornerRadius'],10),ae=z.attributeValue(['node'],G,['cornerRadius'],10),ie=z.attributeValue(['node'],G,['border','type'],'');let oe=!1,re=!1;return('underline'===ie||'under-overline'===ie)&&(oe={from:{x:U.left,y:U.top+U.height+1},to:{x:U.left+U.width,y:U.top+U.height+1}}),('overline'===ie||'under-overline'===ie)&&(re={from:{x:U.left,y:U.top},to:{x:U.left+U.width,y:U.top}}),{from:{x:T[J.h](H,U,te),y:P[J.v](H,te)},to:{x:T[Z.h](U,H,ae),y:P[Z.v](U,ae)},connectorTheme:ee,nodeUnderline:oe,nodeOverline:re}};Math.sign=Math.sign||function(H){'use strict';return 0<=H?1:-1},u.exports={themePath:function(H,U,z){'use strict';const V=Math.min(H.left,U.left),X=Math.min(H.top,U.top),Y={left:V,top:X,width:Math.max(H.left+H.width,U.left+U.width,V+1)-V,height:Math.max(H.top+H.height,U.top+U.height,X+1)-X+2},G=z||new C({}),K=M(H,U,G),Q=R(D[K.connectorTheme.type](K,Y,H,U),K,Y);return Q.color=K.connectorTheme.line.color,Q.width=K.connectorTheme.line.width,Q},linkPath:function(H,U,z){'use strict';const X=function(J,Z){const ee=[{x:J.left+Math.round(0.5*J.width),y:J.top},{x:J.left+J.width,y:J.top+Math.round(0.5*J.height)},{x:J.left+Math.round(0.5*J.width),y:J.top+J.height},{x:J.left,y:J.top+Math.round(0.5*J.height)}],te=[{x:Z.left+Math.round(0.5*Z.width),y:Z.top},{x:Z.left+Z.width,y:Z.top+Math.round(0.5*Z.height)},{x:Z.left+Math.round(0.5*Z.width),y:Z.top+Z.height},{x:Z.left,y:Z.top+Math.round(0.5*Z.height)}];let oe=Infinity,ae,ie,re,de,se,le,ce;for(ae=0;ae<ee.length;ae+=1)for(ie=0;ie<te.length;ie+=1)se=ee[ae].x-te[ie].x,le=ee[ae].y-te[ie].y,ce=se*se+le*le,ce<oe&&(re=ae,de=ie,oe=ce);return{from:ee[re],to:te[de]}}(H,U),Y=Math.min(H.left,U.left),G=Math.min(H.top,U.top),K={left:Y,top:G,width:Math.max(H.left+H.width,U.left+U.width,Y)-Y,height:Math.max(H.top+H.height,U.top+U.height,G)-G};return{d:'M'+Math.round(X.from.x-K.left)+','+Math.round(X.from.y-K.top)+'L'+Math.round(X.to.x-K.left)+','+Math.round(X.to.y-K.top),conn:X,position:K,arrow:z&&function(){const J=Math.tan(Math.PI/9),Z=X.to.x-X.from.x,ee=X.to.y-X.from.y;let te=14,ae,ie,oe,re,de,se;return 0==Z?(ae=0>ee?-1:1,ie=X.to.x+te*Math.sin(J)*ae,oe=X.to.x-te*Math.sin(J)*ae,re=X.to.y-te*Math.cos(J)*ae,de=X.to.y-te*Math.cos(J)*ae):(se=ee/Z,X.from.x<X.to.x&&(te=-te),ie=X.to.x+(1-se*J)*te/Math.sqrt((1+se*se)*(1+J*J)),re=X.to.y+(se+J)*te/Math.sqrt((1+se*se)*(1+J*J)),oe=X.to.x+(1+se*J)*te/Math.sqrt((1+se*se)*(1+J*J)),de=X.to.y+(se-J)*te/Math.sqrt((1+se*se)*(1+J*J))),'M'+Math.round(ie-K.left)+','+Math.round(re-K.top)+'L'+Math.round(X.to.x-K.left)+','+Math.round(X.to.y-K.top)+'L'+Math.round(oe-K.left)+','+Math.round(de-K.top)+'Z'}()}}}},function(u){u.exports={name:'MindMup Default',node:[{name:'default',cornerRadius:10,backgroundColor:'#E0E0E0',border:{type:'surround',line:{color:'#707070',width:1}},shadow:[{color:'#070707',opacity:0.4,offset:{width:2,height:2},radius:2}],text:{margin:5,alignment:'center',color:'#4F4F4F',lightColor:'#EEEEEE',darkColor:'#000000',font:{lineSpacing:2.5,size:9,weight:'bold'}},connections:{'default':{h:'center',v:'center'},from:{horizontal:{h:'nearest-inset',v:'center'}},to:{h:'nearest',v:'center'}},decorations:{height:20,edge:'top',overlap:!0,position:'end'}},{name:'level_1',backgroundColor:'#22AAE0'},{name:'activated',border:{type:'surround',line:{color:'#22AAE0',width:2,style:'dashed'}}},{name:'selected',shadow:[{color:'#000000',opacity:0.9,offset:{width:2,height:2},radius:2}]},{name:'collapsed',shadow:[{color:'#888888',offset:{width:0,height:1},radius:0},{color:'#FFFFFF',offset:{width:0,height:3},radius:0},{color:'#888888',offset:{width:0,height:4},radius:0},{color:'#FFFFFF',offset:{width:0,height:6},radius:0},{color:'#888888',offset:{width:0,height:7},radius:0}]},{name:'collapsed.selected',shadow:[{color:'#FFFFFF',offset:{width:0,height:1},radius:0},{color:'#888888',offset:{width:0,height:3},radius:0},{color:'#FFFFFF',offset:{width:0,height:6},radius:0},{color:'#555555',offset:{width:0,height:7},radius:0},{color:'#FFFFFF',offset:{width:0,height:10},radius:0},{color:'#333333',offset:{width:0,height:11},radius:0}]}],connector:{'default':{type:'quadratic',controlPoint:{above:{width:0,height:1.75},below:{width:0,height:1.75},horizontal:{width:0,height:1}},line:{color:'#707070',width:1}}}}},function(u,h,E){const C=E(103);u.exports=function(T){'use strict';const L=function(P,D){return[Math.round(0.5*(P[0]+D[0])),Math.round(0.5*(P[1]+D[1])),Math.round(0.5*(P[2]+D[2]))]},R=function(){const P=L(C(T),C('#EEEEEE')),D=[];let M;for(let W=0;W<P.length;W++)M=P[W]/255,D[W]=0.03928>=M?M/12.92:Math.pow((M+0.055)/1.055,2.4);return 0.2126*D[0]+0.7152*D[1]+0.0722*D[2]}();if(0.5>R)return'lightColor';return 0.9>R?'color':'darkColor'}},function(u,h,E){const C=E(0),I=E(223),T=E(217),L=function(ae,ie){'use strict';return ae[0]*ie[0]+ae[1]*ie[1]},R=function(ae){'use strict';return{regions:ae,inverted:!1}},P=function(ae,ie){'use strict';return ae&&ie&&2===ae.length&&2===ie.length&&ae[0]===ie[0]&&ae[1]===ie[1]},D=function(ae,ie){'use strict';return ae&&ie&&ae.length===ie.length&&C.filter(ae,function(oe){return C.filter(ie,function(re){return P(oe,re)}).length}).length===ae.length},M=function(ae,ie){'use strict';return!(ae.length>ie.length)&&function(){return C.filter(ae,function(re){return C.filter(ie,function(de){return D(re,de)}).length})}().length===ae.length},W=function(ae,ie){'use strict';const oe=R(ie),re=C.find(ae,function(de){const se=R([de]),le=I.intersect(oe,se);return M(ie,le.regions)});return re&&re.length&&re},O=function(ae,ie){'use strict';const oe=R(ae),re=R(ie),de=I.intersect(oe,re),se=M(ae,de.regions),le=se&&!M(de.regions,ie),ce=le&&W(ie,de.regions);return ce?ce:C.flatten(de.regions,!0)},H=function(ae,ie,oe){'use strict';const re=[ae[0]-ie[0],ae[1]-ie[1]],de=L(oe,re),se=L(oe,oe),le=[ie[0]+de*oe[0]/se,ie[1]+de*oe[1]/se];if(!oe[0]&&!oe[1])throw'invalid-args';return le},U=function(ae,ie,oe,re){'use strict';const de=function(le){const ce=le[0]-ie[0],pe=le[1]-ie[1],ue=function(){return 0==ce?0===oe[1]?1:pe/oe[1]:0===oe[0]?1:ce/oe[0]}(),he=0<=ue?1:-1,ge=he*(Math.pow(ce,2)+Math.pow(pe,2));return ge},se=C.filter(ae,function(le){return re?0>de(le):0<=de(le)});return C.sortBy(se,de)},z=function(ae,ie){'use strict';const oe=[];return C.each(ae,function(re){const de=Math.round(re.x-ie),se=Math.round(re.x+re.width+ie),le=Math.round(re.y-ie),ce=Math.round(re.y+re.height+ie);oe.push([de,le]),oe.push([de,ce]),oe.push([se,ce]),oe.push([se,le])}),oe},X=function(ae){'use strict';return[Math.round(ae[0]),Math.round(ae[1])]},G=function(ae,ie){'use strict';const oe=ae[0]+ie[0],re=ae[1]+ie[1];if(isNaN(oe)||isNaN(re))throw console.log('addVectors invalid-args x',oe,'y',re,'vector1',ae,'vector2',ie),'invalid-args';return[oe,re]},K=function(ae,ie){'use strict';const oe=ae[0]-ie[0],re=ae[1]-ie[1];if(isNaN(oe)||isNaN(re))throw console.log('subtractVectors invalid-args vector1',ae,'vector2',ie),'invalid-args';return[oe,re]},Q=function(ae,ie){'use strict';return ae.map(function(oe){return oe.map(function(re){return X(G(re,ie))})})},J=function(ae,ie,oe){'use strict';const re=C.flatten(ae,!0),de=re.map(function(le){return H(le,ie,oe)}),se=U(de,ie,oe,!0);return se.length&&se[0]},Z=function(ae,ie,oe,re){'use strict';const de=O(ae,ie),se=de.map(function(ce){return H(ce,oe,re)}),le=U(se,oe,re);return le.length&&le.pop()},ee=function(ae,ie,oe){'use strict';const re=J(ae,ie,oe),de=re&&X(K(ie,re));return!!re&&{translation:de,translatedPoly:Q(ae,de)}},te=function(ae,ie,oe,re,de,se){'use strict';const le=J(ae,oe,re)||oe,ce=Z(ae,ie,le,re);let pe;if(se=se||0,de=de||[0,0],ce)if(pe=ee(ae,ce,re),!pe)console.log('unable to translate poly',ae,'to intersectionPoint',ce,'with vector',re);else if(de=G(de,pe.translation),oe=G(oe,pe.translation),100>se)return te(pe.translatedPoly,ie,oe,re,de,se+1);return{translation:de,translatedPoly:ae}};u.exports={tolayoutPolygonRect:function(ae,ie){'use strict';let oe=0,re=0,de=0,se=0;return C.each(ae,function(le){oe=Math.min(oe,le.x),re=Math.max(re,le.x+le.width),de=Math.min(de,le.y),se=Math.max(se,le.y+le.width)}),oe-=ie,re+=ie,de-=ie,se+=ie,[[X([oe,de]),X([re,de]),X([re,se]),X([oe,se])]]},tolayoutPolygonHull:function(ae,ie){'use strict';const oe=z(ae,ie),re=T(oe),de=C.map(re,function(se){return oe[se]});return[de]},furthestIntersectionPoint:Z,projectPointOnLineVector:H,orderPointsOnVector:U,firstProjectedPolyPointOnVector:J,translatePoly:Q,addVectors:G,subtractVectors:K,translatePolyToIntersecton:ee,translatePolyToNotOverlap:te,unitVector:function(ae){'use strict';const ie=Math.sqrt(Math.pow(ae[0],2)+Math.pow(ae[1],2));return 0===ie?[0,0]:[ae[0]/ie,ae[1]/ie]},roundVector:X,polygonIntersectionPoints:O,shapeContainingIntersection:W}},function(u,h,E){const C=E(0),I=E(112);u.exports=function(L){'use strict';let N;const R=this,P={coneRatio:0.5,majorAxisRatio:3},D=function(z){const V=N&&C.values(N.nodes),X=V&&C.filter(V,z);return V&&X.length&&X},M=function(z,V){return D(function(Y){const G=Y.y+Y.height-(z.y+z.height),K=z.x-Math.abs(G*V),Q=z.x+z.width+Math.abs(G*V);return Y.id===z.id||Y.y<=Math.round(z.y+0.5*z.height)?!1:void 0!==V&&(Y.x>Q||Y.x+Y.width<K)?!1:!0})},W=function(z,V){return D(function(Y){const G=Y.x+Y.width-(z.x+z.width),K=z.y-Math.abs(G*V),Q=z.y+z.height+Math.abs(G*V);return Y.id===z.id||Y.x<=Math.round(z.x+0.5*z.width)?!1:void 0!==V&&(Y.y>Q||Y.y+Y.height<K)?!1:!0})},O=function(z,V){return D(function(Y){const G=Y.y-z.y,K=z.x-Math.abs(G*V),Q=z.x+z.width+Math.abs(G*V);return Y.id===z.id||Y.y+Y.height>=Math.round(z.y+0.5*z.height)?!1:void 0!==V&&(Y.x>Q||Y.x+Y.width<K)?!1:!0})},H=function(z,V){return D(function(Y){const G=Y.x-z.x,K=z.y-Math.abs(G*V),Q=z.y+z.height+Math.abs(G*V);return Y.id===z.id||Y.x+Y.width>=Math.round(z.x+0.5*z.width)?!1:void 0!==V&&(Y.y>Q||Y.y+Y.height<K)?!1:!0})},U=function(z,V,X,Y){const G={x:Math.round(z.x+0.5*z.width),y:Math.round(z.y+0.5*z.height)},K=function(Q,J){const Z=X*(Q.x-J.x),ee=Y*(Q.y-J.y);return Math.pow(Z,2)+Math.pow(ee,2)};return!!V&&(1===V.length?V[0]:C.min(V,function(Q){const J=[K(Q,G),K({x:Q.x+Q.width,y:Q.y+Q.height},G),K({x:Q.x+Q.width,y:Q.y},G),K({x:Q.x,y:Q.y+Q.height},G),K({x:Math.round(Q.x+0.5*Q.width),y:Math.round(Q.y+0.5*Q.height)},G)];return C.min(J)}))};R.getNode=function(z){return N&&N.nodes&&N.nodes[z]},R.isRootNode=function(z){return N&&N.nodes&&N.nodes[z]&&1===N.nodes[z].level},R.getNodeBox=function(z){return I(R.getNode(z))},R.setLayout=function(z){N=z||L},R.getLayout=function(){return N||L},R.nodeIdLeft=function(z){const V=R.getNode(z),X=V&&(H(V,P.coneRatio)||H(V)),Y=X&&U(V,X,1,P.majorAxisRatio);return Y&&Y.id},R.nodeIdRight=function(z){const V=R.getNode(z),X=V&&(W(V,P.coneRatio)||W(V)),Y=X&&U(V,X,1,P.majorAxisRatio);return Y&&Y.id},R.nodeIdUp=function(z){const V=R.getNode(z),X=V&&(O(V,P.coneRatio)||O(V)),Y=X&&U(V,X,P.majorAxisRatio,1);return Y&&Y.id},R.nodeIdDown=function(z){const V=R.getNode(z),X=V&&(M(V,P.coneRatio)||M(V)),Y=X&&U(V,X,P.majorAxisRatio,1);return Y&&Y.id},R.getOrientation=function(){return N&&N.orientation||'standard'},R.layoutBounds=function(){let z,V,X,Y;return!C.isEmpty(N.nodes)&&(C.each(N.nodes,function(G){z?(z=Math.min(G.x,z),V=Math.min(G.y,V),X=Math.max(G.x+G.width,X),Y=Math.max(G.y+G.height,Y)):(z=G.x,V=G.y,X=G.x+G.width,Y=G.y+G.height)}),{minX:z,minY:V,maxX:X,maxY:Y,width:X-z,height:Y-V})},R.clipRectTransform=function(z,V){let X=V&&V.scale||1;const Y=R.getNode(z),G=R.layoutBounds(),K=V&&V.padding||0,Q={x:Y.x+Y.width/2,y:Y.y+Y.height/2};return V&&V.clipRect?{x:V.clipRect.width/2-Q.x,y:V.clipRect.height/2-Q.y,width:V.clipRect.width,height:V.clipRect.height,scale:X}:V&&V.page?(X=Math.min((V.page.width-2*K)/G.width,(V.page.height-2*K)/G.height),{x:-1*G.minX+Math.floor(0.5*(V.page.width/X-G.width)),y:-1*G.minY+Math.floor(0.5*(V.page.height/X-G.height)),width:V.page.width,height:V.page.height,scale:X}):{x:-1*G.minX+Math.floor(K/X),y:-1*G.minY+Math.floor(K/X),width:G.width*X+2*K,height:G.height*X+2*K,scale:X}}}},function(u,h,E){const C=E(0);u.exports=function(T,L){'use strict';const N=T.nodes,R=C.values(L.ideas).map(function(z){return z.id}),P=R.map(function(z){return N[z]}).filter(function(z){return z}),D=C.map(P,function(z){return z.x}),M=C.map(P,function(z){return z.x+z.width}),W=C.min(D),O=C.max(M),H=N[L.id],U=C.values(N).filter(function(z){return z.level===H.level&&z.id!==H.id});P.length&&(H.x=W,H.width=O-H.x),U.forEach(function(z){z.verticalOffset=(z.verticalOffset||0)+H.height})}},function(u,h,E){const C=E(0),I=E(244);u.exports=function(L,N,R,P){'use strict';const D={nodes:{}},M=function(H,U){return C.each(H,function(z){z.x+=U}),H},W=new I(N,R);let O;if(Array.isArray(N))throw'child layouts are an array!';return D.nodes[L.id]=L,L.x=Math.round(-0.5*L.width),D.levels=[{width:L.width,xOffset:L.x}],W.isEmpty()||(P?(D.levels=W.getMergedLevels(),O=D.levels[0].xOffset):(D.levels=D.levels.concat(W.getMergedLevels()),O=D.levels[1].xOffset),Object.keys(N).forEach(function(H){C.extend(D.nodes,M(N[H].nodes,O+W.getExpectedTranslation(H)))})),D}},function(u){u.exports=function(C,I){'use strict';const T={},L=function(N,R,P){if(P){if(!I[N.id])return;R!==C.id&&(T[N.id]={from:R,to:N.id})}N.ideas&&Object.keys(N.ideas).forEach(function(D){L(N.ideas[D],N.id,!0)})};return L(C),T}},function(u,h,E){const C=E(0);u.exports=function(I,T){'use strict';const L={};return C.each(I.links,function(N){T[N.ideaIdFrom]&&T[N.ideaIdTo]&&(L[N.ideaIdFrom+'_'+N.ideaIdTo]={ideaIdFrom:N.ideaIdFrom,ideaIdTo:N.ideaIdTo,attr:C.clone(N.attr)})}),L}},function(u){const E=function(C,I,T){'use strict';return C.left+C.width<I.left?C.left+C.width-T:C.left+T};u.exports={center:function(C){'use strict';return Math.round(C.left+0.5*C.width)},'center-separated':function(C,I,T,L){'use strict';const N=C.height*(L||0.2),R=T||10,P=C.width/2,D=C.left+P,M=I.left+I.width/2,W=I.left+I.width,O=I.top-C.top+C.height-N,U=function(){return I.left>C.left+C.width?I.left-D:W<C.left?W-D:I.left<D?M-D:M-D}(),z=U/Math.abs(O)*N,V=Math.max(z,-1*P+R),X=Math.min(V,P-R);return Math.round(C.left+0.5*C.width+X)},nearest:function(C,I){'use strict';return E(C,I,0)},'nearest-inset':E}},function(u,h,E){const C=E(0),I=E(249);u.exports=function(L,N,R){'use strict';const M=I.calculateTree(L,N,R.h,function(U,z){return z!==L.id||0<U}),W=I.calculateTree(L,N,R.h,function(U,z){return z!==L.id||0>U}),O=M.toLayout(),H=W.toLayout();return C.each(H.nodes,function(U){U.x=-1*U.x-U.width}),C.extend(H.nodes,O.nodes)}},function(u,h,E){const C=E(0),I=E(111),T=E(237),L=E(238);u.exports=function(R,P,D){'use strict';const M=function(Y){return Y.attr&&Y.attr.group},W=function(Y,G){const K=P(Y,G);return C.extend({level:G,verticalOffset:0,title:M(Y)?'':Y.title},K,C.pick(Y,['id','attr']))},O=function(Y,G,K){const Q={},J=!(C.isEmpty(Y.ideas)||Y.attr&&Y.attr.collapsed);return K=K||1,J&&Object.keys(Y.ideas).forEach(function(Z){const ee=M(Y)?K:K+1,te=O(Y.ideas[Z],G,ee);te&&(Q[Z]=te)}),G(Y,Q,K)},H=function(Y,G,K){const Q=W(Y,K);let J;return M(Q)&&!C.isEmpty(Y.ideas)?(J=L(Q,G,D.h,!0),T(J,Y)):J=L(Q,G,D.h),J},X=O(R,function(Y,G,K){return(Y===R||!I(Y))&&H(Y,G,K)});return function(Y,G){C.each(Y,function(K){K.y=G[K.level-1]+K.verticalOffset,delete K.verticalOffset})}(X.nodes,function(Y){const G=[],K=[];let J=0,Q;for(C.each(Y,function(Z){G[Z.level-1]=Math.max(G[Z.level-1]||0,Z.height+Z.verticalOffset)}),J=G.reduce(function(Z,ee){return Z+ee},0)+D.v*(G.length-1),K[0]=Math.round(-0.5*J),Q=1;Q<G.length;Q++)K[Q]=K[Q-1]+D.v+G[Q-1];return K}(X.nodes)),X.nodes}},function(u,h,E){const C=E(0);u.exports=function(T,L){'use strict';const N=this,R=function(){return T?C.sortBy(Object.keys(T),parseFloat):[]},P=L||0,M=function(){const W=R(),O={};let U;return function(){return C.isEmpty(T)?[]:R().map(function(z){return T[z]})}().forEach(function(z,V){const X=W[V];void 0==U?(O[X]=0-z.levels[0].xOffset,U=z.levels.map(function(Y){return Y.width+O[X]+Y.xOffset})):(z.levels.forEach(function(Y,G){const K=U[G];void 0!==K&&(void 0===O[X]?O[X]=K+P-Y.xOffset:O[X]=Math.max(O[X],K+P-Y.xOffset))}),z.levels.forEach(function(Y,G){U[G]=O[X]+Y.xOffset+Y.width}))}),O}();N.getLevelWidth=function(W){const O=R().filter(function(G){return N.existsOnLevel(G,W)}),H=O[0],U=O[O.length-1],z=T[H],V=T[U],X=z.levels[W].xOffset+N.getExpectedTranslation(H),Y=V.levels[W].xOffset+N.getExpectedTranslation(U);return Y+V.levels[W].width-X},N.getLevelWidths=function(){const W=[],O=C.max(C.map(T,function(H){return H.levels.length}));for(let H=0;H<O;H++)W.push(N.getLevelWidth(H));return W},N.isEmpty=function(){return C.isEmpty(T)},N.getExpectedTranslation=function(W){return M[W]},N.existsOnLevel=function(W,O){return T[W].levels.length>O},N.getMergedLevels=function(){const W=Math.round(-0.5*N.getLevelWidth(0));return N.getLevelWidths().map(function(O,H){const U=R().filter(function(X){return N.existsOnLevel(X,H)}),z=U[0],V=T[z];return{width:O,xOffset:V.levels[H].xOffset+N.getExpectedTranslation(z)+W}})}}},function(u,h,E){const C=E(0),I=E(235);u.exports=function(){'use strict';const L=this,N=function(H,U){C.each(H.rootLayout,function(z){z.x+=U.x,z.y+=U.y,z.rootId=H.rootIdea.id})},R=function(H){const U=H&&H.attr&&H.attr.position||[0,0,0];return{x:U[0],y:U[1],priority:U[2]}},P=function(H,U){const z={rootIdea:U,rootNode:H[U.id],rootLayout:H};return z},D=function(H){return R(H).priority},M=function(H){const U=R(H.rootIdea);return U&&U.priority&&H.rootNode?{x:U.x+H.rootNode.width/2,y:U.y+H.rootNode.height/2}:{x:0,y:0}},W=[],O=[];L.appendRootNodeLayout=function(H,U){const z=P(H,U);D(U)?W.push(z):O.push(z)},L.getCombinedLayout=function(H){let U=[],z={};const V=W.length&&C.max(W,function(ee){return R(ee.rootIdea).priority}),X={x:0,y:0},G=C.sortBy(W,function(ee){const te=M(ee);return Math.pow(te.x-X.x,2)+Math.pow(te.y-X.y,2)}),K=[],Q=W.length+O.length,J=1<Q,Z=function(ee){let te,ae,ie;const oe=M(ee),re=I.roundVector([oe.x,oe.y]);ie=J&&I.translatePoly(I.tolayoutPolygonHull(ee.rootLayout,H),re),!ee||C.contains(K,ee)||(K.length?function(){let se=I.unitVector([oe.x-X.x,oe.y-X.y]);0===se[0]&&0===se[1]&&(se=[1,0]),ae=I.translatePolyToNotOverlap(ie,U,re,se,re),te={x:ae.translation[0],y:ae.translation[1]},ie=ae.translatedPoly}():te=oe,N(ee,te),K.push(ee),J&&(U=U.concat(ie)))};if(!H)throw'invalid-args';return V&&Z(V),G.forEach(Z),O.forEach(Z),K.forEach(function(ee){z=C.extend(z,ee.rootLayout)}),z}}},function(u,h,E){const C=E(0),I=function(P){'use strict';return C.reduce(P,function(D,M){return D+M.l},0)},T=function(P,D){'use strict';let M=0,W=-1;for(;M<=D;){if(W+=1,W>=P.length)return-1;M+=P[W].l}return W},L=function(P,D){'use strict';let W=P.slice(),M;const O=I(P),H=T(D,O);return 0<=H&&(M=I(D.slice(0,H+1)),W.push({h:D[H].h,l:M-O}),W=W.concat(D.slice(H+1))),W},N=function(P,D){'use strict';const M=function(W,O){return C.map(W,function(H){return{l:H.l,h:H.h+O}})};this.initialHeight=function(){return this.bottom[0].h-this.top[0].h},this.borders=function(){return C.pick(this,'top','bottom')},this.spacingAbove=function(W){let O=0,H=0,U=0,z=0,V=0;for(;O<this.bottom.length&&H<W.top.length;)U=Math.max(U,this.bottom[O].h-W.top[H].h),z+this.bottom[O].l<V+W.top[H].l?(z+=this.bottom[O].l,O+=1):z+this.bottom[O].l===V+W.top[H].l?(z+=this.bottom[O].l,O+=1,V+=W.top[H].l,H+=1):(V+=W.top[H].l,H+=1);return U},this.indent=function(W,O){const H=this.top.slice(),U=this.bottom.slice(),z=Math.round((U[0].h+H[0].h)/2);return W?(H.unshift({h:Math.round(z-O/2),l:W}),U.unshift({h:Math.round(z+O/2),l:W}),new N(H,U)):this},this.stackBelow=function(W,O){const H=W.spacingAbove(this),U=L(W.top,M(this.top,H+O)),z=L(M(this.bottom,H+O),W.bottom);return new N(U,z)},this.expand=function(W,O){const H=W-this.top[0].h,U=O-this.bottom[0].h,z=M(this.top,H),V=M(this.bottom,U);return new N(z,V)},this.insertAtStart=function(W,O){const H=0,U=M(this.top,H),z=M(this.bottom,H),V=function(X){X[0].l*=0.5,X[1].l+=X[0].l};return U[0].l+=O,z[0].l+=O,U.unshift({h:Math.round(-0.5*W.height),l:W.width}),z.unshift({h:Math.round(0.5*W.height),l:W.width}),U[0].h>U[1].h&&V(U),z[0].h<z[1].h&&V(z),new N(U,z)},this.top=P.slice(),this.bottom=D.slice()};u.exports={borderLength:I,borderSegmentIndexAt:T,extendBorder:L,Outline:N,outlineFromDimensions:function(P){'use strict';return new N([{h:Math.round(-0.5*P.height),l:P.width}],[{h:Math.round(0.5*P.height),l:P.width}])}}},function(u,h,E){const C=E(2).formattedNodeTitle,I=E(0);u.exports=function(L){'use strict';const N=this,R=function(P,D){return P&&P.style&&P.style.width||D.maxWidth};N.dimensionProviderForTheme=function(P){return function(D,M){const W=D.attr&&D.attr.icon,O=P.nodeTheme(P.nodeStyles(M,D.attr)),H=C(D.title),U=R(D.attr,O),z=I.extend({},L(H,U,O.font));return z.textSize={width:z.width,height:z.height},W&&(('left'===W.position||'right'===W.position)&&(z.width&&W.width&&O.margin&&(z.width+=O.margin),z.width+=W.width),('top'===W.position||'bottom'===W.position)&&(z.height&&W.height&&O.margin&&(z.height+=O.margin),z.height+=W.height),z.height=Math.max(z.height,W.height),z.width=Math.max(z.width,W.width)),z.width=Math.max(z.width+2*O.margin,2*O.cornerRadius),z.height=Math.max(z.height+2*O.margin,2*O.cornerRadius),z}},N.nodeLayoutProviderForTheme=function(P){return function(D){const M=D.attr&&D.attr.icon,W=P.nodeTheme(P.nodeStyles(D.level,D.attr)),O=C(D.title),H=R(D.attr,W),U=L(O,H,W.font);let z=Math.min(D.width-2*W.margin,U.width),V,X,Y;if(M){switch(X={x:W.margin,y:W.margin,width:M.width,height:M.height},M.position){case'top':X.x=Math.round((D.width-M.width)/2),V={x:Math.round((D.width-z)/2),y:X.y+X.height+W.margin,width:z,height:D.height-M.height-3*W.margin};break;case'bottom':X.x=Math.round((D.width-M.width)/2),X.y=D.height-M.height-W.margin,V={x:Math.round((D.width-z)/2),y:W.margin,width:z,height:D.height-M.height-3*W.margin};break;case'left':z=Math.min(D.width-X.width-3*W.margin,U.width),X.y=Math.round((D.height-M.height)/2),Y=X.x+X.width,V={x:Math.round(Y+(D.width-Y-z)/2),y:W.margin,width:z,height:D.height-2*W.margin};break;case'right':z=Math.min(D.width-X.width-3*W.margin,U.width),X.x=D.width-M.width-W.margin,X.y=Math.round((D.height-M.height)/2),V={x:Math.round((X.x-z)/2),y:W.margin,width:z,height:D.height-2*W.margin};break;default:X.x=Math.round((D.width-M.width)/2),X.y=Math.round((D.height-M.height)/2),V={x:Math.round((D.width-z)/2),y:W.margin,width:z,height:D.height-2*W.margin};}I.contains(['left','right','center'],M.position)&&(V.y=Math.round((D.height-U.height)/2))}else V={x:Math.round((D.width-U.width)/2),y:W.margin,width:Math.min(U.width,D.width-2*W.margin),height:D.height-2*W.margin};return{text:V,image:X}}}}},function(u,h,E){const C=E(0),I=E(110);u.exports=function(){'use strict';const L=this,N=function(O){return O+'px'},R={cornerRadius:'border-radius','text.color':'color','text.margin':'padding',background:'background-color',backgroundColor:'background-color',border:'border',shadow:'box-shadow','text.font':'font','text.alignment':'text-align'},P=function(O){return O&&O.weight?{light:'200','semi-bold':'600'}[O.weight]||O.weight:'bold'},D=function(O){const H=O&&O.size||12,U=O&&O.lineSpacing||3;return H+'pt/'+(U+H)+'pt'},M={cornerRadius:N,'text.margin':N,background:I,border:function(O){return O.line?O.line.width+'px '+(O.line.style||'solid')+' '+O.line.color+';margin:'+-1*O.line.width+'px':'0'},shadow:function(O){const H=[];return 1===O.length&&'transparent'===O[0].color?'none':(O.forEach(function(U){H.push(U.offset.width+'px '+U.offset.height+'px '+U.radius+'px '+I(U))}),H.join(','))},'text.font':function(O){return'normal normal '+P(O)+' '+D(O)+' NotoSans, "Helvetica Neue", Roboto, Helvetica, Arial, sans-serif'}},W=function(O){let H,U;const z=[],V=function(G,K){C.each(G,function(Q,J){const Z=(K||'')+J;R[Z]?(H=M[Z]||C.identity,U=H(Q),U&&(z.push(R[Z]),z.push(':'),z.push(U),z.push(';'))):C.isObject(Q)&&V(Q,Z+'.')})},X=function(G,K){K.text&&(K.text.color&&(z.push(G),z.push('.mapjs-node-light{color:'),z.push(K.text.color),z.push(';}')),K.text.lightColor&&(z.push(G),z.push('.mapjs-node-dark{color:'),z.push(K.text.lightColor),z.push(';}')),K.text.darkColor&&(z.push(G),z.push('.mapjs-node-white{color:'),z.push(K.text.darkColor),z.push(';}')))},Y=function(G,K){const Q=K.decorations,J=K.text&&K.text.margin||0;Q&&(z.push(G),z.push(' .mapjs-decorations{position:absolute;'),'top'===Q.edge||'bottom'===Q.edge?('end'===Q.position?z.push('right:0;'):'start'===Q.position?z.push('left:0;'):z.push('left:0;width:100%;text-align:center;'),z.push(Q.edge),z.push(':-'),z.push(Q.overlap?Math.round(Q.height/2)+J:Q.height),z.push('px;')):('left'===Q.edge||'right'===Q.edge)&&(z.push('left'===Q.edge?'right':'left'),z.push(':100%;'),'end'===Q.position?z.push('bottom:0;'):'start'===Q.position?z.push('top:0;'):(z.push('top:calc(50% - '),z.push(Math.round(Q.height/2)),z.push('px);'))),z.push('}'))};return O.forEach(function(G){let K='.mapjs-node';'default'!==G.name&&(K=K+'.'+G.name.replace(/\s/g,'_')),z.push(K),z.push('{'),V(G),z.push('}'),X(K,G),Y(K,G)}),z.join('')};L.process=function(O){let H='';return O.node&&(H=W(O.node)),{css:H}},L.cssFont=M['text.font']}},function(u,h,E){const C=E(0),I=E(111),T=E(246),L=function(R){'use strict';C.extend(this,R),this.toLayout=function(P,D,M){const W={nodes:{},connectors:{}},O=C.pick(this,'id','title','attr','width','height','level');return P=P||0,D=D||0,1===O.level?(O.x=Math.round(-0.5*this.width),O.y=Math.round(-0.5*this.height)):(O.x=P+this.deltaX||0,O.y=D+this.deltaY||0),W.nodes[this.id]=O,void 0!==M&&(W.connectors[O.id]={from:M,to:O.id}),this.subtrees&&this.subtrees.forEach(function(H){const U=H.toLayout(O.x,O.y,O.id);C.extend(W.nodes,U.nodes),C.extend(W.connectors,U.connectors)}),W}},N=function(R,P,D,M,W){'use strict';const O={id:R.id,title:R.title,attr:R.attr,deltaY:0,deltaX:0,level:W||1},H=function(K,Q,J){let Z,ee;const te=function(ae){const ie=J[ae].deltaY-J[ae-1].deltaY,oe=K[ae].deltaY-K[ae-1].deltaY;oe<ie&&(ee.deltaY+=ie-oe)};for(let ae=0;ae<K.length;ae+=1)ee=K[ae],ee.attr&&ee.attr.position?(ee.deltaY=ee.attr.position[1],(void 0==Z||ee.attr.position[2]>K[Z].attr.position[2])&&(Z=ae)):ee.deltaY+=Q,0<ae&&te(ae);return Z},U=function(K,Q){const J=C.map(K,function(te){return C.pick(te,'deltaX','deltaY')}),Z=H(K,Q,J),ee=Z&&K[Z].attr.position[1]-K[Z].deltaY;if(ee)for(let te=0;te<K.length;te+=1)K[te].deltaY+=ee},V=function(){const K=C.map(C.keys(R.ideas),parseFloat),Q=M?C.filter(K,function(Z){return M(Z,R.id)}):K,J=C.filter(Q,function(Z){return!I(R.ideas[Z])});return C.sortBy(J,Math.abs)},Y=P(R,O.level);return C.extend(O,Y),O.outline=T.outlineFromDimensions(Y),function(){return!(C.isEmpty(R.ideas)||R.attr&&R.attr.collapsed)}()&&(O.subtrees=C.map(function(){const K=[];return C.each(V(),function(Q){K.push(R.ideas[Q])}),K}(),function(K){return N(K,P,D,M,O.level+1)}),!C.isEmpty(O.subtrees)&&function(K){let Q,J,Z,ee,te;C.each(K,function(ae){ae.deltaX=Y.width+D,Z=ae.attr&&ae.attr.position&&ae.attr.position[0],Z&&Z>ae.deltaX?(ee=Z-ae.deltaX,ae.deltaX=Z):ee=0,Q?(te=ae.outline.indent(ee,D),J=te.initialHeight(),Q=te.stackBelow(Q,D),ae.deltaY=Math.round(Q.initialHeight()-J/2-ae.height/2)):Q=ae.outline.indent(ee,D)}),K&&K.length&&(U(K,Math.round(0.5*(Y.height-Q.initialHeight()))),Q=Q.expand(Math.round(K[0].deltaY-0.5*Y.height),Math.round(K[K.length-1].deltaY+K[K.length-1].height-0.5*Y.height))),O.outline=Q.insertAtStart(Y,D)}(O.subtrees)),new L(O)};u.exports={Tree:L,calculateTree:N}},function(u,h,E){const C=E(1);u.exports=function(T){'use strict';return C(document.createElementNS('http://www.w3.org/2000/svg',T||'svg'))}},function(u,h,E){const C=E(1),I=E(0),T=E(90),L=E(25).Connectors,N=E(2).URLHelper,R=E(25).foregroundStyle,P=E(2).formattedNodeTitle,D=E(250),M=function(U){'use strict';return U.replace(/[^A-Za-z0-9_-]/g,'_')},W=function(U){'use strict';return M('connector_'+U.from+'_'+U.to)},O=function(U){'use strict';return M('link_'+U.ideaIdFrom+'_'+U.ideaIdTo)},H=function(U){'use strict';return M('node_'+U)};E(114),E(259),C.fn.setThemeClassList=function(U){'use strict';const z=this[0],V=function(G){return I.filter(G,function(K){return /^level_.+/.test(K)||/^attr_.+/.test(K)})},X=V(z.classList),Y=U&&U.length&&V(U);return z.classList.remove.apply(z.classList,X),Y&&Y.length&&z.classList.add.apply(z.classList,Y),this},C.fn.getBox=function(){'use strict';const U=this&&this[0];return!!U&&{top:U.offsetTop,left:U.offsetLeft,width:U.offsetWidth,height:U.offsetHeight}},C.fn.getDataBox=function(){'use strict';const U=this.data();return U&&U.width&&U.height?{top:U.y,left:U.x,width:U.width,height:U.height}:this.getBox()},C.fn.animateConnectorToPosition=function(U,z){'use strict';const V=C(this),X=V.data('nodeFrom'),Y=V.data('nodeTo'),G=X&&X.getDataBox(),K=Y&&Y.getDataBox(),Q={from:X&&X.getBox(),to:Y&&Y.getBox()};return z=z||1,G&&K&&Q&&Q.from.width===G.width&&Q.to.width===K.width&&Q.from.height===G.height&&Q.to.height===K.height&&Math.abs(Q.from.top-Q.to.top-(G.top-K.top))<z&&Math.abs(Q.from.left-Q.to.left-(G.left-K.left))<z&&(V.animate({left:Math.round(Math.min(G.left,K.left)),top:Math.round(Math.min(G.top,K.top))},U),!0)},C.fn.queueFadeOut=function(U){'use strict';const z=this;return z.fadeOut(I.extend({complete:function(){z.is(':focus')&&z.parents('[tabindex]').focus(),z.remove()}},U))},C.fn.queueFadeIn=function(U){'use strict';const z=this;return z.css('opacity',0).animate({opacity:1},I.extend({complete:function(){z.css('opacity','')}},U))},C.fn.updateStage=function(){'use strict';const U=this.data(),z={'min-width':Math.round(U.width-U.offsetX),'min-height':Math.round(U.height-U.offsetY),width:Math.round(U.width-U.offsetX),height:Math.round(U.height-U.offsetY),'transform-origin':'top left',transform:'translate3d('+Math.round(U.offsetX)+'px, '+Math.round(U.offsetY)+'px, 0)'};return U.scale&&1!==U.scale&&(z.transform='scale('+U.scale+') translate('+Math.round(U.offsetX)+'px, '+Math.round(U.offsetY)+'px)'),this.css(z),this},T.appendUnderLine=function(U,z,V){'use strict';return z.nodeUnderline&&(U.d+='M'+(z.nodeUnderline.from.x-V.left)+','+(z.nodeUnderline.from.y-V.top)+' H'+(z.nodeUnderline.to.x-V.left)),U},C.fn.updateConnector=function(U){'use strict';return C.each(this,function(){let z=!1,G=!1,V,X,Y;const K=C(this),Q=K.data('nodeFrom'),J=K.data('nodeTo'),Z=function(ee,te){const ae=ee.data().innerRect;ae&&(te.left+=ae.dx,te.top+=ae.dy,te.width=ae.width,te.height=ae.height)};if(!Q||!J||0===Q.length||0===J.length)return void K.hide();U?(X=Q.getDataBox(),Y=J.getDataBox()):(X=Q.getBox(),Y=J.getBox()),Z(Q,X),Z(J,Y),X.styles=Q.data('styles'),Y.styles=J.data('styles'),G={from:X,to:Y,theme:T.theme&&T.theme.name};I.isEqual(G,K.data('changeCheck'))||(K.data('changeCheck',G),z=L.themePath(X,Y,T.theme),V=K.find('path'),K.css(z.position),0===V.length&&(V=D('path').attr('class','mapjs-connector').appendTo(K)),V.attr({d:z.d,stroke:z.color,'stroke-width':z.width,fill:'transparent'}))})},C.fn.updateLink=function(){'use strict';return C.each(this,function(){const U=C(this),z=U.data('nodeFrom'),V=U.data('nodeTo'),X=Math.tan(Math.PI/9),G=I.pick(U.data(),'lineStyle','arrow','color');let K=!1,Q=U.find('path.mapjs-link'),J=U.find('path.mapjs-link-hit'),Z=U.find('path.mapjs-arrow'),ee=!1,te=!1,ae=!1,ie,oe,re,de,se,le,ce,pe,ue;if(!z||!V||0===z.length||0===V.length)return void U.hide();ee=z.getBox(),te=V.getBox(),ae={from:ee,to:te,attrs:G};I.isEqual(ae,U.data('changeCheck'))||(U.data('changeCheck',ae),K=L.linkPath(ee,te),U.css(K.position),0===Q.length&&(Q=D('path').attr('class','mapjs-link').appendTo(U)),Q.attr({d:K.d,'stroke-dasharray':{dashed:'8, 8',solid:''}[G.lineStyle]}).css('stroke',G.color),0===J.length&&(J=D('path').attr('class','mapjs-link-hit').appendTo(U)),J.attr({d:K.d}),G.arrow?(0===Z.length&&(Z=D('path').attr('class','mapjs-arrow').appendTo(U)),se=14,pe=K.conn.to.x-K.conn.from.x,ue=K.conn.to.y-K.conn.from.y,0===pe?(le=0>ue?-1:1,ie=K.conn.to.x+se*Math.sin(X)*le,re=K.conn.to.x-se*Math.sin(X)*le,oe=K.conn.to.y-se*Math.cos(X)*le,de=K.conn.to.y-se*Math.cos(X)*le):(ce=ue/pe,K.conn.from.x<K.conn.to.x&&(se=-se),ie=K.conn.to.x+(1-ce*X)*se/Math.sqrt((1+ce*ce)*(1+X*X)),oe=K.conn.to.y+(ce+X)*se/Math.sqrt((1+ce*ce)*(1+X*X)),re=K.conn.to.x+(1+ce*X)*se/Math.sqrt((1+ce*ce)*(1+X*X)),de=K.conn.to.y+(ce-X)*se/Math.sqrt((1+ce*ce)*(1+X*X))),Z.attr('d','M'+Math.round(ie-K.position.left)+','+Math.round(oe-K.position.top)+'L'+Math.round(K.conn.to.x-K.position.left)+','+Math.round(K.conn.to.y-K.position.top)+'L'+Math.round(re-K.position.left)+','+Math.round(de-K.position.top)+'Z').css('fill',G.color).show()):Z.hide())})},C.fn.addNodeCacheMark=function(U){'use strict';this.data('nodeCacheMark',T.nodeCacheMark(U))},C.fn.updateNodeContent=function(U,z,V){'use strict';const X=C(this),Y=function(){let ve=X.find('[data-mapjs-role=title]');return 0===ve.length&&(ve=C('<span>').attr('data-mapjs-role','title').appendTo(X)),ve},G=function(){let ve=X.find('[data-mapjs-role=decorations]');return 0===ve.length&&(ve=C('<div data-mapjs-role="decorations" class="mapjs-decorations">').on('mousedown click',function(xe){xe.stopPropagation(),xe.stopImmediatePropagation()}).appendTo(X)),ve},ee=function(ve){const xe=P(ve,25),be=T.nodeTextPadding||11,we=Y(),Ee=we[0],ke=U.attr&&U.attr.style&&U.attr.style.width;let Ce;we.text(xe.trim()),X.data('title',ve),we.css({'max-width':'','min-width':''}),ke&&we.css({'max-width':ke,'min-width':ke}),Ee.scrollWidth-be>Ee.offsetWidth?we.css('max-width',Ee.scrollWidth+'px'):!ke&&(Ce=Ee.offsetHeight,we.css('min-width',we.css('max-width')),Ee.offsetHeight===Ce&&we.css('min-width',''))},oe=V||U.level,se=T.theme&&T.theme.attributeValue||function(ve,xe,be,we){return we},le=T.theme&&T.theme.nodeStyles||function(){return['default']},ce=le(oe,U.attr),pe=se(['node'],ce,['border','type'],'surround'),ue=se(['node'],ce,['decorations','edge'],''),he=se(['node'],ce,['decorations','overlap'],''),me=U.attr&&U.attr.group,fe={x:Math.round(U.x),y:Math.round(U.y),width:Math.round(U.width),height:Math.round(U.height),nodeId:U.id,styles:ce};let ye;return fe.innerRect=I.pick(fe,['width','height']),fe.innerRect.dx=0,fe.innerRect.dy=0,me?(this.css({margin:'',width:U.width,height:U.height}),ee('')):(ee(U.title),function(ve){const xe=N.getLink(ve);let be=X.find('a.mapjs-hyperlink');return xe?void(0===be.length&&(be=C('<a target="_blank" class="mapjs-hyperlink icon-hyperlink"></a>').addClass().appendTo(G())),be.attr('href',xe).show()):void be.hide()}(U.title),function(ve){let xe=X.find('.mapjs-label');return ve||0===ve?void(0===xe.length&&(xe=C('<span class="mapjs-label"></span>').appendTo(G())),xe.text(ve).show()):void xe.hide()}(U.label),function(){const ve=U.attr&&U.attr.note;let xe=X.find('a.mapjs-note');return ve?void(0===xe.length&&(xe=C('<a href="#" class="mapjs-note icon-note"></a>').appendTo(G()).click(function(){X.trigger('decoration-click','note')})),xe.show()):void xe.hide()}(),function(){const ve=U.attr&&U.attr.attachment;let xe=X.find('a.mapjs-attachment');return ve?void(0===xe.length&&(xe=C('<a href="#" class="mapjs-attachment icon-attachment"></a>').appendTo(G()).click(function(){X.trigger('attachment-click'),X.trigger('decoration-click','attachment')})),xe.show()):void xe.hide()}(),this.css({margin:'',width:'',height:''}),'left'===ue?(fe.innerRect.dx=G().outerWidth(),fe.innerRect.width=fe.width-G().outerWidth(),X.css('margin-left',G().outerWidth())):'right'===ue?(fe.innerRect.width=fe.width-G().outerWidth(),X.css('margin-right',G().outerWidth())):'top'===ue?(ye=G().outerHeight()*(he?0.5:1),fe.innerRect.dy=ye,fe.innerRect.height=fe.height-ye,ye&&X.css('margin-top',ye)):'bottom'===ue&&(ye=G().outerHeight()*(he?0.5:1),fe.innerRect.height=fe.height-ye,X.css('margin-bottom',G().outerHeight()*(he?0.5:1)))),X.setThemeClassList(ce).attr('mapjs-level',oe),X.data(fe).addNodeCacheMark(U),function(ve){let xe=U.attr&&U.attr.style&&U.attr.style.background;('false'===xe||'transparent'===xe)&&(xe=!1),X.removeClass('mapjs-node-dark mapjs-node-white mapjs-node-light mapjs-node-colortext'),X.css({color:'','background-color':''}),xe&&(ve?X.css('color',xe):(X.css('background-color',xe),X.addClass({color:'mapjs-node-light',lightColor:'mapjs-node-dark',darkColor:'mapjs-node-white'}[R(xe)]))),ve&&X.addClass('mapjs-node-colortext')}('surround'!==pe),function(ve){let xe,be,we,Ee;const ke=Y(),Ce={'min-height':'','min-width':'','background-image':'','background-repeat':'','background-size':'','background-position':''},Se={'margin-top':'','margin-left':''};X.css({padding:''}),ve&&(Ee=parseInt(X.css('padding-left'),10),xe=ke.outerHeight(),be=ke.outerWidth(),we=parseInt(ke.css('max-width'),10),I.extend(Ce,{'background-image':'url("'+(z?z(ve.url):ve.url)+'")','background-repeat':'no-repeat','background-size':ve.width+'px '+ve.height+'px','background-position':'center center'}),'top'===ve.position||'bottom'===ve.position?(Ce['background-position']='top'===ve.position?'center '+Ee+'px':T.fixedLayout?'center '+(Ee+xe)+'px':'center '+ve.position+' '+Ee+'px',Ce['padding-'+ve.position]=ve.height+2*Ee,Ce['min-width']=ve.width,ve.width>we&&(Se['margin-left']=Math.round((ve.width-we)/2))):'left'===ve.position||'right'===ve.position?(Ce['background-position']='left'===ve.position?Ee+'px center':T.fixedLayout?be+2*Ee+'px center ':ve.position+' '+Ee+'px center',Ce['padding-'+ve.position]=ve.width+2*Ee,ve.height>xe&&(Se['margin-top']=Math.round((ve.height-xe)/2),Ce['min-height']=ve.height)):(ve.height>xe&&(Se['margin-top']=Math.round((ve.height-xe)/2),Ce['min-height']=ve.height),Ce['min-width']=ve.width,ve.width>we&&(Se['margin-left']=Math.round((ve.width-we)/2)))),X.css(Ce),ke.css(Se)}(U.attr&&U.attr.icon),function(){U.attr&&U.attr.collapsed?X.addClass('collapsed'):X.removeClass('collapsed')}(),X.trigger('mapjs:resize'),X},C.fn.placeCaretAtEnd=function(){'use strict';const U=this[0];let z,V,X;window.getSelection&&document.createRange?(z=document.createRange(),z.selectNodeContents(U),z.collapse(!1),V=window.getSelection(),V.removeAllRanges(),V.addRange(z)):document.body.createTextRange&&(X=document.body.createTextRange(),X.moveToElementText(U),X.collapse(!1),X.select())},C.fn.selectAll=function(){'use strict';const U=this[0];let z,V,X;window.getSelection&&document.createRange?(z=document.createRange(),z.selectNodeContents(U),V=window.getSelection(),V.removeAllRanges(),V.addRange(z)):document.body.createTextRange&&(X=document.body.createTextRange(),X.moveToElementText(U),X.select())},C.fn.innerText=function(){'use strict';const U=this.html(),z=/<br\/?>/.test(U),V=/<div>/.test(U);if(V&&this[0].innerText)return this[0].innerText.trim();return z?U.replace(/<br\/?>/gi,'\n').replace(/(<([^>]+)>)/gi,''):this.text()},C.fn.editNode=function(U){'use strict';const z=this,V=this.find('[data-mapjs-role=title]'),X=this.data('title'),Y=V.text(),G=C.Deferred(),K=function(){te(),V.css('word-break',''),V.removeAttr('contenteditable'),z.shadowDraggable()},Q=function(){const ae=V.innerText();return ae===X?J():void(K(),G.resolve(ae))},J=function(){K(),V.text(Y),G.reject()},Z=function(ae){const ie=13;ae.shiftKey&&ae.which===ie||(ae.which===ie?(Q(),ae.stopPropagation()):ae.which===27?(J(),ae.stopPropagation()):ae.which===9||ae.which===83&&(ae.metaKey||ae.ctrlKey)&&!ae.altKey?(Q(),ae.preventDefault()):!ae.shiftKey&&ae.which===90&&(ae.metaKey||ae.ctrlKey)&&!ae.altKey&&(V.text()===X&&J(),ae.stopPropagation()))},te=function(){V.off('blur',Q).off('keydown',Z)};return function(){V.on('blur',Q).on('keydown',Z)}(),X!==Y&&V.css('word-break','break-all'),V.text(X).attr('contenteditable',!0).focus(),U?V.selectAll():X&&V.placeCaretAtEnd(),z.shadowDraggable({disable:!0}),G.promise()},C.fn.updateReorderBounds=function(U,z,V){'use strict';const X=this;return U?void(X.show(),X.attr('mapjs-edge',U.edge),'top'===U.edge?X.css({top:U.minY,left:Math.round(V.x-X.width()/2)}):X.css({top:Math.round(V.y-X.height()/2),left:U.x-('left'===U.edge?X.width():0)})):void X.hide()},C.fn.createNode=function(U){'use strict';return C('<div>').attr({id:H(U.id),tabindex:0,'data-mapjs-role':'node'}).css({display:'block',position:'absolute'}).addClass('mapjs-node').appendTo(this)},C.fn.createConnector=function(U){'use strict';return D().attr({id:W(U),'data-mapjs-role':'connector','class':'mapjs-draw-container'}).data({nodeFrom:this.nodeWithId(U.from),nodeTo:this.nodeWithId(U.to)}).appendTo(this)},C.fn.createLink=function(U){'use strict';const z=I.extend({color:'red',lineStyle:'dashed'},U.attr&&U.attr.style);return D().attr({id:O(U),'data-mapjs-role':'link','class':'mapjs-draw-container'}).data({nodeFrom:this.nodeWithId(U.ideaIdFrom),nodeTo:this.nodeWithId(U.ideaIdTo)}).data(z).appendTo(this)},C.fn.nodeWithId=function(U){'use strict';return this.find('#'+H(U))},C.fn.findConnector=function(U){'use strict';return this.find('#'+W(U))},C.fn.findLink=function(U){'use strict';return this.find('#'+O(U))},C.fn.createReorderBounds=function(){'use strict';const U=C('<div>').attr({'data-mapjs-role':'reorder-bounds','class':'mapjs-reorder-bounds'}).hide().css('position','absolute').appendTo(this);return U},T.viewController=function(U,z,V,X,Y,G){'use strict';let K=!1,Q=C(),J=C(),Z;const ee=z.parent(),te={duration:400,queue:'nodeQueue',easing:'linear'},ae=U.isEditingEnabled()?z.createReorderBounds():C('<div>'),ie=function(){return Z?Z:(Z={left:ee.scrollLeft(),top:ee.scrollTop(),innerWidth:ee.innerWidth(),innerHeight:ee.innerHeight()},Z)},oe=function(xe,be){const we=z.data(),Ee=ie();return{x:we.scale*(xe+we.offsetX)-Ee.left,y:we.scale*(be+we.offsetY)-Ee.top}},re=function(xe,be){const we=z.data(),Ee=ie();return{x:(Ee.left+xe)/we.scale-we.offsetX,y:(Ee.top+be)/we.scale-we.offsetY}},de=function(){const xe=C(this);xe.css({left:xe.data('x'),top:xe.data('y')}).trigger('mapjs:move')},se=function(){const xe=C(this);xe.clearQueue(te.queue).animate({left:xe.data('x'),top:xe.data('y'),opacity:1},I.extend({complete:function(){xe.css('opacity',''),xe.each(de)}},te)).trigger('mapjs:animatemove')},le=function(xe,be){const we=z.data();let Ee=!1;xe<-1*we.offsetX&&(we.width=we.width-we.offsetX-xe,we.offsetX=-1*xe,Ee=!0),be<-1*we.offsetY&&(we.height=we.height-we.offsetY-be,we.offsetY=-1*be,Ee=!0),xe>we.width-we.offsetX&&(we.width=we.offsetX+xe,Ee=!0),be>we.height-we.offsetY&&(we.height=we.offsetY+be,Ee=!0),Ee&&z.updateStage()},ce=function(){return C(this).each(function(){const xe=C(this).data(),be=T.stageMargin||{top:0,left:0,bottom:0,right:0};le(xe.x-be.left,xe.y-be.top),le(xe.x+xe.width+be.right,xe.y+xe.height+be.bottom)})},pe=function(xe,be,we){const Ee=z.data(),ke={x:Math.round(ee.innerWidth()/2),y:Math.round(ee.innerHeight()/2)},Ce=T.stageVisibilityMargin||{top:0,left:0,bottom:0,right:0};let Se=!1,Ie=!1;le(xe-ke.x/Ee.scale,be-ke.y/Ee.scale),le(xe+ke.x/Ee.scale-Ce.left,be+ke.y/Ee.scale-Ce.top),Se=Ee.scale*(xe+Ee.offsetX)-ke.x,Ie=Ee.scale*(be+Ee.offsetY)-ke.y,ee.finish(),we?ee.animate({scrollLeft:Se,scrollTop:Ie},{duration:400}):(ee.scrollLeft(Se),ee.scrollTop(Ie))},ue=function(){return re(Math.round(ee.innerWidth()/2),Math.round(ee.innerHeight()/2))},he=function(xe){if(xe&&0!==xe.length){ee.finish();const be=xe.data(),we=oe(be.x,be.y),Ee=oe(be.x+be.width,be.y+be.height),ke={},Ce=T.stageVisibilityMargin||{top:10,left:10,bottom:10,right:10};0>we.x-Ce.left?ke.scrollLeft=ee.scrollLeft()+we.x-Ce.left:Ee.x+Ce.right>ee.innerWidth()&&(ke.scrollLeft=ee.scrollLeft()+Ee.x-ee.innerWidth()+Ce.right),0>we.y-Ce.top?ke.scrollTop=ee.scrollTop()+we.y-Ce.top:Ee.y+Ce.bottom>ee.innerHeight()&&(ke.scrollTop=ee.scrollTop()+Ee.y-ee.innerHeight()+Ce.bottom),I.isEmpty(ke)||ee.animate(ke,{duration:100})}},ge=function(xe){const be=xe&&xe.gesture&&xe.gesture.center||xe,we=ee.offset();let Ee;if(be&&(Ee={x:be.pageX-we.left,y:be.pageY-we.top},0<=Ee.x&&Ee.x<=ee.innerWidth()&&0<=Ee.y&&Ee.y<=ee.innerHeight()))return Ee},me=function(xe){const be=ge(xe);if(be)return re(be.x,be.y)},fe=function(){(K||!1==K)&&(C('.mapjs-node').removeClass('droppable'),K=void 0)},ye=function(xe){z.nodeWithId(xe).addClass('droppable'),K=xe},ve=function(xe,be){return!I.isEmpty(xe)&&!!be&&I.find(xe,function(Ee){let ke=be.x;return'right'===Ee.edge&&(ke+=be.width),Ee.x&&Ee.margin?Math.abs(ke-Ee.x)<2*Ee.margin&&be.y<Ee.maxY&&be.y>Ee.minY:be.y<Ee.maxY&&be.y>Ee.minY&&be.x<Ee.maxX&&be.x>Ee.minX})};ee.on('scroll',function(){Z=void 0}),X&&X.addEventListener('imageInserted',function(xe,be,we,Ee){const ke=me(Ee);U.dropImage(xe,be,we,ke&&ke.x,ke&&ke.y)}),U.addEventListener('nodeCreated',function(xe){let be;const we=z.createNode(xe).queueFadeIn(te).updateNodeContent(xe,Y).nodeResizeWidget(xe.id,U,me).on('tap',function(Ee){const ke=Ee.gesture&&Ee.gesture.srcEvent||Ee;ke.button&&-1!==ke.button||(U.clickNode(xe.id,ke),Ee&&Ee.stopPropagation(),Ee&&Ee.gesture&&Ee.gesture.stopPropagation())}).on('doubletap',function(Ee){return Ee&&(Ee.stopPropagation(),Ee.gesture&&Ee.gesture.stopPropagation()),U.isEditingEnabled()?void U.editNode('mouse'):void U.toggleCollapse('mouse')}).on('attachment-click',function(){U.openAttachment('mouse',xe.id)}).on('decoration-click',function(Ee,ke){U.decorationAction('mouse',xe.id,ke)}).each(ce).each(de).on('mm:start-dragging mm:start-dragging-shadow',function(Ee){Ee&&Ee.relatedTarget===this&&(U.selectNode(xe.id),be=U.getReorderBoundary(xe.id),we.addClass('dragging'))}).on('mm:drag',function(Ee){const ke=me(Ee),Ce=Ee.currentPosition&&me({pageX:Ee.currentPosition.left,pageY:Ee.currentPosition.top}),Se=Ee&&Ee.gesture&&Ee.gesture.srcEvent&&Ee.gesture.srcEvent.shiftKey,Ie=ke&&U.getNodeIdAtPosition(ke.x,ke.y);let Te;return ke?void(Se||Ie||!Ce?ae.hide():(Ce.width=we.outerWidth(),Ce.height=we.outerHeight(),Te=ve(be,Ce),ae.updateReorderBounds(Te,Ce,ke)),Ie&&Ie!==xe.id?Ie!==K&&(fe(),Ie&&ye(Ie)):fe()):void fe()}).on('contextmenu',function(Ee){if(U.selectNode(xe.id),U.requestContextMenu(Ee.pageX,Ee.pageY))return Ee.preventDefault(),!1}).on('mm:stop-dragging',function(Ee){we.removeClass('dragging'),ae.hide();let ke,Ce;const Se=Ee&&Ee.gesture&&Ee.gesture.srcEvent&&Ee.gesture.srcEvent.shiftKey,Ie=me(Ee),Te=Ie&&U.getNodeIdAtPosition(Ie.x,Ie.y),Ae=Ee.finalPosition&&me({pageX:Ee.finalPosition.left,pageY:Ee.finalPosition.top});if(fe(),!!Ie)return Te&&Te!==xe.id?ke=U.dropNode(xe.id,Te,!!Se):(Ae.width=we.outerWidth(),Ae.height=we.outerHeight(),Ce=!!Se||!ve(be,Ae),ke=Ce?U.positionNodeAt(xe.id,Ae.x,Ae.y,Ce):U.positionNodeAt(xe.id,Ie.x,Ie.y,Ce)),ke}).on('mm:cancel-dragging',function(){fe(),we.removeClass('dragging'),ae.hide()}).on('mm:resize',function(Ee){U.setNodeWidth('mouse',xe.id,Ee.nodeWidth)});V&&we.on('hold',function(Ee){const ke=Ee.gesture&&Ee.gesture.srcEvent||Ee;if(U.clickNode(xe.id,ke),U.requestContextMenu(Ee.gesture.center.pageX,Ee.gesture.center.pageY))return Ee.preventDefault(),Ee.gesture&&(Ee.gesture.preventDefault(),Ee.gesture.stopPropagation()),!1}),we.css('min-width',we.css('width')),U.isEditingEnabled()&&we.shadowDraggable()}),U.addEventListener('nodeSelectionChanged',function(xe,be){const we=z.nodeWithId(xe);be?(we.addClass('selected'),he(we)):we.removeClass('selected')}),U.addEventListener('nodeRemoved',function(xe){z.nodeWithId(xe.id).queueFadeOut(te)}),U.addEventListener('nodeMoved',function(xe){const be=ie(),we=z.nodeWithId(xe.id).data({x:Math.round(xe.x),y:Math.round(xe.y),width:Math.round(xe.width),height:Math.round(xe.height)}).each(ce),Ee=oe(Math.round(xe.x),Math.round(xe.y)),ke=oe(Math.round(xe.x+xe.width),Math.round(xe.y+xe.height));0>ke.x||0>ke.y||Ee.x>be.innerWidth||Ee.y>be.innerHeight?we.each(de):we.each(se)}),U.addEventListener('nodeTitleChanged nodeAttrChanged nodeLabelChanged',function(xe){z.nodeWithId(xe.id).updateNodeContent(xe,Y)}),U.addEventListener('connectorCreated',function(xe){const be=z.createConnector(xe).queueFadeIn(te).updateConnector(!0);z.nodeWithId(xe.from).add(z.nodeWithId(xe.to)).on('mapjs:move',function(){be.updateConnector(!0)}).on('mapjs:resize',function(){be.updateConnector(!0)}).on('mm:drag',function(){be.updateConnector()}).on('mapjs:animatemove',function(){Q=Q.add(be)})}),U.addEventListener('connectorRemoved',function(xe){z.findConnector(xe).queueFadeOut(te)}),U.addEventListener('linkCreated',function(xe){const be=z.createLink(xe).queueFadeIn(te).updateLink();be.find('.mapjs-link-hit').on('tap',function(we){U.selectLink('mouse',xe,{x:we.gesture.center.pageX,y:we.gesture.center.pageY}),we.stopPropagation(),we.gesture.stopPropagation()}),z.nodeWithId(xe.ideaIdFrom).add(z.nodeWithId(xe.ideaIdTo)).on('mapjs:move mm:drag',function(){be.updateLink()}).on('mapjs:animatemove',function(){J=J.add(be)})}),U.addEventListener('linkRemoved',function(xe){z.findLink(xe).queueFadeOut(te)}),U.addEventListener('mapScaleChanged',function(xe){const be=z.data('scale'),we=Math.max(Math.min(be*xe,5),0.2),Ee=ue();be===we||(z.data('scale',we).updateStage(),pe(Ee.x,Ee.y))}),U.addEventListener('nodeVisibilityRequested',function(xe){const be=xe||U.getCurrentlySelectedIdeaId(),we=z.nodeWithId(be);we&&(he(we),ee.finish())}),U.addEventListener('nodeFocusRequested',function(xe){const be=z.nodeWithId(xe).data(),we=Math.round(be.x+be.width/2),Ee=Math.round(be.y+be.height/2);1!==z.data('scale')&&z.data('scale',1).updateStage(),pe(we,Ee,!0)}),U.addEventListener('mapViewResetRequested',function(){z.data({scale:1,height:0,width:0,offsetX:0,offsetY:0}).updateStage(),z.children().andSelf().finish(te.queue),C(z).find('.mapjs-node').each(ce),C(z).find('[data-mapjs-role=connector]').updateConnector(!0),C(z).find('[data-mapjs-role=link]').updateLink(!0),pe(0,0),ee.focus()}),U.addEventListener('layoutChangeStarting',function(){Z=void 0,z.children().finish(te.queue),z.finish(te.queue)}),U.addEventListener('layoutChangeComplete',function(xe){let be=C(),we=C();xe&&xe.themeChanged?(z.children().andSelf().finish(te.queue),C(z).find('[data-mapjs-role=connector]').updateConnector(!0),C(z).find('[data-mapjs-role=link]').updateLink(!0)):(Q.each(function(){C(this).animateConnectorToPosition(te,2)||(be=be.add(this))}),J.each(function(){C(this).animateConnectorToPosition(te,2)||(we=we.add(this))}),z.animate({opacity:1},I.extend({progress:function(){be.updateConnector(),we.updateLink()},complete:function(){be.updateConnector(!0),we.updateLink(!0)}},te)),z.children().dequeue(te.queue),z.dequeue(te.queue)),Q=C(),J=C(),he(z.nodeWithId(U.getCurrentlySelectedIdeaId()))}),G&&G.inlineEditingDisabled||U.addEventListener('nodeEditRequested',function(xe,be,we){const Ee=z.nodeWithId(xe);U.setInputEnabled(!1),ee.finish(),Ee.editNode(be).done(function(ke){U.setInputEnabled(!0),U.updateTitle(xe,ke,we),Ee.focus()}).fail(function(){U.setInputEnabled(!0),we&&U.undo('internal'),Ee.focus()})}),U.addEventListener('addLinkModeToggled',function(xe){xe?z.addClass('mapjs-add-link'):z.removeClass('mapjs-add-link')}),U.addEventListener('linkAttrChanged',function(xe){const be=I.extend({arrow:!1},xe.attr&&xe.attr.style);z.findLink(xe).data(be).updateLink()}),U.addEventListener('activatedNodesChanged',function(xe,be){I.each(xe,function(we){z.nodeWithId(we).addClass('activated')}),I.each(be,function(we){z.nodeWithId(we).removeClass('activated')})})}},function(u,h,E){const C=E(1),I=E(0),T=E(90);E(216),E(251),C.fn.scrollWhenDragging=function(L){'use strict';return this.each(function(){const N=C(this);let R;N.on('dragstart',function(){L()&&(R={top:N.scrollTop(),left:N.scrollLeft()})}).on('drag',function(P){P.gesture&&R&&(N.scrollTop(R.top-P.gesture.deltaY),N.scrollLeft(R.left-P.gesture.deltaX))}).on('dragend',function(){R=void 0})})},C.fn.domMapWidget=function(L,N,R,P,D,M,W,O){'use strict';const H={'return':'insertDown','shift+return':'insertUp','shift+tab':'insertLeft','tab insert':'insertRight','del backspace':'removeSubIdea',left:'selectNodeLeft',up:'selectNodeUp',right:'selectNodeRight','shift+right':'activateNodeRight','shift+left':'activateNodeLeft','meta+right ctrl+right':'moveRight','meta+left ctrl+left':'moveLeft','meta+up ctrl+up':'moveUp','meta+down ctrl+down':'moveDown','shift+up':'activateNodeUp','shift+down':'activateNodeDown',down:'selectNodeDown','space f2':'editNode',f:'toggleCollapse','c meta+x ctrl+x':'cut','p meta+v ctrl+v':'paste','y meta+c ctrl+c':'copy','u meta+z ctrl+z':'undo','Esc 0 meta+0 ctrl+0':'resetView','r meta+shift+z ctrl+shift+z meta+y ctrl+y':'redo','meta+plus ctrl+plus z':'scaleUp','meta+minus ctrl+minus shift+z':'scaleDown','ctrl+shift+v meta+shift+v':'pasteStyle',Esc:'cancelCurrentAction'},U={'[':'activateChildren','{':'activateNodeAndChildren','=':'activateSiblingNodes','.':'activateSelectedNode','/':'toggleCollapse',a:'openAttachment',i:'editIcon'},z=this;let V=!0;return N.addEventListener('inputEnabledChanged',function(X,Y){V=X,X&&!Y&&z.focus()}),this.each(function(){const X=C(this),Y=C('<div>').css({position:'relative'}).attr('data-mapjs-role','stage').appendTo(X).data({offsetX:X.innerWidth()/2,offsetY:X.innerHeight()/2,width:X.innerWidth()-20,height:X.innerHeight()-20,scale:1}).updateStage();let G=!1;X.css('overflow','auto').attr('tabindex',1),N.isEditingEnabled()&&(D||X).simpleDraggableContainer(),R?X.on('doubletap',function(K){if(N.requestContextMenu(K.gesture.center.pageX,K.gesture.center.pageY))return K.preventDefault(),K.gesture.preventDefault(),!1}).on('pinch',function(K){let Q;K&&K.gesture&&K.gesture.scale&&(K.preventDefault(),K.gesture.preventDefault(),Q=K.gesture.scale,G&&(Q/=G),0.05>Math.abs(Q-1)||(G=K.gesture.scale,N.scale('touch',Q,{x:K.gesture.center.pageX-Y.data('offsetX'),y:K.gesture.center.pageY-Y.data('offsetY')})))}).on('gestureend',function(){G=!1}):(X.scrollWhenDragging(N.getInputEnabled),X.on('mousedown',function(K){K.target!==X[0]&&X.css('overflow','hidden')}),C(document).on('mouseup',function(){'auto'!==X.css('overflow')&&X.css('overflow','auto')}),X.imageDropWidget(P)),T.viewController(N,Y,R,P,M,O),I.each(H,function(K,Q){X.keydown(Q,function(J){V&&(J.stopImmediatePropagation(),J.preventDefault(),N[K]('keyboard'))})}),R||C(window).on('resize',function(){N.resetView()}),C(window).on('orientationchange',function(){W?N.centerOnNode(N.getSelectedNodeId()):N.resetView()}),C(document).on('keydown',function(K){const Q={61:'scaleUp',173:'scaleDown','U+003D':'scaleUp','U+002D':'scaleDown'};let J;K&&!K.altKey&&(K.ctrlKey||K.metaKey)&&(K.originalEvent&&K.originalEvent.keyIdentifier?J=Q[K.originalEvent.keyIdentifier]:'MozPrintableKey'===K.key&&(J=Q[K.which]),J&&V&&(K.preventDefault(),N[J]('keyboard')))}).on('wheel mousewheel',function(K){const Q=K.originalEvent.deltaX||-1*K.originalEvent.wheelDeltaX;0>Q&&0===X.scrollLeft()&&K.preventDefault(),0<Q&&0==X[0].scrollWidth-X.width()-X.scrollLeft()&&K.preventDefault()}),X.on('keypress',function(K){if(V&&!/INPUT|TEXTAREA/.test(K&&K.target&&K.target.tagName)){const Q=K.charCode||K.keyCode,J=String.fromCharCode(Q),Z=U[J];Z?(K.preventDefault(),N[Z]('keyboard')):9>=+J&&1<=+J&&(K.preventDefault(),N.activateLevel('keyboard',+J+1))}})})}},function(u,h,E){const C=E(1);u.exports=function(T,L){'use strict';const N=function(M){return /^data:image/.test(M)},R=function(M){let W=!1;if(N(M.src))return M.src;const O=document.createElement('canvas');return O.width=M.width,O.height=M.height,W=O.getContext('2d'),W.drawImage(M,0,0),O.toDataURL('image/png')},P=C.Deferred(),D=new Image;return D.onload=function(){try{P.resolve({dataUri:R(D),width:D.width,height:D.height})}catch(M){P.reject()}},D.onerror=function(){P.reject()},N(T)||(L?(D.crossOrigin='Anonymous',T=L+encodeURIComponent(T)):P.reject('no-cors')),D.src=T,P.promise()}},function(u,h,E){const C=E(1);C.fn.imageDropWidget=function(I){'use strict';return this.on('dragenter dragover',function(T){if(T.originalEvent.dataTransfer)return!1}).on('drop',function(T){const L=T.originalEvent.dataTransfer;let N;T.stopPropagation(),T.preventDefault(),L&&L.files&&0<L.files.length?I.insertFiles(L.files,T.originalEvent):L&&(N=L.getData('text/html'),I.insertHtmlContent(N,T.originalEvent))}),this}},function(u,h,E){const C=E(2).observable,I=E(1),T=E(0),L=E(253);u.exports=function(R,P){'use strict';const D=C(this),M=function(W){const O=I.Deferred(),H=new FileReader;return H.onload=function(U){O.resolve(U.target.result)},H.onerror=O.reject,H.onprogress=O.notify,H.readAsDataURL(W),O.promise()};D.insertDataUrl=function(W,O){D.dispatchEvent('imageLoadStarted'),L(W,R).then(function(H){let U=H.dataUri;P&&(U=P(U)),D.dispatchEvent('imageInserted',U,H.width,H.height,O)},function(H){D.dispatchEvent('imageInsertError',H)})},D.insertFiles=function(W,O){I.each(W,function(H,U){/^image\//.test(U.type)&&I.when(M(U)).done(function(z){D.insertDataUrl(z,O)})})},D.insertHtmlContent=function(W,O){const H=W.match(/img[^>]*src="([^"]*)"/);H&&0<H.length&&T.each(H.slice(1),function(U){D.insertDataUrl(U,O)})}}},function(u,h,E){const C=E(1);C.fn.linkEditWidget=function(I){'use strict';return this.each(function(){const T=C(this),L=T.find('.color'),N=T.find('.lineStyle'),R=T.find('.arrow');let P,D,M;I.addEventListener('linkSelected',function(W,O,H){P=W,T.show(),D=D||T.width(),M=M||T.height(),T.css({top:O.y-0.5*M-15+'px',left:O.x-0.5*D-15+'px'}),L.val(H.color).change(),N.val(H.lineStyle),R[H.arrow?'addClass':'removeClass']('active')}),I.addEventListener('mapMoveRequested',function(){T.hide()}),T.find('.delete').click(function(){I.removeLink('mouse',P.ideaIdFrom,P.ideaIdTo),T.hide()}),L.change(function(){I.updateLinkStyle('mouse',P.ideaIdFrom,P.ideaIdTo,'color',C(this).val())}),N.find('a').click(function(){I.updateLinkStyle('mouse',P.ideaIdFrom,P.ideaIdTo,'lineStyle',C(this).text())}),R.click(function(){I.updateLinkStyle('mouse',P.ideaIdFrom,P.ideaIdTo,'arrow',!R.hasClass('active'))}),T.mouseleave(T.hide.bind(T))})}},function(u,h,E){const C=E(0),I=E(113),T=E(25).LayoutModel,L=E(2).observable;u.exports=function(R,P,D,M,W){'use strict';let z=!0,V=!0,G=!1,K=[],Q=R,O,H,U,X,Y,J;const Z=this,ee=M||20,te=D||new I,ae=W&&W.layoutModel||new T({nodes:{},connectors:{}}),ie=function(ye){const ve=C.clone(K);K=0===ye.length?[J]:ye,Z.dispatchEvent('activatedNodesChanged',C.difference(K,ve),C.difference(ve,K))},oe=function(ye){const ve=U&&U(O);ve&&C.each(ye.nodes,function(xe,be){(ve[be]||0===ve[be])&&(xe.label=ve[be])})},re=function(ye,ve){const xe=C.min(ye,function(be){return Math.pow(be.x+be.width/2-ve.x-ve.width/2,2)+Math.pow(be.y+be.height/2-ve.y-ve.height/2,2)});return xe&&xe.id},de=function(ye,ve){let xe;const be=ae.getLayout(),we=be.theme!==ye.theme;Z.dispatchEvent('layoutChangeStarting',C.size(ye.nodes)-C.size(be.nodes)),oe(ye),C.each(be.connectors,function(Ee,ke){const Ce=ye.connectors[ke];Ce&&Ce.from===Ee.from&&Ce.to===Ee.to||Z.dispatchEvent('connectorRemoved',Ee)}),C.each(be.links,function(Ee,ke){const Ce=ye.links&&ye.links[ke];Ce||Z.dispatchEvent('linkRemoved',Ee)}),C.each(be.nodes,function(Ee,ke){const Ce=ye.nodes[ke];let Se;Ce||(ke==J&&Z.selectNode(re(ye.nodes,Ee)),Se=C.reject(K,function(Ie){return Ie==ke}),Se.length!==K.length&&ie(Se),Z.dispatchEvent('nodeRemoved',Ee,ke,ve))}),C.each(ye.nodes,function(Ee,ke){const Ce=be.nodes[ke];Ce?((Ee.x!==Ce.x||Ee.y!==Ce.y)&&Z.dispatchEvent('nodeMoved',Ee,ve),(Ee.width!==Ce.width||Ee.height!==Ce.height||Ee.level!==Ce.level||!C.isEqual(Ee.attr||{},Ce.attr||{})||we)&&Z.dispatchEvent('nodeAttrChanged',Ee,ve),Ee.title!==Ce.title&&Z.dispatchEvent('nodeTitleChanged',Ee,ve),Ee.label!==Ce.label&&Z.dispatchEvent('nodeLabelChanged',Ee,ve)):Z.dispatchEvent('nodeCreated',Ee,ve)}),C.each(ye.connectors,function(Ee,ke){const Ce=be.connectors[ke];Ce&&Ee.from===Ce.from&&Ee.to===Ce.to||Z.dispatchEvent('connectorCreated',Ee,ve)}),C.each(ye.links,function(Ee,ke){const Ce=be.links&&be.links[ke];Ce?!C.isEqual(Ee.attr||{},Ce&&Ce.attr||{})&&Z.dispatchEvent('linkAttrChanged',Ee,ve):Z.dispatchEvent('linkCreated',Ee,ve)}),we&&(xe={themeChanged:!0}),ae.setLayout(ye),Z.isInCollapse||Z.dispatchEvent('layoutChangeComplete',xe)},se=function(ye){X=J,Y=K.slice(0),Z.selectNode(ye)},le=function(ye){se(ye),Z.editNode(!1,!0,!0)},ce=function(){return J||O.getDefaultRootId()},pe=function(ye,ve,xe){G||(X=!1,Y=!1,Z.rebuildRequired(xe))},ue=function(){return O.findSubIdeaById(J)||O},he=function(ye,ve){const xe=O.findSubIdeaById(ve)||O;xe.getAttr('collapsed')&&O.updateAttr(ve,'collapsed',!1)},ge=function(ye,ve,xe){const be=O.findSubIdeaById(ve)||O;let we;return he(ye,ve),we=xe?O.addSubIdea(ve,xe):O.addSubIdea(ve),'top-down'===ae.getOrientation()&&0>be.findChildRankById(we)&&O.flip(we),we},me=function(ye){const ve=ye&&ae.getNode(ye);ve&&O.updateAttr(ye,'position',[ve.x,ve.y,1])},fe=function(ye,ve){ve?Z.dispatchEvent('analytic','mapModel',ye,ve):Z.dispatchEvent('analytic','mapModel',ye)};L(this),Z.pause=function(){G=!0},Z.resume=function(){G=!1,Z.rebuildRequired()},Z.getIdea=function(){return O},Z.isEditingEnabled=function(){return V},Z.getCurrentLayout=function(){return ae.getLayout()},Z.analytic=fe,Z.getCurrentlySelectedIdeaId=ce,Z.rebuildRequired=function(ye){O&&(ae.getLayout().theme!==(O.attr&&O.attr.theme)&&Z.dispatchEvent('themeChanged',O.attr&&O.attr.theme),de(Z.reactivate(Q(O)),ye))},this.setIdea=function(ye){O&&(O.removeEventListener('changed',pe),G=!1,ie([]),Z.dispatchEvent('nodeSelectionChanged',J,!1),J=void 0),O=ye,O.addEventListener('changed',pe),pe(),Z.selectNode(O.getDefaultRootId(),!0),Z.dispatchEvent('mapViewResetRequested')},this.setEditingEnabled=function(ye){V=ye},this.getEditingEnabled=function(){return V},this.setInputEnabled=function(ye,ve){z!==ye&&(z=ye,Z.dispatchEvent('inputEnabledChanged',ye,!!ve))},this.getInputEnabled=function(){return z},this.selectNode=function(ye,ve,xe){(ve||z&&(ye!==J||!Z.isActivated(ye)))&&(J&&Z.dispatchEvent('nodeSelectionChanged',J,!1),J=ye,xe?Z.activateNode('internal',ye):ie([ye]),Z.dispatchEvent('nodeSelectionChanged',ye,!0))},this.clickNode=function(ye,ve){const xe=ve&&ve.button&&-1!==ve.button;ve&&ve.altKey?Z.toggleLink('mouse',ye):ve&&ve.shiftKey?Z.toggleActivationOnNode('mouse',ye):H&&!xe?(this.toggleLink('mouse',ye),this.toggleAddLinkMode()):(this.selectNode(ye),xe&&-1!==xe&&z&&Z.dispatchEvent('contextMenuRequested',ye,ve.layerX,ve.layerY))},this.findIdeaById=function(ye){return O.id==ye?O:O.findSubIdeaById(ye)},this.getSelectedStyle=function(ye){return this.getStyleForId(J,ye)},this.getStyleForId=function(ye,ve){const xe=ae.getNode(ye);return xe&&xe.attr&&xe.attr.style&&xe.attr.style[ve]},this.toggleCollapse=function(ye){const ve=ue();let xe;xe=Z.isActivated(ve.id)&&0<C.size(ve.ideas)?ve.getAttr('collapsed'):Z.everyActivatedIs(function(be){const we=Z.findIdeaById(be);return we&&0<C.size(we.ideas)?we.getAttr('collapsed'):!0}),this.collapse(ye,!xe)},this.collapse=function(ye,ve){const xe=ce(),be=function(){return ae.getNode(xe)},Ee=be();let ke=!1;fe('collapse:'+ve,ye),Z.isInCollapse=!0,z&&Z.applyToActivated(function(Ce){const Se=Z.findIdeaById(Ce);Se&&(!ve||Se.ideas&&0<C.size(Se.ideas))&&O.updateAttr(Ce,'collapsed',ve)}),ke=be(),Ee&&ke&&function(Ce,Se,Ie){(Se||Ie)&&C.each(Ce,function(Te){Te.x+=Se,Te.y+=Ie,Z.dispatchEvent('nodeMoved',Te,'scroll')})}(ae.getLayout().nodes,Ee.x-ke.x,Ee.y-ke.y),Z.isInCollapse=!1,Z.dispatchEvent('layoutChangeComplete')},this.updateStyle=function(ye,ve,xe){return!!V&&void(z&&(fe('updateStyle:'+ve,ye),Z.applyToActivated(function(be){Z.getStyleForId(be,ve)!=xe&&O.mergeAttrProperty(be,'style',ve,xe)})))},this.updateLinkStyle=function(ye,ve,xe,be,we){const Ee=C.extend({},O.getLinkAttr(ve,xe,'style'));return!!V&&void(z&&(fe('updateLinkStyle:'+be,ye),Ee[be]=we,O.updateLinkAttr(ve,xe,'style',Ee)))},this.addSubIdea=function(ye,ve,xe){const be=ve||J;let we;return!!V&&void(fe('addSubIdea',ye),z&&(O.batch(function(){we=ge(ye,be,xe)}),we&&(xe?se(we):le(we))))},Z.addGroupSubidea=function(ye,ve){const xe=ve&&ve.parentId,be=ve&&ve.group||!0,we=xe||J;let Ee,ke;return!!V&&void(fe('addGroupSubidea',ye),z&&(O.batch(function(){Ee=ge(ye,we,'group'),Ee&&(O.updateAttr(Ee,'contentLocked',!0),O.updateAttr(Ee,'group',be),ke=O.addSubIdea(Ee))}),ke&&le(ke)))},this.insertIntermediateGroup=function(ye,ve){const xe=[],be=ve&&ve.group||!0;return!!V&&(!z||O.isRootNode(J)?!1:void(fe('insertIntermediate',ye),Z.applyToActivated(function(we){xe.push(we)}),O.insertIntermediateMultiple(xe,{title:'group',attr:{group:be,contentLocked:!0}})))},this.insertIntermediate=function(ye){const ve=[];let xe=!1;return!!V&&!!z&&void(fe('insertIntermediate',ye),Z.applyToActivated(function(be){ve.push(be)}),xe=O.insertIntermediateMultiple(ve),xe&&le(xe))},this.flip=function(ye){const ve=ae.getNode(J);return!!V&&(fe('flip',ye),!z||O.isRootNode(J)?!1:ve&&2===ve.level&&O.flip(J))},this.addSiblingIdeaBefore=function(ye){let ve,xe,be,we;return!!V&&(fe('addSiblingIdeaBefore',ye),!!z&&void(xe=O.isRootNode(J)?O:O.findParent(J),O.batch(function(){xe!==O&&he(ye,xe.id),ve=O.addSubIdea(xe.id),ve&&(be=xe.findChildRankById(J),we=xe.findChildRankById(ve),0>be*we&&O.flip(ve),O.positionBefore(ve,J))}),ve&&le(ve)))},this.addSiblingIdea=function(ye,ve,xe){let be,we,Ee,ke,Ce;const Se=ve||J;return!!V&&void(fe('addSiblingIdea',ye),z&&(Ee=O.isRootNode(Se)?O:O.findParent(Se),O.batch(function(){Ee!==O&&he(ye,Ee.id),be=xe?O.addSubIdea(Ee.id,xe):O.addSubIdea(Ee.id),be&&(we=O.nextSiblingId(Se),ke=Ee.findChildRankById(Se),Ce=Ee.findChildRankById(be),0>ke*Ce&&O.flip(be),we&&O.positionBefore(be,we))}),be&&(xe?se(be):le(be))))},this.removeSubIdea=function(ye){let ve;return!!V&&(fe('removeSubIdea',ye),z&&Z.applyToActivated(function(xe){ve=O.removeSubIdea(xe)}),ve)},this.updateTitle=function(ye,ve,xe){xe?O.initialiseTitle(ye,ve):O.updateTitle(ye,ve)},this.editNode=function(ye,ve,xe){const be=ue(),we=be.title;return!!V&&(ye&&fe('editNode',ye),!!z&&(be.attr&&be.attr.contentLocked?!1:void(C.include(P,we)&&(ve=!0),Z.dispatchEvent('nodeEditRequested',J,ve,!!xe))))},this.editIcon=function(ye){return!!V&&(ye&&fe('editIcon',ye),!!z&&void Z.dispatchEvent('nodeIconEditRequested',J))},this.scaleUp=function(ye){Z.scale(ye,1.25)},this.scaleDown=function(ye){Z.scale(ye,0.8)},this.scale=function(ye,ve,xe){z&&(Z.dispatchEvent('mapScaleChanged',ve,xe),fe(1>ve?'scaleDown':'scaleUp',ye))},this.move=function(ye,ve,xe){z&&(Z.dispatchEvent('mapMoveRequested',ve,xe),fe('move',ye))},this.resetView=function(ye){const ve=ae.getNode(J),xe=ve&&ve.rootId||O&&O.getDefaultRootId();!xe||z&&(Z.selectNode(xe),Z.dispatchEvent('mapViewResetRequested'),fe('resetView',ye))},this.decorationAction=function(ye,ve,xe){fe('decorationAction',ye),Z.dispatchEvent('decorationActionRequested',ve,xe)},this.openAttachment=function(ye,ve){fe('openAttachment',ye),ve=ve||J;const xe=ae.getNode(ve),be=xe&&xe.attr&&xe.attr.attachment;xe&&Z.dispatchEvent('attachmentOpened',ve,be)},this.setAttachment=function(ye,ve,xe){const be=!!(xe&&xe.content);return!!V&&void(fe('setAttachment',ye),O.updateAttr(ve,'attachment',be&&xe))},this.toggleLink=function(ye,ve){const xe=C.find(O.links,function(be){return be.ideaIdFrom+''===ve+''&&be.ideaIdTo+''===J+''||be.ideaIdTo+''===ve+''&&be.ideaIdFrom+''===J+''});xe?Z.removeLink(ye,xe.ideaIdFrom,xe.ideaIdTo):Z.addLink(ye,ve)},this.addLink=function(ye,ve){return!!V&&void(fe('addLink',ye),O.addLink(J,ve))},this.selectLink=function(ye,ve,xe){return!!V&&(fe('selectLink',ye),!!ve&&void Z.dispatchEvent('linkSelected',ve,xe,O.getLinkAttr(ve.ideaIdFrom,ve.ideaIdTo,'style')))},this.removeLink=function(ye,ve,xe){return!!V&&void(fe('removeLink',ye),O.removeLink(ve,xe))},this.toggleAddLinkMode=function(ye){return!!V&&!!z&&void(fe('toggleAddLinkMode',ye),H=!H,Z.dispatchEvent('addLinkModeToggled',H))},this.cancelCurrentAction=function(ye){return!!z&&!!V&&void(H&&this.toggleAddLinkMode(ye))},Z.undo=function(ye){const ve=X,xe=Y;return!!V&&void(fe('undo',ye),z&&(O.undo(),ve&&Z.selectNode(ve),xe&&ie(xe)))},Z.redo=function(ye){return!!V&&void(fe('redo',ye),z&&O.redo())},Z.moveRelative=function(ye,ve){let xe;return!!V&&void(fe('moveRelative',ye),z&&('top-down'===ae.getOrientation()&&(xe={ignoreRankSide:!0}),O.moveRelative(J,ve,xe)))},Z.cut=function(ye){const ve=[],xe=[];return!!V&&void(fe('cut',ye),z&&(Z.applyToActivated(function(be){ve.push(be),xe.push(O.findParent(be).id)}),te.put(O.cloneMultiple(ve)),O.removeMultiple(ve)))},Z.contextForNode=function(ye){const ve=Z.findIdeaById(ye),xe=ve&&ve.ideas&&0<C.size(ve.ideas),be=C.size(O.ideas),we=O.hasSiblings(ye),Ee=ve&&ve.attr&&ve.attr.style&&ve.attr.style.width,ke=ve&&ve.getAttr('collapsed'),Ce=ve&&V&&te&&te.get(),Se=O.isRootNode(ye);if(ve)return{hasChildren:!!xe,hasSiblings:!!we,hasPreferredWidth:!!Ee,canPaste:!!Ce,notRoot:!Se,notLastRoot:!Se||1<be,canUndo:O.canUndo(),canRedo:O.canRedo(),canCollapse:xe&&!ke,canExpand:xe&&ke}},Z.copy=function(ye){const ve=[];return!!V&&void(fe('copy',ye),z&&(Z.applyToActivated(function(xe){ve.push(xe)}),te.put(O.cloneMultiple(ve))))},Z.paste=function(ye){let ve;return!!V&&(fe('paste',ye),z&&(ve=O.pasteMultiple(J,te.get()),ve&&ve[0]&&Z.selectNode(ve[0])),ve)},Z.pasteStyle=function(ye){const ve=te.get();let xe;return!!V&&void(fe('pasteStyle',ye),z&&ve&&ve[0]&&(xe=ve[0].attr&&ve[0].attr.style,Z.applyToActivated(function(be){O.updateAttr(be,'style',xe)})))},Z.getIcon=function(ye){const ve=ae.getNode(ye||J);return!!ve&&ve.attr&&ve.attr.icon},Z.setIcon=function(ye,ve,xe,be,we,Ee,ke){let Ce=!1,Se;return!!V&&(fe('setIcon',ye),Ee=Ee||J,Ce=Z.findIdeaById(Ee),!!Ce&&void(ve?(Se={url:ve,width:xe,height:be,position:we},ke&&(Se.metaData=ke),O.updateAttr(Ee,'icon',Se)):(O.updateAttr(Ee,'icon',!1),!Ce.title&&0===C.size(Ce.ideas)&&O.removeSubIdea(Ee))))},Z.insertUp=function(ye){'standard'===ae.getOrientation()?Z.addSiblingIdeaBefore(ye):Z.insertIntermediate(ye)},Z.insertDown=function(ye){'standard'===ae.getOrientation()?Z.addSiblingIdea(ye):Z.addSubIdea(ye)},Z.insertLeft=function(ye){'standard'===ae.getOrientation()?Z.insertIntermediate(ye):Z.addSiblingIdeaBefore(ye)},Z.insertRight=function(ye){'standard'===ae.getOrientation()?Z.addSubIdea(ye):Z.addSiblingIdea(ye)},Z.moveUp=function(ye){'standard'===ae.getOrientation()&&Z.moveRelative(ye,-1)},Z.moveDown=function(ye){'standard'===ae.getOrientation()&&Z.moveRelative(ye,1)},Z.moveLeft=function(ye){'standard'===ae.getOrientation()?Z.flip(ye):Z.moveRelative(ye,-1)},Z.moveRight=function(ye){'standard'===ae.getOrientation()?Z.flip(ye):Z.moveRelative(ye,1)},Z.getSelectedNodeId=function(){return ce()},Z.centerOnNode=function(ye){ae.getNode(ye)||(O.startBatch(),C.each(O.calculatePath(ye),function(ve){O.updateAttr(ve.id,'collapsed',!1)}),O.endBatch()),Z.dispatchEvent('nodeFocusRequested',ye),Z.selectNode(ye)},Z.search=function(ye){const ve=[];return ye=ye.toLocaleLowerCase(),O.traverse(function(xe){xe.title&&0<=xe.title.toLocaleLowerCase().indexOf(ye)&&ve.push({id:xe.id,title:xe.title})}),ve},function(){const ye=function(xe,be,we,Ee){if(z){fe(be,xe);const ke=ae['nodeId'+Ee](J);ke&&we.apply(Z,[ke])}},ve={};['Left','Right','Up','Down'].forEach(function(xe){ve[xe]=function(be,we,Ee){ye(be,we,Ee,xe)}}),Z.getActivatedNodeIds=function(){return K.slice(0)},Z.activateSiblingNodes=function(xe){const be=O.findParent(J),we=be&&be.ideas&&C.map(be.ideas,function(Ee){return Ee.id});fe('activateSiblingNodes',xe);we&&ie(we)},Z.activateNodeAndChildren=function(xe){const be=ce(),we=O.getSubTreeIds(be);fe('activateNodeAndChildren',xe),we.push(be),ie(we)},C.each(['Left','Right','Up','Down'],function(xe){Z['activateNode'+xe]=function(be){ve[xe](be,'activateNode'+xe,function(we){Z.selectNode(we,!1,!0)})},Z['selectNode'+xe]=function(be){ve[xe](be,'selectNode'+xe,Z.selectNode)}}),Z.toggleActivationOnNode=function(xe,be){fe('toggleActivated',xe),Z.isActivated(be)?ie(C.without(K,be)):ie([be].concat(K))},Z.activateNode=function(xe,be){fe('activateNode',xe),Z.isActivated(be)||(K.push(be),Z.dispatchEvent('activatedNodesChanged',[be],[]))},Z.activateChildren=function(xe){const be=ue();fe('activateChildren',xe);!be||C.isEmpty(be.ideas)||be.getAttr('collapsed')||ie(O.getSubTreeIds(be.id))},Z.activateSelectedNode=function(xe){fe('activateSelectedNode',xe),ie([ce()])},Z.isActivated=function(xe){return C.find(K,function(be){return xe==be})},Z.applyToActivated=function(xe){O.batch(function(){C.each(K,xe)})},Z.everyActivatedIs=function(xe){return C.every(K,xe)},Z.activateLevel=function(xe,be){const we=C.map(C.filter(ae.getLayout().nodes,function(Ee){return Ee.level==be}),function(Ee){return Ee.id});fe('activateLevel',xe),C.isEmpty(we)||ie(we)},Z.reactivate=function(xe){return C.each(xe.nodes,function(be){C.contains(K,be.id)&&(be.activated=!0)}),xe}}(),Z.getNodeIdAtPosition=function(ye,ve){const be=C.find(ae.getLayout().nodes,function(we){return ye>=we.x&&ve>=we.y&&ye<=we.x+we.width&&ve<=we.y+we.height});return be&&be.id},Z.autoPosition=function(ye){return O.updateAttr(ye,'position',!1)},Z.standardPositionNodeAt=function(ye,ve,xe,be){let we=!1;const Ee=ae.getNode(ae.getNode(ye).rootId),Ce=O.findParent(ye),Se=ae.getNode(Ce.id),Ie=ae.getNode(ye),Te=ae.getNode(ye),Fe=function(){return 2>=Te.level||0<(Te.x-Se.x)*(ve-Se.x)},Le=function(){return C.isEmpty(Ce.ideas)?0:C.max(C.map(Ce.ideas,function(Pe){return Pe.id!==ye&&Pe.attr&&Pe.attr.position&&Pe.attr.position[2]||0}))||0};return O.startBatch(),Ie&&2===Ie.level&&(we=function(Pe,De,Me){const je=Pe.x<De.x&&Me<Pe.x,We=Pe.x>De.x&&Pe.x<Me;return(je||We)&&O.flip(ye)}(Ee,Te,ve)),!be&&Fe()&&Z.autoPosition(ye),1<Te.level&&(we=O.positionBefore(ye,function(){let Pe={id:null,y:Infinity};return C.each(O.sameSideSiblingIds(ye),function(De){const Me=ae.getNode(De);xe<Me.y&&Me.y<Pe.y&&(Pe=Me)}),Pe}().id)||we),be&&Fe()&&(1===Te.level?we=function(){return O.updateAttr(ye,'position',[ve,xe,Le()+1])}():we=function(){let Pe;return Pe=ve<Se.x?Se.x-ve-Te.width+Se.width:ve-Se.x,fe('nodeManuallyPositioned'),O.updateAttr(ye,'position',[Pe,xe-Se.y,Le()+1])}()||we),O.endBatch(),we},Z.topDownPositionNodeAt=function(ye,ve,xe,be){let we,Ee,ke;const Ce=O.findParent(ye),Se=ae.getNode(ye),Te=function(){return O.updateAttr(ye,'position',[ve,xe,1])};return be?function(){return 2>Se.level}()?Te():O.batch(function(){return O.changeParent(ye,'root'),Te()}):!!Ce&&(C.each(Ce.ideas,function(Ae){const Fe=ae.getNode(Ae.id);Ae.id===ye||(ve<Fe.x&&(!Ee||Math.abs(ve-Fe.x)<Math.abs(ve-ae.getNode(Ee.id).x))&&(Ee=Ae),ve>Fe.x+Fe.width&&(!ke||Math.abs(ve-Fe.x)<Math.abs(ve-ae.getNode(ke.id).x))&&(ke=Ae))}),O.batch(function(){const Ae=!!(Ee&&Ee.id&&0>O.findChildRankById(Ee.id)),Fe=Ae?ke:Ee,Le=Ae&&0<O.findChildRankById(ye);Z.autoPosition(ye),Le&&O.flip(ye),we=O.positionBefore(ye,Fe&&Fe.id)}),we)},Z.positionNodeAt=function(ye,ve,xe,be){return'standard'===ae.getOrientation()?Z.standardPositionNodeAt(ye,ve,xe,be):Z.topDownPositionNodeAt(ye,ve,xe,be)},Z.dropNode=function(ye,ve,xe){let be;const we=O.findParent(ye);return ve!==ye&&(xe?(be=O.clone(ye),be&&O.paste(ve,be),!1):ve===we.id?Z.autoPosition(ye):O.changeParent(ye,ve))},Z.setLayoutCalculator=function(ye){Q=ye},Z.dropImage=function(ye,ve,xe,be,we,Ee){const ke=function(Ie,Te){const Ae=Math.min(ve,300)/ve,Fe=Math.min(xe,300)/xe,Le=Math.min(Ae,Fe),Ne=O.getAttrById(Ie,'icon');Z.setIcon('drag and drop',ye,Math.round(ve*Le),Math.round(xe*Le),Ne&&Ne.position||Te,Ie,Ee)},Se=Z.getNodeIdAtPosition(be,we);return Se?ke(Se,'left'):void function(){O.startBatch();const Ie=O.addSubIdea(J);ke(Ie,'center'),O.endBatch(),Z.selectNode(Ie)}()},Z.setLabelGenerator=function(ye,ve){U=ye,Z.dispatchEvent('labelGeneratorChange',ve,!!ye),Z.rebuildRequired()},Z.getStandardReorderBoundary=function(ye){const ve=ae.getNode(ye);return 1!==ve.level&&function(be){let we;const Ee=[],ke=ae.getNode(be),Ce=ae.getNode(ke&&ke.rootId),Se=function(De,Me){return De&&Me&&De.x>=Me.x},Ie=O.findParent(be),Te=ae.getNode(Ie.id),Ae=Se(ke,Ce)?'left':'right',Fe=Se(ke,Ce)?'right':'left',Le=function(De,Me){const je=C.map(De,function(Be){return Be.y}),We=C.map(De,function(Be){return Be.y+Be.height}),Oe={minY:C.min(je)-ee-ke.height,maxY:C.max(We)+ee,margin:ee};return Oe.edge=Me,Oe.x='left'===Me?Te.x+Te.width+ee:Te.x-ee,Oe},Ne=function(De){const Me={minY:Te.y-ee-ke.height,maxY:Te.y+Te.height+ee,margin:ee};return Me.edge=De,Me.x='left'===De?Te.x+Te.width+ee:Te.x-ee,Me},Re=C.map(O.sameSideSiblingIds(be),function(De){return ae.getNode(De)});return C.isEmpty(Re)||Ee.push(Le(Re,Ae)),Ee.push(Ne(Ae)),2===ke.level&&(we=function(){let De=C.map(Ie.ideas,function(Me){return ae.getNode(Me.id)});return De=C.without(De,ke),C.isEmpty(Re)||(De=C.difference(De,Re)),De}(),!C.isEmpty(we)&&Ee.push(Le(we,Fe)),Ee.push(Ne(Fe))),Ee}(ye)},Z.getTopDownReorderBoundary=function(ye){const ve=ae.getNode(ye),xe=O.findParent(ye),be=10;let we=Infinity,Ee=-Infinity,ke=-Infinity,Ce=!1;return xe?(C.each(xe.ideas,function(Se){const Ie=ae.getNode(Se.id);Ie&&Se.id!==ye&&(Ce=!0,we=Math.min(Ie.x,we),Ee=Math.max(Ie.x+Ie.width,Ee),ke=Math.max(Ie.y+Ie.height,ke))}),Ce?[{minY:ve.y-ve.height-be,maxY:ke+be,minX:we-ve.width-be,maxX:Ee+be,edge:'top'}]:[]):[]},Z.getReorderBoundary=function(ye){return'standard'===ae.getOrientation()?Z.getStandardReorderBoundary(ye):Z.getTopDownReorderBoundary(ye)},Z.focusAndSelect=function(ye){Z.selectNode(ye),Z.dispatchEvent('nodeFocusRequested',ye)},Z.requestContextMenu=function(ye,ve){return z&&V&&(Z.dispatchEvent('contextMenuRequested',J,ye,ve),!0)},Z.setTheme=function(ye){return!!V&&void O.updateAttr(O.id,'theme',ye)},Z.makeSelectedNodeRoot=function(){const ye=Z.getSelectedNodeId(),ve=ye&&ae.getNode(ye),xe=ve&&ve.rootId;return!ye||O.isRootNode(ye)?!1:z&&V?O.batch(function(){const be=O.changeParent(ye,'root');return'top-down'===ae.getOrientation()&&(!O.getAttrById(xe,'position')&&me(xe),me(ye)),be}):void 0},Z.setNodeWidth=function(ye,ve,xe){O.mergeAttrProperty(ve,'style','width',xe)},Z.unsetSelectedNodeWidth=function(){const ye=Z.getSelectedNodeId();O.mergeAttrProperty(ye,'style','width',!1)},Z.insertRoot=function(ye,ve){let xe;return!!V&&void(fe('addRootNode',ye),z&&(xe=ve?O.addSubIdea(O.id,ve):O.addSubIdea(O.id),xe&&(ve?se(xe):le(xe))))}}},function(u,h,E){const C=E(1);C.fn.mapToolbarWidget=function(I){'use strict';const T=['insertIntermediate','scaleUp','scaleDown','addSubIdea','editNode','removeSubIdea','toggleCollapse','addSiblingIdea','undo','redo','copy','cut','paste','resetView','openAttachment','toggleAddLinkMode','activateChildren','activateNodeAndChildren','activateSiblingNodes','editIcon','insertRoot','makeSelectedNodeRoot'],L=['updateStyle'];return this.each(function(){const N=C(this);let R=!1;I.addEventListener('nodeSelectionChanged',function(){R=!0,N.find('.updateStyle[data-mm-target-property]').val(function(){return I.getSelectedStyle(C(this).data('mm-target-property'))}).change(),R=!1}),I.addEventListener('addLinkModeToggled',function(){N.find('.toggleAddLinkMode').toggleClass('active')}),T.forEach(function(P){N.find('.'+P).click(function(){I[P]&&I[P]('toolbar')})}),L.forEach(function(P){N.find('.'+P).change(function(){if(!R){const D=C(this);D.data('mm-target-property')&&I[P]('toolbar',D.data('mm-target-property'),D.val())}})})})}},function(u,h,E){const C=E(1);E(114),C.fn.nodeResizeWidget=function(I,T,L){'use strict';return this.each(function(){let N,R,P;const D=C(this),W=D.find('span[data-mapjs-role=title]'),O=W[0],H=function(z){const V=L(z),X=V&&N&&V.x-N.x,Y=X&&Math.max(50,R+X);return Y},U=C('<div>').addClass('resize-node').shadowDraggable().on('mm:start-dragging mm:start-dragging-shadow',function(z){T.selectNode(I),N=L(z),R=W.innerWidth(),P={'node.min-width':D.css('min-width'),'span.min-width':W.css('min-width'),'span.max-width':W.css('max-width')}}).on('mm:stop-dragging mm:cancel-dragging',function(z){const V=W.outerWidth();W.css({'max-width':P['span.max-width'],'min-width':P['span.min-width']}),D.css('min-width',P['node.min-width']),z&&z.stopPropagation(),z&&z.gesture&&z.gesture.stopPropagation(),D.trigger(C.Event('mm:resize',{nodeWidth:V}))}).on('mm:drag',function(z){let V=H(z);V&&(W.css({'max-width':V,'min-width':V}),D.css('min-width',W.outerWidth()),O.scrollWidth>O.offsetWidth&&(V=O.scrollWidth,W.css({'max-width':V,'min-width':V}),D.css('min-width',W.outerWidth()))),z&&z.stopPropagation(),z&&z.gesture&&z.gesture.stopPropagation()});U.appendTo(D)})}},function(u,h,E){const C=E(1),I=E(25).Theme,T=E(90);C.fn.themeCssWidget=function(L,N,R){'use strict';const P=C(this),D=function(M){const W=L[M||'default'];W&&(T.theme=new I(W),P.text(N.process(W).css))};return D('default'),R.addEventListener('themeChanged',D),P}},,,function(u){u.exports={name:'MindMup Top Down Argument Mapping',layout:{orientation:'top-down',spacing:{h:20,v:100}},node:[{name:'default',cornerRadius:5,backgroundColor:'#ffffff',border:{type:'surround',line:{color:'#707070',width:1}},shadow:[{color:'#070707',opacity:0.3,offset:{width:2,height:2},radius:2}],text:{margin:5,alignment:'left',color:'#4F4F4F',lightColor:'#EEEEEE',darkColor:'#000000',font:{lineSpacing:2,size:10,weight:'light'}},connections:{'default':{h:'center-separated',v:'base'},from:{horizontal:{h:'center-separated',v:'base'}},to:{h:'center',v:'top'}},decorations:{height:16,edge:'top',overlap:!0,position:'end'}},{name:'activated',border:{type:'surround',line:{color:'#22AAE0',width:3,style:'dotted'}}},{name:'selected',shadow:[{color:'#000000',opacity:0.9,offset:{width:2,height:2},radius:2}]},{name:'collapsed',shadow:[{color:'#888888',offset:{width:0,height:1},radius:0},{color:'#FFFFFF',offset:{width:0,height:3},radius:0},{color:'#888888',offset:{width:0,height:4},radius:0},{color:'#FFFFFF',offset:{width:0,height:6},radius:0},{color:'#888888',offset:{width:0,height:7},radius:0}]},{name:'collapsed.selected',shadow:[{color:'#FFFFFF',offset:{width:0,height:1},radius:0},{color:'#888888',offset:{width:0,height:3},radius:0},{color:'#FFFFFF',offset:{width:0,height:6},radius:0},{color:'#555555',offset:{width:0,height:7},radius:0},{color:'#FFFFFF',offset:{width:0,height:10},radius:0},{color:'#333333',offset:{width:0,height:11},radius:0}]},{name:'attr_group',cornerRadius:10,background:{color:'transparent',opacity:0},border:{type:'overline'},shadow:[{color:'transparent'}],text:{margin:0,alignment:'center',color:'#4F4F4F',lightColor:'#EEEEEE',darkColor:'#000000',font:{lineSpacing:2.5,size:9,weight:'bold'}},connections:{style:'supporting-group',childstyle:'no-connector','default':{h:'center',v:'base'},from:{below:{h:'center',v:'base'}},to:{h:'center',v:'top'}}},{name:'attr_group_supporting',connections:{style:'supporting-group',childstyle:'no-connector','default':{h:'center',v:'base'},from:{below:{h:'center',v:'base'}},to:{h:'center',v:'top'}}},{name:'attr_group_supporting.level_1',background:{color:'#00FF00',opacity:0.2},border:{type:'surround',line:{color:'transparent',width:2,style:'solid'}}},{name:'attr_group_supporting.activated',background:{color:'#00FF00',opacity:0.2},border:{type:'surround',line:{color:'#00FF00',width:3,style:'dotted'}}},{name:'attr_group_opposing',connections:{style:'opposing-group',childstyle:'no-connector','default':{h:'center',v:'base'},from:{below:{h:'center',v:'base'}},to:{h:'center',v:'top'}}},{name:'attr_group_opposing.level_1',background:{color:'#FF0000',opacity:0.2},border:{type:'surround',line:{color:'transparent',width:2,style:'solid'}}},{name:'attr_group_opposing.activated',background:{color:'#FF0000',opacity:0.2},border:{type:'surround',line:{color:'#FF0000',width:3,style:'dotted'}}},{name:'attr_group_supporting.droppable',background:{color:'#00FF00',opacity:0.6},border:{type:'surround',line:{color:'#00FF00',width:3,style:'dashed'}}},{name:'attr_group_opposing.droppable',background:{color:'#FF0000',opacity:0.6},border:{type:'surround',line:{color:'#FF0000',width:3,style:'dashed'}}}],connector:{'default':{type:'vertical-quadratic-s-curve',line:{color:'#707070',width:1}},'no-connector':{type:'no-connector',line:{color:'#707070',width:0}},'supporting-group':{type:'vertical-quadratic-s-curve',line:{color:'#00FF00',width:3}},'opposing-group':{type:'vertical-quadratic-s-curve',line:{color:'#FF0000',width:3}},'no-connector.supporting-group':{type:'no-connector',line:{color:'#00FF00',width:4}},'no-connector.opposing-group':{type:'no-connector',line:{color:'#FF0000',width:4}}}}},function(u){u.exports={name:'MindMup Default',node:[{name:'default',cornerRadius:10,backgroundColor:'#E0E0E0',border:{type:'surround',line:{color:'#707070',width:1}},shadow:[{color:'#070707',opacity:0.4,offset:{width:2,height:2},radius:2}],text:{margin:5,alignment:'center',color:'#4F4F4F',lightColor:'#EEEEEE',darkColor:'#000000',font:{lineSpacing:2.5,size:9,weight:'bold'}},connections:{'default':{h:'center',v:'center'},from:{horizontal:{h:'nearest-inset',v:'center'}},to:{h:'nearest',v:'center'}},decorations:{height:20,edge:'top',overlap:!0,position:'end'}},{name:'level_1',backgroundColor:'#22AAE0'},{name:'activated',border:{type:'surround',line:{color:'#22AAE0',width:3,style:'dotted'}}},{name:'level_1.activated',border:{type:'surround',line:{color:'#EEEEEE',width:3,style:'dotted'}}},{name:'selected',shadow:[{color:'#000000',opacity:0.9,offset:{width:2,height:2},radius:2}]},{name:'collapsed',shadow:[{color:'#888888',offset:{width:0,height:1},radius:0},{color:'#FFFFFF',offset:{width:0,height:3},radius:0},{color:'#888888',offset:{width:0,height:4},radius:0},{color:'#FFFFFF',offset:{width:0,height:6},radius:0},{color:'#888888',offset:{width:0,height:7},radius:0}]},{name:'collapsed.selected',shadow:[{color:'#FFFFFF',offset:{width:0,height:1},radius:0},{color:'#888888',offset:{width:0,height:3},radius:0},{color:'#FFFFFF',offset:{width:0,height:6},radius:0},{color:'#555555',offset:{width:0,height:7},radius:0},{color:'#FFFFFF',offset:{width:0,height:10},radius:0},{color:'#333333',offset:{width:0,height:11},radius:0}]}],connector:{'default':{type:'quadratic',controlPoint:{above:{width:0,height:0.75},below:{width:0,height:0.75},horizontal:{width:0,height:0}},line:{color:'#707070',width:1}}}}},function(u){u.exports={name:'MindMup Simple Straight Lines',layout:'portrait',node:[{name:'default',cornerRadius:3,background:{color:'#FFFFFF',opacity:0.8},border:{type:'underline'},shadow:[{color:'transparent'}],text:{margin:2,alignment:'left',color:'#4F4F4F',lightColor:'#EEEEEE',darkColor:'#000000',font:{lineSpacing:2,size:10,weight:'light'}},connections:{'default':{h:'nearest',v:'base'}},decorations:{height:20,edge:'left',overlap:!1,position:'center'}},{name:'level_1',cornerRadius:10,backgroundColor:'#22AAE0',border:{type:'surround',line:{color:'transparent',width:1}},connections:{'default':{h:'nearest',v:'center'}},text:{margin:5,color:'#EEEEEE',font:{lineSpacing:6,size:12,weight:'light'}}},{name:'activated',border:{type:'surround',line:{color:'#22AAE0',width:2,style:'dashed'}}},{name:'level_1.activated',border:{type:'surround',line:{color:'#EEEEEE',width:2,style:'dashed'}}},{name:'selected',shadow:[{color:'#FFFFFF',offset:{width:1,height:0},radius:0},{color:'#FFFFFF',offset:{width:-1,height:0},radius:0},{color:'#22AAE0',offset:{width:4,height:0},radius:0},{color:'#22AAE0',offset:{width:-4,height:0},radius:0}]},{name:'collapsed',shadow:[{color:'#888888',offset:{width:0,height:1},radius:0},{color:'#FFFFFF',offset:{width:0,height:3},radius:0},{color:'#888888',offset:{width:0,height:4},radius:0},{color:'#FFFFFF',offset:{width:0,height:6},radius:0},{color:'#888888',offset:{width:0,height:7},radius:0}]},{name:'collapsed.selected',shadow:[{color:'#FFFFFF',offset:{width:1,height:0},radius:0},{color:'#FFFFFF',offset:{width:-1,height:0},radius:0},{color:'#22AAE0',offset:{width:4,height:0},radius:0},{color:'#22AAE0',offset:{width:-4,height:0},radius:0},{color:'#888888',offset:{width:0,height:1},radius:0},{color:'#FFFFFF',offset:{width:0,height:3},radius:0},{color:'#888888',offset:{width:0,height:4},radius:0},{color:'#FFFFFF',offset:{width:0,height:6},radius:0},{color:'#888888',offset:{width:0,height:7},radius:0}]}],connector:{'default':{type:'straight',line:{color:'#707070',width:1}}}}},function(u){u.exports={name:'MindMup Simple',layout:'portrait',node:[{name:'default',cornerRadius:3,background:{color:'#FFFFFF',opacity:0.8},border:{type:'underline'},shadow:[{color:'transparent'}],text:{margin:2,alignment:'left',color:'#4F4F4F',lightColor:'#EEEEEE',darkColor:'#000000',font:{lineSpacing:2,size:10,weight:'light'}},connections:{'default':{h:'nearest',v:'base'}},decorations:{height:20,edge:'left',overlap:!1,position:'center'}},{name:'level_1',cornerRadius:10,backgroundColor:'#22AAE0',border:{type:'surround',line:{color:'transparent',width:1}},connections:{'default':{h:'nearest',v:'center'}},text:{margin:5,color:'#EEEEEE',font:{lineSpacing:6,size:12,weight:'light'}}},{name:'activated',border:{type:'surround',line:{color:'#22AAE0',width:2,style:'dashed'}}},{name:'level_1.activated',border:{type:'surround',line:{color:'#EEEEEE',width:2,style:'dashed'}}},{name:'selected',shadow:[{color:'#FFFFFF',offset:{width:1,height:0},radius:0},{color:'#FFFFFF',offset:{width:-1,height:0},radius:0},{color:'#22AAE0',offset:{width:4,height:0},radius:0},{color:'#22AAE0',offset:{width:-4,height:0},radius:0}]},{name:'collapsed',shadow:[{color:'#888888',offset:{width:0,height:1},radius:0},{color:'#FFFFFF',offset:{width:0,height:3},radius:0},{color:'#888888',offset:{width:0,height:4},radius:0},{color:'#FFFFFF',offset:{width:0,height:6},radius:0},{color:'#888888',offset:{width:0,height:7},radius:0}]},{name:'collapsed.selected',shadow:[{color:'#FFFFFF',offset:{width:1,height:0},radius:0},{color:'#FFFFFF',offset:{width:-1,height:0},radius:0},{color:'#22AAE0',offset:{width:4,height:0},radius:0},{color:'#22AAE0',offset:{width:-4,height:0},radius:0},{color:'#888888',offset:{width:0,height:1},radius:0},{color:'#FFFFFF',offset:{width:0,height:3},radius:0},{color:'#888888',offset:{width:0,height:4},radius:0},{color:'#FFFFFF',offset:{width:0,height:6},radius:0},{color:'#888888',offset:{width:0,height:7},radius:0}]}],connector:{'default':{type:'compact-s-curve',line:{color:'#707070',width:1}}}}},function(u){u.exports={name:'MindMup Straight Lines',node:[{name:'default',cornerRadius:10,backgroundColor:'#E0E0E0',border:{type:'surround',line:{color:'#707070',width:1}},shadow:[{color:'#070707',opacity:0.4,offset:{width:2,height:2},radius:2}],text:{margin:5,alignment:'center',color:'#4F4F4F',lightColor:'#EEEEEE',darkColor:'#000000',font:{lineSpacing:2.5,size:9,weight:'bold'}},connections:{'default':{h:'nearest',v:'center'},from:{horizontal:{h:'nearest',v:'center'}},to:{h:'nearest',v:'center'}},decorations:{height:20,edge:'top',overlap:!0,position:'end'}},{name:'level_1',backgroundColor:'#22AAE0'},{name:'activated',border:{type:'surround',line:{color:'#22AAE0',width:3,style:'dotted'}}},{name:'level_1.activated',border:{type:'surround',line:{color:'#EEEEEE',width:3,style:'dotted'}}},{name:'selected',shadow:[{color:'#000000',opacity:0.9,offset:{width:2,height:2},radius:2}]},{name:'collapsed',shadow:[{color:'#888888',offset:{width:0,height:1},radius:0},{color:'#FFFFFF',offset:{width:0,height:3},radius:0},{color:'#888888',offset:{width:0,height:4},radius:0},{color:'#FFFFFF',offset:{width:0,height:6},radius:0},{color:'#888888',offset:{width:0,height:7},radius:0}]},{name:'collapsed.selected',shadow:[{color:'#FFFFFF',offset:{width:0,height:1},radius:0},{color:'#888888',offset:{width:0,height:3},radius:0},{color:'#FFFFFF',offset:{width:0,height:6},radius:0},{color:'#555555',offset:{width:0,height:7},radius:0},{color:'#FFFFFF',offset:{width:0,height:10},radius:0},{color:'#333333',offset:{width:0,height:11},radius:0}]}],connector:{'default':{type:'straight',line:{color:'#707070',width:1}}}}},function(u){u.exports={name:'MindMup Top Down Straight Lines',layout:{orientation:'top-down',spacing:{h:20,v:100}},node:[{name:'default',cornerRadius:5,background:{color:'transparent',opacity:0},border:{type:'overline'},shadow:[{color:'transparent'}],text:{margin:5,alignment:'left',color:'#4F4F4F',lightColor:'#EEEEEE',darkColor:'#000000',font:{lineSpacing:2,size:10,weight:'light'}},connections:{'default':{h:'center',v:'base'},from:{horizontal:{h:'center',v:'base'}},to:{h:'center',v:'top'}},decorations:{height:32,edge:'right',overlap:!0,position:'center'}},{name:'activated',border:{type:'surround',line:{color:'#22AAE0',width:3,style:'dotted'}}},{name:'selected',shadow:[{color:'#000000',opacity:0.9,offset:{width:2,height:2},radius:2}]},{name:'collapsed',shadow:[{color:'#888888',offset:{width:0,height:1},radius:0},{color:'#FFFFFF',offset:{width:0,height:3},radius:0},{color:'#888888',offset:{width:0,height:4},radius:0},{color:'#FFFFFF',offset:{width:0,height:6},radius:0},{color:'#888888',offset:{width:0,height:7},radius:0}]},{name:'collapsed.selected',shadow:[{color:'#FFFFFF',offset:{width:0,height:1},radius:0},{color:'#888888',offset:{width:0,height:3},radius:0},{color:'#FFFFFF',offset:{width:0,height:6},radius:0},{color:'#555555',offset:{width:0,height:7},radius:0},{color:'#FFFFFF',offset:{width:0,height:10},radius:0},{color:'#333333',offset:{width:0,height:11},radius:0}]}],connector:{'default':{type:'top-down-s-curve',line:{color:'#707070',width:2}}}}},function(u){u.exports={name:'MindMup Top Down Default',layout:{orientation:'top-down',spacing:{h:20,v:100}},node:[{name:'default',cornerRadius:10,backgroundColor:'#E0E0E0',border:{type:'surround',line:{color:'#707070',width:1}},shadow:[{color:'#070707',opacity:0.4,offset:{width:2,height:2},radius:2}],text:{margin:5,alignment:'center',color:'#4F4F4F',lightColor:'#EEEEEE',darkColor:'#000000',font:{lineSpacing:2.5,size:9,weight:'bold'}},connections:{'default':{h:'center',v:'base'},from:{horizontal:{h:'center',v:'base'}},to:{h:'center',v:'top'}},decorations:{height:20,edge:'top',overlap:!0,position:'end'}},{name:'level_1',backgroundColor:'#22AAE0'},{name:'activated',border:{type:'surround',line:{color:'#22AAE0',width:3,style:'dotted'}}},{name:'level_1.activated',border:{type:'surround',line:{color:'#EEEEEE',width:3,style:'dotted'}}},{name:'selected',shadow:[{color:'#000000',opacity:0.9,offset:{width:2,height:2},radius:2}]},{name:'collapsed',shadow:[{color:'#888888',offset:{width:0,height:1},radius:0},{color:'#FFFFFF',offset:{width:0,height:3},radius:0},{color:'#888888',offset:{width:0,height:4},radius:0},{color:'#FFFFFF',offset:{width:0,height:6},radius:0},{color:'#888888',offset:{width:0,height:7},radius:0}]},{name:'collapsed.selected',shadow:[{color:'#FFFFFF',offset:{width:0,height:1},radius:0},{color:'#888888',offset:{width:0,height:3},radius:0},{color:'#FFFFFF',offset:{width:0,height:6},radius:0},{color:'#555555',offset:{width:0,height:7},radius:0},{color:'#FFFFFF',offset:{width:0,height:10},radius:0},{color:'#333333',offset:{width:0,height:11},radius:0}]}],connector:{'default':{type:'top-down-s-curve',line:{color:'#707070',width:2}}}}},function(u){u.exports={truncate:function(E,C){'use strict';return E.substring(0,C)},sanitize:function(E){'use strict';const C=E.substr(0,100).toLowerCase().replace(/[^a-z0-9]+/g,'_');return'_'===C?'map':C}}},function(u){u.exports=function(C){'use strict';return C.replace(/\\/g,'/').replace(/.*\//,'').replace(/\.[^.]*$/,'')}},function(u,h,E){const C=E(0);u.exports=function(T){'use strict';return C.map(T,function(L){return C.map(L,function(N){return N?N.toString().replace(/\t|\n|\r/g,' '):''}).join('\t')}).join('\n')}},,function(u){u.exports={testing:{title:'Testing: Colors',args:['testing']},testingWithIcons:{title:'Testing: Flat Icons',args:['testing','/assets/progress/','flat',25]},testingWith3DIcons:{title:'Testing: 3D Icons',args:['testing','/assets/progress/','3d',64]},tasks:{title:'Tasks: Colors',args:['tasks']},tasksWithIcons:{title:'Tasks: Flat Icons',args:['tasks','/assets/progress/','flat',25]},tasksWith3DIcons:{title:'Tasks: 3D Icons',args:['tasks','/assets/progress/','3d',64]}}},,,function(u,h,E){const C=E(278),I=E(0);u.exports=function(L){'use strict';if(L)return L.findScene=function(N){if(N)return C(N),I.find(L,function(R){return N.matchesScene(R)})},L.indexOfScene=function(N){const R=N&&L.findScene(N);return R?I.indexOf(L,R):-1},L.nextSceneIndex=function(){const N=I.max(L,function(R){return R&&R.index});return N&&N.index?N.index+1:1},L}},function(u,h,E){const C=E(0);u.exports=function I(T){'use strict';if(T)return T.matchesScene=function(L){return T&&L&&T.ideaId==L.ideaId&&T.index===L.index},T.clone=function(){return I(C.extend({},T))},T}},function(u,h,E){const C=E(1);C.fn.addToRowAtIndex=function(I,T){'use strict';const L=C(this),N=I.children('[data-mm-role='+L.data('mm-role')+']').eq(T);return N.length?L.insertBefore(N):L.appendTo(I),L}},function(u,h,E){const C=E(1);C.fn.contextAttributeValue=function(I,T){'use strict';const L=C(this),N=L.attr(I),R=N&&N.split&&N.split('=='),P=N&&N.split&&N.split('!=');return R&&2===R.length?T&&T[R[0]]===R[1]:P&&2===P.length?!T||!T[P[0]]||T[P[0]]!==P[1]:N&&'!'===N[0]?!T||!T[N.substring(1)]:T&&T[N]}},,function(u,h,E){const C=E(0),I=E(1);I.fn.gridDown=function(){'use strict';const T=this,L=T.position(),N=C.filter(T.siblings(),function(P){const D=I(P).position();return L.top<D.top&&3>Math.abs(L.left-D.left)}),R=C.min(N,function(P){return I(P).position().top});return R&&I(R)||T}},function(u,h,E){const C=E(0),I=E(1);I.fn.gridUp=function(){'use strict';const T=this,L=T.position(),N=C.filter(T.siblings(),function(P){const D=I(P).position();return L.top>D.top&&3>Math.abs(L.left-D.left)}),R=C.max(N,function(P){return I(P).position().top});return R&&I(R)||T}},function(u,h,E){const C=E(1);C.fn.editableTableWidget=function(I){'use strict';return C(this).each(function(){let T;const L=C.extend(C.fn.editableTableWidget.defaultOptions,I),M=13,H=C(this),U=L.editor.css('position','absolute').hide().appendTo(H.parent()),z=function(Y){T=H.find('td:focus'),T.length&&(U.val(T.text()).removeClass('error').show().offset(T.offset()).css(T.css(L.cloneProperties)).width(T.width()).height(T.height()).focus(),Y&&U.select())},V=function(){let Y=!1;const G=U.val(),K=C.Event('change');return T.text()===G||U.hasClass('error')||void(Y=T.html(),T.text(G).trigger(K,G),!1===K.result&&T.html(Y))},X=function(Y,G){if(G===39)return Y.next('td');return G===37?Y.prev('td'):G===38?Y.parent().prev().children().eq(Y.index()):G===40?Y.parent().next().children().eq(Y.index()):[]};U.blur(function(){V(),U.hide()}).keydown(function(Y){let G;Y.which===M?(V(),U.hide(),T.focus(),Y.preventDefault(),Y.stopPropagation()):Y.which===27?(U.val(T.text()),Y.preventDefault(),Y.stopPropagation(),U.hide(),T.focus()):Y.which===9?T.focus():this.selectionEnd-this.selectionStart===this.value.length&&(G=X(T,Y.which),0<G.length&&(G.focus(),Y.preventDefault(),Y.stopPropagation()))}).on('input paste',function(){const Y=C.Event('validate');T.trigger(Y,U.val()),!1===Y.result?U.addClass('error'):U.removeClass('error')}),H.on('click keypress dblclick',z).css('cursor','pointer').keydown(function(Y){let G=!0;const K=X(C(Y.target),Y.which);0<K.length?K.focus():Y.which===M?z(!1):17===Y.which||91===Y.which||93===Y.which?(z(!0),G=!1):G=!1,G&&(Y.stopPropagation(),Y.preventDefault())}),H.find('td').prop('tabindex',1),C(window).on('resize',function(){U.is(':visible')&&U.offset(T.offset()).width(T.width()).height(T.height())})})},C.fn.editableTableWidget.defaultOptions={cloneProperties:['padding','padding-top','padding-bottom','padding-left','padding-right','text-align','font','font-size','font-family','font-weight','border','border-top','border-bottom','border-left','border-right'],editor:C('<input>')}},function(u,h,E){const C=E(1);C.fn.mmScrollIntoView=function(){'use strict';const I=this[0].scrollIntoViewIfNeeded||this[0].scrollIntoView;I&&I.apply(this[0],[!1])}},function(u,h,E){const C=E(1);E(285),C.fn.noteWidget=function(I,T,L){'use strict';let N=T,R=!1,P=!1;const M=C(this),W=M.find('[data-mm-role=viewer]').textOnlyPasteWidget(),O=M.find('[data-mm-role=title]'),H=function(){W.removeAttr('contenteditable')},z=function(K){K==N.nodeId&&G('remove')},V=function(K){K.nodeId==N.nodeId&&(N=K,W.text(K.text),O.text(K.title))},X=function(K){K!=N.nodeId||W.attr('contenteditable')||M.toggleClass('folded')},Y=function(K){K.nodeId!=N.nodeId||(R=!0,M.removeClass('folded'),N=K,W.attr('contenteditable','true').text(K.text),W.focus().placeCaretAtEnd(),M.mmScrollIntoView())},G=function(K){I[K+'EventListener']('noteRemoved',z),I[K+'EventListener']('noteToggleFoldRequested',X),I[K+'EventListener']('noteEditRequested',Y),I[K+'EventListener']('noteChanged noteAdded',V)};return G('add'),L&&Y(T),O.text(N.title).on('click',function(K){P&&(window.clearTimeout(P),P=!1),P=window.setTimeout(function(){W.attr('contenteditable')||I.setActiveNodeId(N.nodeId)},250),K.preventDefault(),K.stopImmediatePropagation()}).on('dblclick',function(K){P&&(window.clearTimeout(P),P=!1),M.toggleClass('folded'),K.preventDefault(),K.stopImmediatePropagation()}),W.text(N.text||'').on('click',function(){this.hasAttribute('contenteditable')||I.editNoteForNodeId(N.nodeId)}),W.on('blur',function(){const K=W.innerText().trim();M.data('moving')||(R?I.setText(N.nodeId,K):N.isTemp?I.setText(N.nodeId,''):W.text(N.text),H())}),W.on('keydown',function(K){K.which===27&&(R=!1,H())}),M.on('contextmenu',function(K){if(!W.attr('contenteditable')&&I.requestContextMenu(K.pageX,K.pageY))return I.setActiveNodeId(N.nodeId),K.preventDefault(),!1}),M},C.fn.textOnlyPasteWidget=function(){'use strict';return C(this).each(function(){this.addEventListener('paste',function(I){const T=I.clipboardData&&I.clipboardData.getData('text/plain');T&&(I.preventDefault(),document.execCommand('insertHTML',!1,T))})})}},function(u,h,E){const C=E(1);C.fn.numericTotaliser=function(){'use strict';const I=C(this),T=I.find('tfoot tr'),L=function(R){let P=0;0===R||(I.find('tbody tr').each(function(){const D=C(this),M=parseFloat(D.children().eq(R).text());isNaN(M)||(P+=M)}),T.children().eq(R).text(P.toLocaleString()))},N=function(){for(let R=1;R<T.children().size();R++)L(R)};return I.on('change',function(R){const P=C(R.target);void 0===R.column?P.is('td')?L(P.index()):N():L(R.column)}),this}},function(u,h,E){const C=E(1);C.fn.scrollSceneIntoFocus=function(){'use strict';const I=this[0];return I.scrollIntoView(!1),this}},function(u,h,E){const C=E(1);C.fn.tableCellInPlaceEditorWidget=function(I){'use strict';return this.click(function(){const T=C(this),L=T.text(),N=function(D){T.empty().text(D),T.trigger('change')},R=C('<input width="100%">'),P=Math.max(T.innerWidth()-60,50);0<T.find('input').length||(T.empty(),R.appendTo(T).val(I||L).blur(function(){N(R.val())}).keydown('esc',function(D){N(L),D.preventDefault(),D.stopPropagation()}).keydown('return',function(D){N(R.val()),D.preventDefault(),D.stopPropagation()}).width(P).click(function(D){D.stopPropagation(),D.preventDefault()}).focus())}),this.css('cursor','pointer'),this}},function(u,h,E){const C=E(1);C.fn.updateScene=function(I,T){'use strict';const L=T.getDimensionsForScene(I,this.innerWidth(),this.innerHeight());return this.find('[data-mm-role=scene-title]').text(I.title).css(L.text.toCss()),this.css(L.image.toCss()),this}},,,function(u){u.exports=function(C,I){'use strict';return C?(I=I||'_',C.replace(/[,;#\/\t\n\r]+/g,I).trim()):C}},,function(u){u.exports=function(C,I){'use strict';const T=this,L=I+':',N=new RegExp('^'+L);T.storeResource=function(R){return L+C.getActiveContent().storeResource(R)},T.getResource=function(R){return N.test(R)?C.getActiveContent().getResource(R.substring(L.length)):R}}},,,,,function(u){u.exports=function(C,I){'use strict';const T=this;let L;I.addEventListener('subscribed',function(){L=!0}),I.addEventListener('notAuthenticated expiredSubscription notRegistered',function(){L=!1}),T.pickAttachment=function(){return L?C.pickFile().then(function(N){return{content:N.contents,contentType:N.type,dataUriEncoded:!0,name:N.name}}):Promise.reject('not-subscribed')}}},function(u,h,E){const C=E(2).observable,I=E(271),T=E(293);u.exports=function(N,R,P,D,M,W){'use strict';let O,H;const U=C(this),z=function(Y){'cancel'===Y?U.dispatchEvent('cancel'):U.dispatchEvent('error',Y)},V=function(Y){return Y&&Y.replace(/.*\./,'')},X=function(Y){const G=V(Y.name),K={mup:W.fromMup,mm:W.fromMM};if(!K[G])return z('invalid-file-type');try{H=K[G](Y.contents)}catch(Q){return z('invalid-file-format')}U.dispatchEvent('readyToSave',I(Y.name)||N.defaultFileTitle)};P.addEventListener('subscribed',function(Y){O=Y}),P.addEventListener('notAuthenticated notRegistered expiredSubscription',function(){O=!1}),U.save=function(Y){return O?H?(Y=T(Y),Y?void M.saveFile(JSON.stringify(H,null,2),Y,!1,O.license,function(G,K){'confirmation-required'===G&&U.dispatchEvent('requestConfirmation',K)}).then(function(G){D.open(N.editorUrl+'/'+G.fileId),U.dispatchEvent('complete')},z):z('invalid-file-name')):z('invalid-request'):z('not-subscribed')},U.confirmSave=M.confirm,U.cancelSave=M.cancel,U.pickImport=function(){return O?void R.pickTextFile().then(X,z):z('not-subscribed')}}},function(u,h,E){const C=E(2).observable,I=E(346),T=E(293);u.exports=function(N,R,P,D,M,W,O,H,U){'use strict';let z;const V=C(this),X=function(){z&&(R.clearTimeout(z),z=0)},Y=function(re){X(),V.dispatchEvent('error',re)},G=function(re){return function(de){'network-error'===de&&(de=re+'-'+de),Y(de)}},K=function(){const re=N.timeout||1.2e5;X(),z=R.setTimeout(function(){V.dispatchEvent('error','network-error')},re)},Q=function(re){X(),V.dispatchEvent('fileLoaded',re.fileId,re.title),R.setTitle(re.title),H.isInitialised=!0,V.dispatchEvent('fileInfo',re),V.ready()},J=G('load'),Z=function(re,de){O.loadUrl(re).then(function(se){D.initializeSession('',se,[]),Q(de)}).catch(function(se){de&&de.free&&'map-not-found'===se?J('free-map-not-found'):J(se)})},ee=function(){if(H.isInitialised)return V.dispatchEvent('reauthenticated'),!1;const re=H.getFileInfo();K(),re?re.new?(D.initializeSession('',JSON.stringify(M),[]),!re.fileId&&(re.fileId=Date.now(),R.replaceUrl(N.defaultFileTitle,N.editorUrl+'/new/'+re.fileId)),Q(re)):re.fileId?re.free?Z('https://'+N.goldBucketName+'.s3.amazonaws.com/_free/'+encodeURIComponent(re.fileId),re):re.legacy?Z(N.legacyFreeUrl+encodeURIComponent(re.fileId)+'.json',re):H.notAuthenticated()?J('notAuthenticated'):H.inactiveSubscriptionForAccount(re.account)?J('subscriptionExpired'):H.hasSubscripionForAccount(re.account)?W.fileUrl(H.getLicense(),re.fileId+'.mup').then(de=>Z(de,re),J):J('accessDenied'):J('invalidRequest'):J('invalidRequest')},te=function(re){const de=N.editorUrl+'/'+re.fileId,se=H.getFileInfo(de),le=H.getFileInfo().title!==se.title;R.replaceUrl(se.title,de),V.dispatchEvent('fileInfo',se),V.dispatchEvent('saveFileSuccess',se.fileId,se.title),le&&V.dispatchEvent('renamed',se.fileId,se.title)},ae=function(re,de){'cancel'===re?V.dispatchEvent('saveFileCancelled',de.fileId,de.title):G('save')(re)},ie=function(re,de){'confirmation-required'===re?V.dispatchEvent('saveConfirmationRequired',de):'saving'==re&&V.dispatchEvent('savingFile')},oe=function(){return JSON.stringify(D.getActiveContent(),null,2)};P.addEventListener('subscribed expiredSubscription',function(re){H.setGoldProfile(re),V.dispatchEvent(re.active?'goldActive':'goldInactive'),ee()}),P.addEventListener('notAuthenticated notRegistered',function(){H.setGoldProfile(void 0),V.dispatchEvent('goldInactive'),ee()}),P.addEventListener('authenticating',function(){V.dispatchEvent('authenticating')}),V.redirectToDriveFileList=function(){H.hasActiveSubscription()?R.redirect('/files-gold.html'):R.redirect('/')},V.saveFile=function(re){const de=H.getFileInfo(),se=T(re)||T(I(D,de))||N.defaultFileTitle;return H.isInitialised?U.saveFile(oe(),se,de,H.getLicense(),ie).then(te,le=>ae(le,de)):(Y('invalidRequest'),Promise.reject('invalidRequest'))},V.cancelSaveFile=function(){return H.isInitialised?void U.cancel():void Y('invalidRequest')},V.confirmSaveFile=function(){return H.isInitialised?void U.confirm():void Y('invalidRequest')},V.renameFile=function(re){const de=T(re),se=H.getFileInfo();return H.isInitialised&&de&&H.hasActiveSubscription()?de===se.title?void 0:(U.cancel(),U.saveFile(oe(),de,se,H.getLicense(),ie).then(te).then(function(){if(!se.free&&!se.new){const ce=H.getLicense(),pe=se.fileId+'.mup';return W.deleteFile(ce,pe).catch(function(){Y('rename-delete-failed')})}}).catch(ce=>ae(ce,se))):void Y('invalidRequest')},V.ready=function(){V.dispatchEvent('ready')},V.trashFile=function(){const re=H.getFileInfo();H.isInitialised&&re&&re.fileId&&H.getLicense()&&(V.dispatchEvent('trashing'),W.deleteFile(H.getLicense(),re.fileId+'.mup').then(function(){V.dispatchEvent('trashed')},G('trash')))},V.untrashFile=function(){const re=H.getFileInfo();H.isInitialised&&re&&re.fileId&&H.getLicense()&&(V.dispatchEvent('untrashing'),W.undeleteFile(H.getLicense(),re.fileId+'.mup').then(function(){V.dispatchEvent('untrashed')},G('untrash')))},V.editFileId=function(re){R.redirect(N.editorUrl+'/'+re)},V.requestSharingSettings=function(re){V.dispatchEvent('shareSettingsRequested',re)}}},function(u){u.exports=function(C,I){'use strict';const T=this;let L;T.isInitialised=!1,T.setGoldProfile=function(N){L=N},T.notAuthenticated=function(){return!L},T.inactiveSubscriptionForAccount=function(N){return L&&!L.active&&L.license&&L.license.account===N},T.hasSubscripionForAccount=function(N){return L&&L.license&&L.license.account===N},T.hasActiveSubscription=function(){return L&&L.active},T.getLicense=function(){return L&&L.license},T.getAccount=function(){return L&&L.license&&L.license.account},T.getFileInfo=function(N){const R=N||I.getPath(),P=0===R.indexOf(C.editorUrl)&&R.length>C.editorUrl.length,D=P&&R.substring(C.editorUrl.length+1),M=D&&D.split('/'),W=M&&1<M.length&&M.slice(1).join('/');return!M||1>M.length||0===M[0].indexOf('_')&&'_free'!==M[0]&&'_legacy'!==M[0]?!1:'new'===M[0]?W?{new:!0,fileId:W,title:C.defaultFileTitle}:{new:!0,title:C.defaultFileTitle}:'_free'===M[0]?{free:!0,fileId:W,title:C.freeMapTitle||'Free mind map'}:'_legacy'===M[0]?{legacy:!0,fileId:W,title:C.freeMapTitle||'Free mind map'}:function(){const H=decodeURIComponent(W),U=decodeURIComponent(M[M.length-1]);return{account:M[0],fileId:H,title:U,gold:!0}}()}}},function(u){u.exports=function(C,I,T){'use strict';let L,N,R;const P=this,D=function(O){const H={};return H.promise=new Promise(function(U,z){H.resolve=U,H.reject=z,H.notify=O.notify}),H},M=function(O){L.notify('confirmation-required',O)},W=function(O,H){return O!==H.fileId||H.new||H.free||!H.fileId};P.saveFile=function(O,H,U,z,V){return O?(U||(U={new:!0}),L&&L.reject(),L=D({notify:V}),N=O,L.notify('saving'),I.generateSaveConfiguration(z).then(function(X){if(R=X,'true'===X.free||!0===X.free){if(N.length>=C.maxFreeSize)return L.reject('file-too-large');R.fileId=R.key,M('free-file')}else{if(!H)return L.reject('invalid-file-name');R.key=z.account+'/'+H+'.mup',R.fileId=z.account+'/'+encodeURIComponent(H),W(H,U)?I.exists(z,H+'.mup').then(function(Y){Y?M('overwrite-file'):P.confirm()}).catch(L.reject):P.confirm()}},L.reject),L.promise):Promise.reject('invalid-file-contents')},P.cancel=function(){L&&L.reject('cancel')},P.confirm=function(){const O=R&&!R.free&&{isPrivate:!0}||{};O.notify=L.notify,L.notify('saving'),T.save(N,R,O).then(function(){L.resolve(R)},L.reject)}}},function(u){u.exports=function(C){'use strict';let I,T;const L=this,N=C.createElement('input'),R=function(W){return W?T?C.readFileAsText(W):C.readFileAsDataURL(W):Promise.reject('cancel')},D=function(){const W={};return W.promise=new Promise(function(O,H){W.resolve=O,W.reject=H}),W},M=function(W){return I&&I.reject('cancel'),I=D(),T=W,N.value='',N.click(),I.promise};N.setAttribute('type','file'),N.addEventListener('change',function(){const W=I,O=N.files&&N.files[0];I=void 0,R(O).then(function(H){return{contents:H,type:O.type,name:O.name}}).then(W.resolve,W.reject)}),L.pickFile=function(){return M(!1)},L.pickTextFile=function(){return M(!0)}}},,function(u){u.exports=function(C){'use strict';const I=this,T=['image/png','image/jpg','image/gif','image/jpeg'];I.pickImage=function(){return C.pickFile().then(function(L){if(-1<T.indexOf(L.type))return{url:L.contents};throw'image-error'})}}},function(u){u.exports=function(C,I){'use strict';const T=this;T.createFile=function(L,N,R){return C.saveFile(R,L,null,I.getLicense(),function(D){if('confirmation-required'===D)throw'overwriting-file'}).then(function(D){return D.fileId})}}},,,,,,,,,,,,,,function(u,h,E){const C=E(0);u.exports=function(T){'use strict';const L=this,N=T+':',R=new RegExp('^'+N),P=function(M){const W={};M.resources&&(C.map(M.resources,function(O,H){W[H]=!0}),M.traverse(function(O){const H=O&&O.attr&&O.attr.icon&&O.attr.icon.url;H&&delete W[H.substring(N.length)]}),C.each(W,function(O,H){delete M.resources[H]}))},D=function(M){M.traverse(function(W){const O=W&&W.attr&&W.attr.icon&&W.attr.icon.url;O&&!R.test(O)&&(W.attr.icon.url=N+M.storeResource(O))})};L.compress=function(M){D(M),P(M)}}},,function(u,h,E){const C=E(2).observable;u.exports=function(T,L,N,R){'use strict';let P,D,M;const W=C(this),O=function(){const U=!!M&&0<M.length;W.dispatchEvent('fileChangeContext',{unsaved:U})},H=function(){return'unsaved-changes'+T.getPath()};W.unsavedMessage='This document has unsaved changes. If you leave now, you might lose data.  If you are experiencing connectivity problems, cancel and save the data locally using File->Download As->MindMup',N.addEventListener('fileLoaded',function(U){O(),D=U,R.getItem(H())&&W.dispatchEvent('unsavedChangesPending')}),N.addEventListener('saveFileSuccess',function(){W.dispatchEvent('noUnsavedChanges'),P&&M&&M.length&&(R.remove(P),P=void 0,M=[]),O()}),L.addEventListener('localContentEvent',function(U){W.dispatchEvent('unsavedChanges'),H()!==P&&(P=H(),M=R.getItem(P)||[]),M.push(U),O();try{R.setItem(P,M)}catch(z){W.dispatchEvent('unsavedChangesStorageWarning')}}),T.beforeUnload(function(U){if(M&&M.length)return U.returnValue=W.unsavedMessage,U.preventDefault(),W.unsavedMessage}),W.discardUnsavedChanges=function(){R.remove(H()),W.dispatchEvent('unsavedChangesConfirmed')},W.applyUnsavedChanges=function(){if(D){const U=R.getItem(H());U&&U.length&&(R.remove(H()),U.forEach(function(z){L.triggerRemoteContentEvent(z,L.getLocalSessionId())})),W.dispatchEvent('unsavedChangesConfirmed')}}}},,,,,function(u,h,E){E(4);const C=E(1);C.fn.goldDriveImportWidget=function(I){'use strict';return C(this).each(function(){const T=C(this).sectionHandlerWidget(),L=T.find('[data-mm-role~=import-file-name]'),R=function(){T.showSection('inprogress')},P=function(){const D=L.val();D&&D.trim().length?(I.save(D),R()):(L.addClass('validation-error'),L.focus())};T.find('[data-mm-role~=save]').on('click',P),L.on('keypress',function(D){13===D.which&&P()}),I.addEventListener('error',function(D){const M=T.find('[data-mm-error~="'+D+'"]');return'not-subscribed'===D?T.showSection('not-subscribed'):void(T.find('[data-mm-error]').addClass('hidden'),0<M.length?M.removeClass('hidden'):T.find('[data-mm-error~="default"]').removeClass('hidden'),T.showSection('error'))}),I.addEventListener('readyToSave',function(D){L.val(D),T.showSection('initial')}),I.addEventListener('requestConfirmation',function(D){T.showSection('confirmation-'+D)})})}},,,,function(u,h,E){const C=E(1);C.fn.subscriptionProfileWidget=function(I){'use strict';return C.each(this,function(){const T=C(this),L=T.data('mm-subscription-profile');I.addEventListener('subscribed expiredSubscription notRegistered',function(N){L&&N&&N[L]&&(T.removeClass('hidden'),T.text(N[L]))}),I.addEventListener('notAuthenticated authenticating',function(){T.addClass('hidden')})})}},,,,,,,,,,,,,function(u){u.exports=function(C,I){'use strict';const T=C.getActiveContent(),L=T&&T.getDefaultRootId(),N=T&&T.findSubIdeaById(L),R=N&&N.title;return I&&!I.free&&!I.new&&!I.legacy&&I.fileId||R}},,,,,,,,,function(u,h,E){const C=E(1),I=E(0),T=E(14),L=E(117),N=E(25).ThemeProcessor,R=E(6),P=E(118),D=E(44),M=E(26),W=E(27),O=E(144),H=E(93),U=E(28),z=E(120),V=E(98),X=E(95),Y=E(43),G=E(305),K=E(307),Q=E(300),J=E(304),Z=E(301),ee=E(145),te=E(132),ae=E(172),ie=E(133),oe=E(97),re=E(322),de=E(295),se=E(124),le=E(139),ce=E(86),pe=E(136),ue=E(165),he=E(303),ge=E(153),me=E(122),fe=E(125),ye=E(302),ve=E(141),xe=E(130),be=E(128),we=E(121),Ee=E(123),ke=E(131),Ce=E(140),Se=E(2).observable,Ie=E(137),Te=E(151),Ae=E(142),Fe=E(148),Le=E(147),Ne=E(149),Re=E(150),Pe=E(129),De=E(33),Me=E(143),je=E(32),We=E(94),Oe=E(11),Be=E(45),qe=E(138),_e=E(324),He=E(126),Ue=E(308),ze=E(146);E(108),E(210),E(99),E(212),E(101),E(46),E(182),E(157),E(35),E(13),E(12),E(15),E(29),E(30),E(87),E(88),E(178),E(191),E(204),E(211),E(333),E(156),E(179),E(159),E(158),E(160),E(194),E(106),E(161),E(162),E(203),E(184),E(185),E(174),E(192),E(167),E(163),E(170),E(173),E(171),E(329),E(207),E(208),E(107),E(175),E(180),E(186),E(188),E(205),E(201),E(202),E(198),E(176),E(189),E(200),E(177),E(181),E(187),E(213),E(193),E(195),E(196),E(197),E(164),E(206),u.exports=function(Xe){'use strict';const Ye=W(window.localStorage),Ge=new T,Ke=new M(1e3),$e=new R.JsonStorage(Ye),Qe=new R.Authentication.GoldLicenseManager($e,'licenseKey'),Je=new R.Subscription.PlanModel(Xe.plans),Ze=new D(C.ajax,Xe.goldAWSApiUrl,Ke,Ge,Je),et=new H(C,Ge),tt=new U(Ge),nt=new O(Ge,et,tt),at=new z,it=new Y,ot=new V(it,Ze,$e,tt),rt=new R.AtlasModel(Qe,Ze),dt=new X(Qe,Ze,it,ot),lt=new G(Ge),ut=new K(lt),ht=new Q(lt,ot),gt=new J(Xe,Ze,nt),mt=new Z(Xe,lt,ot,Ge,gt,new te(ae)),ft=new oe(Ye),yt='internal',vt=new ce(Xe.stripeKey,'/assets/gold_128.png',window),xt=new re(yt),bt=new se(xt.compress),wt=new de(bt,yt),Et=new le(ft,'clipboard',at,wt),kt=Se({}),Ct=E(127),St=new L.MapModel(L.DOMRender.layoutCalculator,[Ct.ideas[1].title],Et),It=new R.ArgumentMapping.Model(St,bt),Tt=new pe(St,ut,ue),At=C('mapeditor'),Ft=new he(Xe,Ge),Lt=new ge(bt,St,'note'),Nt=new me(St,ht,Ge,Lt),Rt=new fe(Xe.colors),Pt=new ye(Xe,Ge,ot,bt,Ct,Ze,nt,Ft,gt),Dt=new ve(Xe,Ge),Mt=new be(et),jt=Ee(Mt.load,we(xe,bt)),Wt=Ee(function(mn){return Promise.resolve(mn)},ke),Ot=P,Bt=new R.Measures.Model(bt,'measurements-config','measurements',St,Se,new R.Measures.ActivatedNodesFilter(St,Se)),qt=new R.Progress.Model(St),_t=new Ie(Ge,wt.getResource),Ht=new Ce(_t,bt,St,Ot),Ut=new ze,zt=new Te(bt,'storyboards','storyboard-scenes'),Vt=new Ae,Xt=new pe(Vt,ut,ue),Yt=new Fe(wt),Gt=new Le(zt,St),Kt=new Re(St,Gt),$t=new Ne(_t,zt,Yt),Qt=new Pe(Ge),Jt=Ee(Qt.convertToRequestedFormat,ke),Zt={exporter:Ht.makeExportable,processor:Wt},en={'map.pdf':Ht.makeExportable,'map.svg':{exporter:Ht.makeExportable,processor:Jt},'presentation.pdf':{exporter:$t.makeExportable,processor:Wt},'presentation.pptx':{exporter:$t.makeExportable,processor:Wt},'storyboard.docx':{exporter:$t.makeExportable,processor:Wt},'outline.docx':Zt,'outline.md':Zt,'outline.txt':Zt,'outline.html':Zt,'outline.org':Zt,'outline.opml':Zt,'notes.txt':Zt,'notes.docx':Zt,'notes.html':Zt,'atlas.json':{exporter:Ht.makeExportable,processor:jt}},tn=new De(Ke),nn=new Me(en,ot,nt,Ke,tn),an=new qe(Ge,Ht,ie),rn=new _e(Ge,bt,Pt,ft),dn=new Oe({client_id:Xe.googleOauthClientId,cookie_policy:'single_host_origin',scope:'email profile'},C.ajax,window,Ge),sn=new Be(dn),ln=new je(Xe.scriptLoadingTimeout,window,Ge),cn=new We(sn,Ze,it,Qe,ln),pn=new R.Themes.Model(St),un=new Ue(gt,Ft),hn=new He(Xe,un,bt,Pt),gn={argumentMappingModel:It,attachmentEditorController:Nt,authenticationModel:it,authenticator:dt,collaborationModel:bt,colorPickerModel:Rt,copyFileController:hn,goldFunnelModel:tn,goldPageState:Ft,iconEditorController:Tt,importModel:mt,layoutExportController:nn,localExportController:an,mapContentExporter:Ht,mapModel:St,measuresModel:Bt,navigatorModel:Ge,networkStatusDispatcher:Dt,pageController:Pt,progressModel:qt,progressIconEditorController:Xt,progressIconPersister:Vt,resourceCompressor:xt,splittableModel:Ut,storyboardMapMediator:Kt,storyboardModel:zt,storyboardController:Gt,subscriptionModel:ot,themesModel:pn,unsavedChangesModel:rn,writerModel:Lt};window.components=gn,bt.addEventListener('error',function(mn,yn){'unknown'===mn&&Ke.error('Collaboration-Model:'+yn)}),L.DOMRender.stageMargin={top:50,left:50,bottom:50,right:50},ee(Ke,window),Xe.mapModelAnalytics&&St.addEventListener('analytic',Ke.log),it.addEventListener('authenticated notAuthenticated',function(mn){if('signed-out'===mn)return void Ge.redirect('/')}),bt.addEventListener('newSession',function(mn){St.setIdea(mn),qt.bindContentListeners(),pn.bindContentListeners(),St.focusAndSelect(mn.getDefaultRootId())}),C('[data-mm-hotkey]').macifyHotkeys(Ge),C('[data-mm-role~="alertWidget"]').alertWidget(at),C('[data-mm-user-profile]').userProfileWidget(it),C('[data-mm-subscription-profile]').subscriptionProfileWidget(ot),C('[data-mm-role~="createNewMap"]').newAwsMapWidget(Ge,Xe),C('[data-mm-role="copyFileWidget"]').copyFileWidget(hn,Pt),I.each(gn,function(mn,yn){C('[data-mm-model="'+yn+'"][data-mm-model-action]').modelActionWidget(mn),C('[data-mm-event-dispatcher~="'+yn+'"]').eventVisibilityWidget(mn)}),C('body').splittableWidget(Ut,St),Ge.isMobile()&&Ge.isTouch()&&C('body').addClass('touchdevice'),C('[data-mm-role="iconEditorWidget"]').iconEditorWidget(Tt,wt.getResource),C('[data-mm-role="file-name"]').fileNameWidget(Pt),C('[data-mm-input-focus]').inputFocusWidget(),C('[data-mm-role="attachmentEditorWidget"]').attachmentEditorWidget(Nt),C('[data-mm-role="contactLink"]').contactLinkWidget(Xe,Ge),C('[data-mm-validate-input]').inputValidationWidget(),At.domMapWidget(Ke,St,Ge.isMobile()&&Ge.isTouch(),kt,C('splittable'),wt.getResource,!0),C('mapmenu').menuBarWidget(Ge),C('[data-mm-node-context]').nodeContextWidget(St),C('a[download]').downloadLinkWidget(Ge),C('modalContainer').visibilityObserver().focusTransferWidget(At),C('[data-mm-dismissible]').dismissibleWidget(),C('[data-mm-show-hotkey]').showHotkeyWidget(C(document)),C('contextmenu[data-mm-role~="node-context"]').contextMenuWidget(St,C('mapeditor'),C('body')),C('contextmenu[data-mm-role~="writer-context"]').contextMenuWidget(Lt,C('#writer'),C('body')),C('[data-mm-node-link-attr]').nodeLinkStyleWidget(St),C('[data-mm-role="remove-node-link"]').nodeLinkRemovalWidget(St),C('[data-mm-role~="colorPickerWidget"]').colorPickerWidget(Rt),C('[data-mm-node-link-color]').nodeLinkColorWidget(St,Rt),C('[data-mm-node-color]').nodeColorWidget(St,Rt),C('[data-mm-toggle-class]').toggleClassWidget(),C('[data-mm-role=keyboard-color]').keyboardColorWidget(St),C('#searchWidget').searchWidget(St),C('[data-mm-role~="layout-exporter"]').remoteExportWidget(nn,ot),C('[data-mm-role~="atlas-publisher"]').atlasPrepopulationWidget(St,40,150).atlasRepublishingWidget(rt),C('[data-mm-role~="localExportWidget"]').localExportWidget(an),C('[data-mm-role~="goldAccountDialog"]').goldAccountWidget(ot,Xe,tn,!0,vt,Ze,Je),C('[data-mm-role~="popup-link"]').popupLinkWidget(Ge),C('[data-mm-role~=selectable-read-only]').selectableReadOnlyInputWidget(),C('[data-mm-role~=full-screen-view]').fullScreenControlWidget(Ge),C('tabbedsection').tabbedSectionWidget(),C('[data-mm-sidebar-name]').sidebarWidget(Ut),C('#storyboard').storyboardWidget(Gt,zt,Yt,Kt,Ut),C('#writer').writerWidget(Lt,Ut),C('[data-category]').trackingWidget(Ke),C('[data-mm-install-hotkey]').installHotkeyWidget(),C('[data-mm-storyboard-context]').contextDisablerWidget(Gt,'storyboardContext','data-mm-storyboard-context'),C('[data-mm-file-save-context]').contextDisablerWidget(rn,'fileChangeContext','data-mm-file-save-context'),C('[data-mm-aws-file-context]').contextDisablerWidget(Pt,'fileInfo','data-mm-aws-file-context'),C('[data-mm-writer-context]').contextDisablerWidget(Lt,'writerContext','data-mm-writer-context'),C('[data-mm-measures-context]').contextDisablerWidget(Bt,'measuresContext','data-mm-measures-context'),C('[data-mm-progress-context]').contextDisablerWidget(qt,'progressContext','data-mm-progress-context'),C('[data-mm-themes-context]').contextDisablerWidget(pn,'themesContext','data-mm-themes-context'),C('[data-mm-argument-mapping-context]').contextDisablerWidget(It,'argumentMappingContext','data-mm-argument-mapping-context'),C('mapeditor').storyboardKeyHandlerWidget(Gt,zt,St,'+'),C('[data-mm-role~="gold-authentication-dialog"]').goldAuthenticationWidget(dt),C('[data-mm-role~="import-widget"]').goldDriveImportWidget(mt),C('[data-mm-role~=blob-downloader-link]').blobDownloaderLinkWidget(Ge),C('[data-mm-role~=blob-tab-loader-link]').blobDownloaderLinkWidget(Ge,!0),C('[data-mm-role~="gapi-authentication-dialog"]').gapiAuthenticationWidget(cn),C('[data-mm-role~="suggested-email"]').suggestedEmailWidget(it),C('#measuresSheet').measuresSheetWidget(Bt),C('[data-mm-role~="measure-add"]').addMeasureWidget(Bt),C(['[data-mm-role~="measures-exporter"]']).measuresExportWidget(Bt,Ge),C('#progressTools').progressToolsWidget(qt),C('[data-mm-role~="progress-status-menu"]').progressStatusMenuWidget(qt),C('[data-mm-role~="progress-config-selector"]').progressConfigSelectorWidget(qt),C('[data-mm-role~="progress-projection-selector"]').progressProjectionsWidget(qt),C('[data-mm-role~="progress-calc"]').progressCalcWidget(qt),C('[data-mm-role~="progress-toggle-property"]').progressFilterPropertyToggleWidget(qt),C('#progress-status-config').progressConfigEditorWidget(qt,Rt,Vt,Xt),C('<style>').appendTo('body').themeCssWidget(Ot,new N,St),C('[data-mm-set-theme]').setThemeWidget(St),C(document).pageScrollKeyOverride(),window.components=gn,window.mmtimestamp.log('mm init'),dt.backgroundAuthenticate()}}]);
//# sourceMappingURL=editor-aws.js.map